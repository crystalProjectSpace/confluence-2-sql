<?xml version="1.0" encoding="UTF-8"?>
<hibernate-generic datetime="2021-05-27 11:00:24">
<object class="Notification" package="com.atlassian.confluence.mail.notification">
<id name="id">79593915</id>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="receiver" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-05-11 16:38:08.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-05-11 16:38:08.000</property>
<property name="digest">false</property>
<property name="network">false</property>
<property name="type" enum-class="ContentTypeEnum" package="com.atlassian.confluence.search.service">page</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79502384</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434764</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-05-06 14:10:30.000</property>
<property name="lastModificationDate">2021-05-06 14:10:30.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79502637</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434934</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e23601621e6f0864000e]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-05-07 16:00:14.000</property>
<property name="lastModificationDate">2021-05-07 16:00:14.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e23601621e6f0864000e]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e23601621e6f0864000e]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79502456</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434817</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-05-06 17:02:52.000</property>
<property name="lastModificationDate">2021-05-06 17:02:52.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79502455</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[touched]]></property>
<property name="creationDate">2021-05-06 17:02:52.000</property>
<property name="lastModificationDate">2021-05-06 17:02:52.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79502453</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434816</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-05-06 17:02:01.000</property>
<property name="lastModificationDate">2021-05-06 17:02:01.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
</object>
<object class="Notification" package="com.atlassian.confluence.mail.notification">
<id name="id">79593839</id>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434229</id>
</property>
<property name="receiver" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:43:45.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:43:45.000</property>
<property name="digest">false</property>
<property name="network">false</property>
<property name="type" enum-class="ContentTypeEnum" package="com.atlassian.confluence.search.service">page</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79501620</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434219</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-04-27 12:15:51.000</property>
<property name="lastModificationDate">2021-04-27 12:15:51.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79501619</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434222</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-04-27 12:15:51.000</property>
<property name="lastModificationDate">2021-04-27 12:15:51.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79502387</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434765</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-05-06 14:10:39.000</property>
<property name="lastModificationDate">2021-05-06 14:10:39.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79501618</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434219</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[touched]]></property>
<property name="creationDate">2021-04-27 12:15:51.000</property>
<property name="lastModificationDate">2021-04-27 12:15:51.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
</object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434229</id>
<property name="hibernateVersion">5</property>
<property name="title"><![CDATA[02 ПТК проекта]]></property>
<property name="lowerTitle"><![CDATA[02 птк проекта]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466112</id>
</element>
</collection>
<collection name="outgoingLinks" class="java.util.Collection"><element class="OutgoingLink" package="com.atlassian.confluence.links"><id name="id">79584262</id>
</element>
<element class="OutgoingLink" package="com.atlassian.confluence.links"><id name="id">79584263</id>
</element>
<element class="OutgoingLink" package="com.atlassian.confluence.links"><id name="id">79584264</id>
</element>
</collection>
<collection name="referralLinks" class="java.util.Collection"><element class="ReferralLink" package="com.atlassian.confluence.links"><id name="id">79626570</id>
</element>
<element class="ReferralLink" package="com.atlassian.confluence.links"><id name="id">79626574</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545403</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545408</id>
</element>
</collection>
<property name="version">2</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:43:45.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:53:47.000</property>
<property name="versionComment"><![CDATA[]]></property>
<collection name="historicalVersions" class="java.util.Collection"><element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434232</id>
</element>
</collection>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="position"/><property name="parent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434219</id>
</property>
<collection name="ancestors" class="java.util.List"><element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434219</id>
</element>
</collection>
</object>
<object class="Notification" package="com.atlassian.confluence.mail.notification">
<id name="id">79593836</id>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434219</id>
</property>
<property name="receiver" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
<property name="digest">false</property>
<property name="network">false</property>
<property name="type" enum-class="ContentTypeEnum" package="com.atlassian.confluence.search.service">page</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79502429</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434800</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-05-06 16:35:56.000</property>
<property name="lastModificationDate">2021-05-06 16:35:56.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79502941</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79435130</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-05-11 17:07:07.000</property>
<property name="lastModificationDate">2021-05-11 17:07:07.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
</object>
<object class="Space" package="com.atlassian.confluence.spaces">
<id name="id">81297409</id>
<property name="name"><![CDATA[ОСЖД]]></property>
<property name="key"><![CDATA[OSJD]]></property>
<property name="lowerKey"><![CDATA[osjd]]></property>
<property name="description" class="SpaceDescription" package="com.atlassian.confluence.spaces"><id name="id">79434218</id>
</property>
<property name="homePage" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434219</id>
</property>
<collection name="permissions" class="java.util.Collection"><element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936963</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936964</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936965</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936966</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936967</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936968</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936969</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936970</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936971</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936972</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936973</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936974</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936975</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936976</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936977</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936978</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936979</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936980</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936981</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936982</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936983</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936984</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936985</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936986</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936987</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936988</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936989</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936990</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936991</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936992</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936993</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936994</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936995</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936996</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936997</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936998</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80936999</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80937000</id>
</element>
<element class="SpacePermission" package="com.atlassian.confluence.security"><id name="id">80937001</id>
</element>
</collection>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:23:21.000</property>
<property name="spaceType">global</property>
<property name="spaceStatus" enum-class="SpaceStatus" package="com.atlassian.confluence.spaces">CURRENT</property>
</object>
<object class="Notification" package="com.atlassian.confluence.mail.notification">
<id name="id">79593895</id>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="receiver" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e23601621e6f0864000e]]></id>
</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e23601621e6f0864000e]]></id>
</property>
<property name="creationDate">2021-05-07 15:33:05.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e23601621e6f0864000e]]></id>
</property>
<property name="lastModificationDate">2021-05-07 15:33:05.000</property>
<property name="digest">false</property>
<property name="network">false</property>
<property name="type" enum-class="ContentTypeEnum" package="com.atlassian.confluence.search.service">page</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79502428</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[touched]]></property>
<property name="creationDate">2021-05-06 16:35:56.000</property>
<property name="lastModificationDate">2021-05-06 16:35:56.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79502940</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[touched]]></property>
<property name="creationDate">2021-05-11 17:07:07.000</property>
<property name="lastModificationDate">2021-05-11 17:07:07.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
</object>
<object class="Notification" package="com.atlassian.confluence.mail.notification">
<id name="id">79593896</id>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="receiver" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee60003]]></id>
</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee60003]]></id>
</property>
<property name="creationDate">2021-05-07 16:00:14.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee60003]]></id>
</property>
<property name="lastModificationDate">2021-05-07 16:00:14.000</property>
<property name="digest">false</property>
<property name="network">false</property>
<property name="type" enum-class="ContentTypeEnum" package="com.atlassian.confluence.search.service">page</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79502938</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79435128</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-05-11 16:44:03.000</property>
<property name="lastModificationDate">2021-05-11 16:44:03.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
</object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434763</id>
<property name="hibernateVersion">54</property>
<property name="title"><![CDATA[Перенос ОСЖД из ГВЦ в ИнЭкс]]></property>
<property name="lowerTitle"><![CDATA[перенос осжд из гвц в инэкс]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466567</id>
</element>
</collection>
<collection name="outgoingLinks" class="java.util.Collection"><element class="OutgoingLink" package="com.atlassian.confluence.links"><id name="id">79593027</id>
</element>
<element class="OutgoingLink" package="com.atlassian.confluence.links"><id name="id">79593028</id>
</element>
<element class="OutgoingLink" package="com.atlassian.confluence.links"><id name="id">79593029</id>
</element>
<element class="OutgoingLink" package="com.atlassian.confluence.links"><id name="id">79593030</id>
</element>
<element class="OutgoingLink" package="com.atlassian.confluence.links"><id name="id">79593031</id>
</element>
<element class="OutgoingLink" package="com.atlassian.confluence.links"><id name="id">79593032</id>
</element>
<element class="OutgoingLink" package="com.atlassian.confluence.links"><id name="id">79593033</id>
</element>
<element class="OutgoingLink" package="com.atlassian.confluence.links"><id name="id">79593034</id>
</element>
<element class="OutgoingLink" package="com.atlassian.confluence.links"><id name="id">79593035</id>
</element>
<element class="OutgoingLink" package="com.atlassian.confluence.links"><id name="id">79593036</id>
</element>
<element class="OutgoingLink" package="com.atlassian.confluence.links"><id name="id">79593037</id>
</element>
<element class="OutgoingLink" package="com.atlassian.confluence.links"><id name="id">79593038</id>
</element>
</collection>
<collection name="referralLinks" class="java.util.Collection"><element class="ReferralLink" package="com.atlassian.confluence.links"><id name="id">79626569</id>
</element>
<element class="ReferralLink" package="com.atlassian.confluence.links"><id name="id">79626571</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79550447</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79550448</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79550454</id>
</element>
</collection>
<property name="version">24</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="creationDate">2021-05-06 14:09:25.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="lastModificationDate">2021-05-17 16:08:42.000</property>
<property name="versionComment"><![CDATA[]]></property>
<collection name="historicalVersions" class="java.util.Collection"><element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434764</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434765</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434771</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434772</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434774</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434776</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434800</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434816</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434817</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434824</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434922</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434923</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434934</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434955</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434957</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434959</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434996</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79435125</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79435128</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79435130</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79435532</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79435536</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79435628</id>
</element>
</collection>
<property name="contentStatus"><![CDATA[current]]></property>
<collection name="attachments" class="java.util.Collection"><element class="Attachment" package="com.atlassian.confluence.pages"><id name="id">79434770</id>
</element>
<element class="Attachment" package="com.atlassian.confluence.pages"><id name="id">79434773</id>
</element>
<element class="Attachment" package="com.atlassian.confluence.pages"><id name="id">79434775</id>
</element>
</collection>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="position"/><property name="parent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434219</id>
</property>
<collection name="ancestors" class="java.util.List"><element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434219</id>
</element>
</collection>
</object>
<object class="Notification" package="com.atlassian.confluence.mail.notification">
<id name="id">79593956</id>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="receiver" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="creationDate">2021-05-17 16:08:42.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="lastModificationDate">2021-05-17 16:08:42.000</property>
<property name="digest">false</property>
<property name="network">false</property>
<property name="type" enum-class="ContentTypeEnum" package="com.atlassian.confluence.search.service">page</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79502628</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434923</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e23601621e6f0864000e]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-05-07 15:33:54.000</property>
<property name="lastModificationDate">2021-05-07 15:33:54.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e23601621e6f0864000e]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e23601621e6f0864000e]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79502627</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e23601621e6f0864000e]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[touched]]></property>
<property name="creationDate">2021-05-07 15:33:54.000</property>
<property name="lastModificationDate">2021-05-07 15:33:54.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e23601621e6f0864000e]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e23601621e6f0864000e]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79502625</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434922</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-05-07 15:33:05.000</property>
<property name="lastModificationDate">2021-05-07 15:33:05.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
</object>
<object class="Notification" package="com.atlassian.confluence.mail.notification">
<id name="id">79593884</id>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="receiver" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="creationDate">2021-05-06 14:49:34.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="lastModificationDate">2021-05-06 14:49:34.000</property>
<property name="digest">false</property>
<property name="network">false</property>
<property name="type" enum-class="ContentTypeEnum" package="com.atlassian.confluence.search.service">page</property>
</object>
<object class="Notification" package="com.atlassian.confluence.mail.notification">
<id name="id">79593885</id>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="receiver" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
<property name="creationDate">2021-05-06 14:50:24.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
<property name="lastModificationDate">2021-05-06 14:50:24.000</property>
<property name="digest">false</property>
<property name="network">false</property>
<property name="type" enum-class="ContentTypeEnum" package="com.atlassian.confluence.search.service">page</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79502670</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434955</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee60003]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-05-07 17:37:44.000</property>
<property name="lastModificationDate">2021-05-07 17:37:44.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee60003]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee60003]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79502935</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79435125</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-05-11 16:38:08.000</property>
<property name="lastModificationDate">2021-05-11 16:38:08.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79503701</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-05-17 16:08:43.000</property>
<property name="lastModificationDate">2021-05-17 16:08:43.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79502676</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434959</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee60003]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-05-07 18:41:36.000</property>
<property name="lastModificationDate">2021-05-07 18:41:36.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee60003]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee60003]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79503700</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79435628</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-05-17 16:08:43.000</property>
<property name="lastModificationDate">2021-05-17 16:08:43.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79502675</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee60003]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[touched]]></property>
<property name="creationDate">2021-05-07 18:41:36.000</property>
<property name="lastModificationDate">2021-05-07 18:41:36.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee60003]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee60003]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79503699</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[touched]]></property>
<property name="creationDate">2021-05-17 16:08:42.000</property>
<property name="lastModificationDate">2021-05-17 16:08:42.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79502673</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434957</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee60003]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-05-07 17:41:18.000</property>
<property name="lastModificationDate">2021-05-07 17:41:18.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee60003]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee60003]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79503552</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79435536</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-05-14 18:03:49.000</property>
<property name="lastModificationDate">2021-05-14 18:03:49.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79503551</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[touched]]></property>
<property name="creationDate">2021-05-14 18:03:49.000</property>
<property name="lastModificationDate">2021-05-14 18:03:49.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79502399</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434776</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-05-06 14:53:31.000</property>
<property name="lastModificationDate">2021-05-06 14:53:31.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79501628</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434229</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-04-27 12:53:47.000</property>
<property name="lastModificationDate">2021-04-27 12:53:47.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79502396</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434774</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-05-06 14:51:10.000</property>
<property name="lastModificationDate">2021-05-06 14:51:10.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79501627</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434232</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-04-27 12:53:47.000</property>
<property name="lastModificationDate">2021-04-27 12:53:47.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79501626</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434229</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[touched]]></property>
<property name="creationDate">2021-04-27 12:53:47.000</property>
<property name="lastModificationDate">2021-04-27 12:53:47.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79503546</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79435532</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-05-14 18:02:57.000</property>
<property name="lastModificationDate">2021-05-14 18:02:57.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79502393</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434771</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-05-06 14:49:48.000</property>
<property name="lastModificationDate">2021-05-06 14:49:48.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
</object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434219</id>
<property name="hibernateVersion">12</property>
<property name="title"><![CDATA[ОСЖД]]></property>
<property name="lowerTitle"><![CDATA[осжд]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466103</id>
</element>
</collection>
<collection name="referralLinks" class="java.util.Collection"><element class="ReferralLink" package="com.atlassian.confluence.links"><id name="id">79626572</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545370</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545371</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545372</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545373</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545395</id>
</element>
</collection>
<property name="version">5</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:26:43.000</property>
<property name="versionComment"><![CDATA[]]></property>
<collection name="historicalVersions" class="java.util.Collection"><element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434221</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434222</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434224</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434225</id>
</element>
</collection>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="position"/><collection name="children" class="java.util.Collection"><element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434229</id>
</element>
<element class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</element>
</collection>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79502727</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434996</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee60003]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-05-11 10:34:50.000</property>
<property name="lastModificationDate">2021-05-11 10:34:50.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee60003]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee60003]]></id>
</property>
</object>
<object class="User2ContentRelationEntity" package="com.atlassian.confluence.internal.relations.dao">
<id name="id">79502467</id>
<property name="targetContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434824</id>
</property>
<property name="sourceContent" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="targetType" enum-class="RelatableEntityTypeEnum" package="com.atlassian.confluence.internal.relations">PAGE</property>
<property name="relationName"><![CDATA[collaborator]]></property>
<property name="creationDate">2021-05-06 17:42:16.000</property>
<property name="lastModificationDate">2021-05-06 17:42:16.000</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
</object>
<object class="ConfluenceUserImpl" package="com.atlassian.confluence.user">
<id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
<property name="name"><![CDATA[kuznetsovsi]]></property>
<property name="lowerName"><![CDATA[kuznetsovsi]]></property>
</object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434232</id>
<property name="hibernateVersion">2</property>
<property name="title"><![CDATA[ПТК]]></property>
<property name="lowerTitle"><![CDATA[птк]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466115</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545404</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545405</id>
</element>
</collection>
<property name="version">1</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:43:45.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:43:45.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434229</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434996</id>
<property name="hibernateVersion">35</property>
<property name="title"><![CDATA[Переезд из ГВЦ в ИнЭкс]]></property>
<property name="lowerTitle"><![CDATA[переезд из гвц в инэкс]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466776</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79548094</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79548095</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79548096</id>
</element>
</collection>
<property name="version">17</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="creationDate">2021-05-06 14:09:25.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee60003]]></id>
</property>
<property name="lastModificationDate">2021-05-07 18:41:36.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="OutgoingLink" package="com.atlassian.confluence.links">
<id name="id">79593035</id>
<property name="destinationPageTitle"><![CDATA[//grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&orgId=1]]></property>
<property name="lowerDestinationPageTitle"><![CDATA[//grafana.oooinex.ru/d/uxvd49hmz/dostupnost-servisov-po-http?viewpanel=13&orgid=1]]></property>
<property name="destinationSpaceKey"><![CDATA[https]]></property>
<property name="lowerDestinationSpaceKey"><![CDATA[https]]></property>
<property name="sourceContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="creationDate">2021-05-17 16:08:43.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="lastModificationDate">2021-05-17 16:08:43.000</property>
</object>
<object class="OutgoingLink" package="com.atlassian.confluence.links">
<id name="id">79593034</id>
<property name="destinationPageTitle"><![CDATA[//172.22.2.191/]]></property>
<property name="lowerDestinationPageTitle"><![CDATA[//172.22.2.191/]]></property>
<property name="destinationSpaceKey"><![CDATA[http]]></property>
<property name="lowerDestinationSpaceKey"><![CDATA[http]]></property>
<property name="sourceContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="creationDate">2021-05-17 16:08:43.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="lastModificationDate">2021-05-17 16:08:43.000</property>
</object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434771</id>
<property name="hibernateVersion">6</property>
<property name="title"><![CDATA[Переезд из ГВЦ в ИнЭкс]]></property>
<property name="lowerTitle"><![CDATA[переезд из гвц в инэкс]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466574</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547317</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547318</id>
</element>
</collection>
<property name="version">3</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="creationDate">2021-05-06 14:09:25.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="lastModificationDate">2021-05-06 14:10:39.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="OutgoingLink" package="com.atlassian.confluence.links">
<id name="id">79593037</id>
<property name="destinationPageTitle"><![CDATA[//pirs.wflow.oooinex.ru/issues/DEVOPS-1294]]></property>
<property name="lowerDestinationPageTitle"><![CDATA[//pirs.wflow.oooinex.ru/issues/devops-1294]]></property>
<property name="destinationSpaceKey"><![CDATA[https]]></property>
<property name="lowerDestinationSpaceKey"><![CDATA[https]]></property>
<property name="sourceContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="creationDate">2021-05-17 16:08:43.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="lastModificationDate">2021-05-17 16:08:43.000</property>
</object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79435536</id>
<property name="hibernateVersion">49</property>
<property name="title"><![CDATA[Переезд из ГВЦ в ИнЭкс]]></property>
<property name="lowerTitle"><![CDATA[переезд из гвц в инэкс]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79467247</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79550132</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79550133</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79550134</id>
</element>
</collection>
<property name="version">22</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="creationDate">2021-05-06 14:09:25.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="lastModificationDate">2021-05-14 18:02:57.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="OutgoingLink" package="com.atlassian.confluence.links">
<id name="id">79593036</id>
<property name="destinationPageTitle"><![CDATA[//osjd.info]]></property>
<property name="lowerDestinationPageTitle"><![CDATA[//osjd.info]]></property>
<property name="destinationSpaceKey"><![CDATA[http]]></property>
<property name="lowerDestinationSpaceKey"><![CDATA[http]]></property>
<property name="sourceContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="creationDate">2021-05-17 16:08:43.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="lastModificationDate">2021-05-17 16:08:43.000</property>
</object>
<object class="OutgoingLink" package="com.atlassian.confluence.links">
<id name="id">79593031</id>
<property name="destinationPageTitle"><![CDATA[//gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&viewer=simple]]></property>
<property name="lowerDestinationPageTitle"><![CDATA[//gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/devops-1269/core/sql/media_metadata.sql?expanded=true&viewer=simple]]></property>
<property name="destinationSpaceKey"><![CDATA[https]]></property>
<property name="lowerDestinationSpaceKey"><![CDATA[https]]></property>
<property name="sourceContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="creationDate">2021-05-17 16:08:43.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="lastModificationDate">2021-05-17 16:08:43.000</property>
</object>
<object class="OutgoingLink" package="com.atlassian.confluence.links">
<id name="id">79593030</id>
<property name="destinationPageTitle"><![CDATA[//gitlab.oooinex.ru/osjd/setup/media-export]]></property>
<property name="lowerDestinationPageTitle"><![CDATA[//gitlab.oooinex.ru/osjd/setup/media-export]]></property>
<property name="destinationSpaceKey"><![CDATA[https]]></property>
<property name="lowerDestinationSpaceKey"><![CDATA[https]]></property>
<property name="sourceContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="creationDate">2021-05-17 16:08:43.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="lastModificationDate">2021-05-17 16:08:43.000</property>
</object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434764</id>
<property name="hibernateVersion">2</property>
<property name="title"><![CDATA[Переезд из ГВЦ в ИнЭкс]]></property>
<property name="lowerTitle"><![CDATA[переезд из гвц в инэкс]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466568</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547301</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547302</id>
</element>
</collection>
<property name="version">1</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="creationDate">2021-05-06 14:09:25.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="lastModificationDate">2021-05-06 14:09:25.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="OutgoingLink" package="com.atlassian.confluence.links">
<id name="id">79593033</id>
<property name="destinationPageTitle"><![CDATA[//172.22.2.192/]]></property>
<property name="lowerDestinationPageTitle"><![CDATA[//172.22.2.192/]]></property>
<property name="destinationSpaceKey"><![CDATA[http]]></property>
<property name="lowerDestinationSpaceKey"><![CDATA[http]]></property>
<property name="sourceContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="creationDate">2021-05-17 16:08:43.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="lastModificationDate">2021-05-17 16:08:43.000</property>
</object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79435532</id>
<property name="hibernateVersion">47</property>
<property name="title"><![CDATA[Переезд из ГВЦ в ИнЭкс]]></property>
<property name="lowerTitle"><![CDATA[переезд из гвц в инэкс]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79467243</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79550122</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79550123</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79550124</id>
</element>
</collection>
<property name="version">21</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="creationDate">2021-05-06 14:09:25.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-05-11 17:07:07.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434765</id>
<property name="hibernateVersion">4</property>
<property name="title"><![CDATA[Переезд из ГВЦ в ИнЭкс]]></property>
<property name="lowerTitle"><![CDATA[переезд из гвц в инэкс]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466569</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547305</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547306</id>
</element>
</collection>
<property name="version">2</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="creationDate">2021-05-06 14:09:25.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="lastModificationDate">2021-05-06 14:10:29.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="OutgoingLink" package="com.atlassian.confluence.links">
<id name="id">79593032</id>
<property name="destinationPageTitle"><![CDATA[//172.22.2.193/]]></property>
<property name="lowerDestinationPageTitle"><![CDATA[//172.22.2.193/]]></property>
<property name="destinationSpaceKey"><![CDATA[http]]></property>
<property name="lowerDestinationSpaceKey"><![CDATA[http]]></property>
<property name="sourceContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="creationDate">2021-05-17 16:08:43.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="lastModificationDate">2021-05-17 16:08:43.000</property>
</object>
<object class="OutgoingLink" package="com.atlassian.confluence.links">
<id name="id">79593038</id>
<property name="destinationPageTitle"><![CDATA[Перенос ОСЖД из ГВЦ в ИнЭкс]]></property>
<property name="lowerDestinationPageTitle"><![CDATA[перенос осжд из гвц в инэкс]]></property>
<property name="destinationSpaceKey"><![CDATA[OSJD]]></property>
<property name="lowerDestinationSpaceKey"><![CDATA[osjd]]></property>
<property name="sourceContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="creationDate">2021-05-17 16:08:43.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="lastModificationDate">2021-05-17 16:08:43.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936988</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[VIEWSPACE]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-05-27 10:59:13.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-05-27 10:59:13.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936987</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[VIEWSPACE]]></property>
<property name="group"><![CDATA[Reader Wiki Group]]></property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936990</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[EDITSPACE]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-05-27 10:59:30.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-05-27 10:59:30.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936989</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[SETPAGEPERMISSIONS]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-05-27 10:59:30.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-05-27 10:59:30.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936992</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[REMOVEATTACHMENT]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-05-27 10:59:30.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-05-27 10:59:30.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936991</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[EXPORTSPACE]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-05-27 10:59:30.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-05-27 10:59:30.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936994</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[REMOVEPAGE]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-05-27 10:59:30.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-05-27 10:59:30.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936993</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[REMOVEOWNCONTENT]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-05-27 10:59:30.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-05-27 10:59:30.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936980</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[VIEWSPACE]]></property>
<property name="group"><![CDATA[Авторы википедии]]></property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936979</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[REMOVEATTACHMENT]]></property>
<property name="group"><![CDATA[Авторы википедии]]></property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936982</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[REMOVEOWNCONTENT]]></property>
<property name="group"><![CDATA[Авторы википедии]]></property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936981</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[REMOVECOMMENT]]></property>
<property name="group"><![CDATA[Reader Wiki Group]]></property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936984</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[REMOVEPAGE]]></property>
<property name="group"><![CDATA[Авторы википедии]]></property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936983</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[CREATEATTACHMENT]]></property>
<property name="group"><![CDATA[Авторы википедии]]></property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936986</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[COMMENT]]></property>
<property name="group"><![CDATA[Авторы википедии]]></property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936985</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[REMOVECOMMENT]]></property>
<property name="group"><![CDATA[Авторы википедии]]></property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936972</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[REMOVEATTACHMENT]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936971</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[CREATEATTACHMENT]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936974</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[EXPORTSPACE]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434224</id>
<property name="hibernateVersion">8</property>
<property name="title"><![CDATA[ОСЖД]]></property>
<property name="lowerTitle"><![CDATA[осжд]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466107</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545384</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545385</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545386</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545387</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545388</id>
</element>
</collection>
<property name="version">3</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:15:51.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434219</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936973</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[EDITBLOG]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434225</id>
<property name="hibernateVersion">10</property>
<property name="title"><![CDATA[ОСЖД]]></property>
<property name="lowerTitle"><![CDATA[осжд]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466108</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545390</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545391</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545392</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545393</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545394</id>
</element>
</collection>
<property name="version">4</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:26:38.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434219</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434222</id>
<property name="hibernateVersion">5</property>
<property name="title"><![CDATA[OSJD]]></property>
<property name="lowerTitle"><![CDATA[osjd]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466106</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545374</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545375</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545376</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545377</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545378</id>
</element>
</collection>
<property name="version">2</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:15:33.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434219</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936976</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[SETPAGEPERMISSIONS]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936975</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[REMOVEMAIL]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936978</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[COMMENT]]></property>
<property name="group"><![CDATA[Reader Wiki Group]]></property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936977</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[EDITSPACE]]></property>
<property name="group"><![CDATA[Авторы википедии]]></property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434221</id>
<property name="hibernateVersion">2</property>
<property name="title"><![CDATA[OSJD домашняя страница]]></property>
<property name="lowerTitle"><![CDATA[osjd домашняя страница]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466105</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545364</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545365</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545366</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545367</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545368</id>
</element>
</collection>
<property name="version">1</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434219</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936964</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[REMOVEOWNCONTENT]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936963</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[VIEWSPACE]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936966</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[EDITSPACE]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936965</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[COMMENT]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936968</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[REMOVEPAGE]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936967</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[SETSPACEPERMISSIONS]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936970</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[REMOVEBLOG]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936969</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[REMOVECOMMENT]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:13:35.000</property>
</object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79550448</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">23</property>
<property name="dateValue"/></object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434934</id>
<property name="hibernateVersion">27</property>
<property name="title"><![CDATA[Переезд из ГВЦ в ИнЭкс]]></property>
<property name="lowerTitle"><![CDATA[переезд из гвц в инэкс]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466722</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547850</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547851</id>
</element>
</collection>
<property name="version">13</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="creationDate">2021-05-06 14:09:25.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e23601621e6f0864000e]]></id>
</property>
<property name="lastModificationDate">2021-05-07 15:33:54.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79550447</id>
<property name="name"><![CDATA[macro-count.code]]></property>
<property name="stringValue"><![CDATA[23-4]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="OutgoingLink" package="com.atlassian.confluence.links">
<id name="id">79584263</id>
<property name="destinationPageTitle"><![CDATA[//osjd.oooinex.ru]]></property>
<property name="lowerDestinationPageTitle"><![CDATA[//osjd.oooinex.ru]]></property>
<property name="destinationSpaceKey"><![CDATA[https]]></property>
<property name="lowerDestinationSpaceKey"><![CDATA[https]]></property>
<property name="sourceContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434229</id>
</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:53:47.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:53:47.000</property>
</object>
<object class="OutgoingLink" package="com.atlassian.confluence.links">
<id name="id">79584262</id>
<property name="destinationPageTitle"><![CDATA[//osjd.odev.oooinex.ru]]></property>
<property name="lowerDestinationPageTitle"><![CDATA[//osjd.odev.oooinex.ru]]></property>
<property name="destinationSpaceKey"><![CDATA[https]]></property>
<property name="lowerDestinationSpaceKey"><![CDATA[https]]></property>
<property name="sourceContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434229</id>
</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:53:47.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:53:47.000</property>
</object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434959</id>
<property name="hibernateVersion">33</property>
<property name="title"><![CDATA[Переезд из ГВЦ в ИнЭкс]]></property>
<property name="lowerTitle"><![CDATA[переезд из гвц в инэкс]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466742</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547967</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547968</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547969</id>
</element>
</collection>
<property name="version">16</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="creationDate">2021-05-06 14:09:25.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee60003]]></id>
</property>
<property name="lastModificationDate">2021-05-07 17:41:18.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79550454</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[code]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="OutgoingLink" package="com.atlassian.confluence.links">
<id name="id">79584264</id>
<property name="destinationPageTitle"><![CDATA[//osjd.org]]></property>
<property name="lowerDestinationPageTitle"><![CDATA[//osjd.org]]></property>
<property name="destinationSpaceKey"><![CDATA[https]]></property>
<property name="lowerDestinationSpaceKey"><![CDATA[https]]></property>
<property name="sourceContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434229</id>
</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:53:47.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:53:47.000</property>
</object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434957</id>
<property name="hibernateVersion">31</property>
<property name="title"><![CDATA[Переезд из ГВЦ в ИнЭкс]]></property>
<property name="lowerTitle"><![CDATA[переезд из гвц в инэкс]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466740</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547961</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547962</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547963</id>
</element>
</collection>
<property name="version">15</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="creationDate">2021-05-06 14:09:25.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee60003]]></id>
</property>
<property name="lastModificationDate">2021-05-07 17:37:44.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936996</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[CREATEATTACHMENT]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-05-27 10:59:30.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-05-27 10:59:30.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936995</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[REMOVEBLOG]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-05-27 10:59:30.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-05-27 10:59:30.000</property>
</object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434955</id>
<property name="hibernateVersion">29</property>
<property name="title"><![CDATA[Переезд из ГВЦ в ИнЭкс]]></property>
<property name="lowerTitle"><![CDATA[переезд из гвц в инэкс]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466738</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547955</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547956</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547957</id>
</element>
</collection>
<property name="version">14</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="creationDate">2021-05-06 14:09:25.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee60003]]></id>
</property>
<property name="lastModificationDate">2021-05-07 16:00:14.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936998</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[REMOVECOMMENT]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-05-27 10:59:30.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-05-27 10:59:30.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936997</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[REMOVEMAIL]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-05-27 10:59:30.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-05-27 10:59:30.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80937000</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[SETSPACEPERMISSIONS]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-05-27 10:59:30.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-05-27 10:59:30.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80936999</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[EDITBLOG]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-05-27 10:59:30.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-05-27 10:59:30.000</property>
</object>
<object class="SpacePermission" package="com.atlassian.confluence.security">
<id name="id">80937001</id>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<property name="type"><![CDATA[COMMENT]]></property>
<property name="group"/><property name="userSubject" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
<property name="allUsersSubject"/><property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-05-27 10:59:30.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-05-27 10:59:30.000</property>
</object>
<object class="ConfluenceUserImpl" package="com.atlassian.confluence.user">
<id name="key"><![CDATA[2c9682b35f00e23601621e6f0864000e]]></id>
<property name="name"><![CDATA[tihonina]]></property>
<property name="lowerName"><![CDATA[tihonina]]></property>
</object>
<object class="OutgoingLink" package="com.atlassian.confluence.links">
<id name="id">79593027</id>
<property name="destinationPageTitle"><![CDATA[//osjd.org/]]></property>
<property name="lowerDestinationPageTitle"><![CDATA[//osjd.org/]]></property>
<property name="destinationSpaceKey"><![CDATA[http]]></property>
<property name="lowerDestinationSpaceKey"><![CDATA[http]]></property>
<property name="sourceContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="creationDate">2021-05-17 16:08:43.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="lastModificationDate">2021-05-17 16:08:43.000</property>
</object>
<object class="OutgoingLink" package="com.atlassian.confluence.links">
<id name="id">79593029</id>
<property name="destinationPageTitle"><![CDATA[//gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql]]></property>
<property name="lowerDestinationPageTitle"><![CDATA[//gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/devops-1269/core/sql/acl_export.sql]]></property>
<property name="destinationSpaceKey"><![CDATA[https]]></property>
<property name="lowerDestinationSpaceKey"><![CDATA[https]]></property>
<property name="sourceContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="creationDate">2021-05-17 16:08:43.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="lastModificationDate">2021-05-17 16:08:43.000</property>
</object>
<object class="OutgoingLink" package="com.atlassian.confluence.links">
<id name="id">79593028</id>
<property name="destinationPageTitle"><![CDATA[//controll.sh/]]></property>
<property name="lowerDestinationPageTitle"><![CDATA[//controll.sh/]]></property>
<property name="destinationSpaceKey"><![CDATA[http]]></property>
<property name="lowerDestinationSpaceKey"><![CDATA[http]]></property>
<property name="sourceContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="creationDate">2021-05-17 16:08:43.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
</property>
<property name="lastModificationDate">2021-05-17 16:08:43.000</property>
</object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434922</id>
<property name="hibernateVersion">23</property>
<property name="title"><![CDATA[Переезд из ГВЦ в ИнЭкс]]></property>
<property name="lowerTitle"><![CDATA[переезд из гвц в инэкс]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466714</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547814</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547815</id>
</element>
</collection>
<property name="version">11</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="creationDate">2021-05-06 14:09:25.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="lastModificationDate">2021-05-06 17:42:16.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434923</id>
<property name="hibernateVersion">25</property>
<property name="title"><![CDATA[Переезд из ГВЦ в ИнЭкс]]></property>
<property name="lowerTitle"><![CDATA[переезд из гвц в инэкс]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466715</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547818</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547819</id>
</element>
</collection>
<property name="version">12</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="creationDate">2021-05-06 14:09:25.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e23601621e6f0864000e]]></id>
</property>
<property name="lastModificationDate">2021-05-07 15:33:05.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79435130</id>
<property name="hibernateVersion">45</property>
<property name="title"><![CDATA[Переезд из ГВЦ в ИнЭкс]]></property>
<property name="lowerTitle"><![CDATA[переезд из гвц в инэкс]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466897</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79548691</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79548692</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79548693</id>
</element>
</collection>
<property name="version">20</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="creationDate">2021-05-06 14:09:25.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-05-11 16:44:03.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79435128</id>
<property name="hibernateVersion">43</property>
<property name="title"><![CDATA[Переезд из ГВЦ в ИнЭкс]]></property>
<property name="lowerTitle"><![CDATA[переезд из гвц в инэкс]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466895</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79548687</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79548688</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79548689</id>
</element>
</collection>
<property name="version">19</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="creationDate">2021-05-06 14:09:25.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-05-11 16:38:08.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545395</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[recently-updated,tip,contributors]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79435125</id>
<property name="hibernateVersion">39</property>
<property name="title"><![CDATA[Переезд из ГВЦ в ИнЭкс]]></property>
<property name="lowerTitle"><![CDATA[переезд из гвц в инэкс]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466892</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79548681</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79548682</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79548683</id>
</element>
</collection>
<property name="version">18</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="creationDate">2021-05-06 14:09:25.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="lastModificationDate">2021-05-11 10:34:50.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545403</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">1</property>
<property name="dateValue"/></object>
<object class="Attachment" package="com.atlassian.confluence.pages">
<id name="id">79434775</id>
<property name="hibernateVersion">1</property>
<property name="title"><![CDATA[image2021-5-6_14-54-2.png]]></property>
<property name="lowerTitle"><![CDATA[image2021-5-6_14-54-2.png]]></property>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547333</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547334</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547335</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547336</id>
</element>
</collection>
<property name="version">1</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="creationDate">2021-05-06 14:53:28.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="lastModificationDate">2021-05-06 14:53:28.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="containerContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<collection name="imageDetailsDTO" class="java.util.Set"></collection>
</object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545408</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="Attachment" package="com.atlassian.confluence.pages">
<id name="id">79434773</id>
<property name="hibernateVersion">1</property>
<property name="title"><![CDATA[image2021-5-6_14-51-39.png]]></property>
<property name="lowerTitle"><![CDATA[image2021-5-6_14-51-39.png]]></property>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547325</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547326</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547327</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547328</id>
</element>
</collection>
<property name="version">1</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="creationDate">2021-05-06 14:51:06.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="lastModificationDate">2021-05-06 14:51:06.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="containerContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<collection name="imageDetailsDTO" class="java.util.Set"></collection>
</object>
<object class="Attachment" package="com.atlassian.confluence.pages">
<id name="id">79434770</id>
<property name="hibernateVersion">1</property>
<property name="title"><![CDATA[image2021-5-6_14-50-7.png]]></property>
<property name="lowerTitle"><![CDATA[image2021-5-6_14-50-7.png]]></property>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547313</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547314</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547315</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547316</id>
</element>
</collection>
<property name="version">1</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="creationDate">2021-05-06 14:49:34.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="lastModificationDate">2021-05-06 14:49:34.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="containerContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<collection name="imageDetailsDTO" class="java.util.Set"></collection>
</object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545370</id>
<property name="name"><![CDATA[macro-count.recently-updated]]></property>
<property name="stringValue"><![CDATA[2-1]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545371</id>
<property name="name"><![CDATA[macro-count.tip]]></property>
<property name="stringValue"><![CDATA[2-1]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79435628</id>
<property name="hibernateVersion">51</property>
<property name="title"><![CDATA[Переезд из ГВЦ в ИнЭкс]]></property>
<property name="lowerTitle"><![CDATA[переезд из гвц в инэкс]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79467333</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79550449</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79550450</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79550451</id>
</element>
</collection>
<property name="version">23</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="creationDate">2021-05-06 14:09:25.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="lastModificationDate">2021-05-14 18:03:49.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466112</id>
<property name="body"><![CDATA[<p>продуктив и ci в кластере MWK</p><h3><br />сайты:</h3><ol><li>продуктив&nbsp;<a href="https://osjd.org">https://osjd.org</a></li><li>на время переезда - продуктив&nbsp;<a href="https://osjd.oooinex.ru">https://osjd.oooinex.ru</a></li><li>ci&nbsp;<a href="https://osjd.odev.oooinex.ru">https://osjd.odev.oooinex.ru</a><br /><br /></li></ol><h3>базы данных:</h3><ol><li>продуктив: 172.22.2.240:5435</li><li><p>CI: 172.22.2.228:ХХХХ</p></li><li><p>Локальный ПТК: LOCALHOST:30000</p><p><br /></p></li></ol>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434229</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="ConfluenceUserImpl" package="com.atlassian.confluence.user">
<id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
<property name="name"><![CDATA[snake]]></property>
<property name="lowerName"><![CDATA[snake]]></property>
</object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545372</id>
<property name="name"><![CDATA[macro-count.contributors]]></property>
<property name="stringValue"><![CDATA[2-1]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545373</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">2</property>
<property name="dateValue"/></object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434816</id>
<property name="hibernateVersion">17</property>
<property name="title"><![CDATA[Переезд из ГВЦ в ИнЭкс]]></property>
<property name="lowerTitle"><![CDATA[переезд из гвц в инэкс]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466614</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547435</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547436</id>
</element>
</collection>
<property name="version">8</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="creationDate">2021-05-06 14:09:25.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
<property name="lastModificationDate">2021-05-06 16:35:56.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434817</id>
<property name="hibernateVersion">19</property>
<property name="title"><![CDATA[Переезд из ГВЦ в ИнЭкс]]></property>
<property name="lowerTitle"><![CDATA[переезд из гвц в инэкс]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466615</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547439</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547440</id>
</element>
</collection>
<property name="version">9</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="creationDate">2021-05-06 14:09:25.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="lastModificationDate">2021-05-06 17:02:00.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="ConfluenceUserImpl" package="com.atlassian.confluence.user">
<id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
<property name="name"><![CDATA[wiki-writer]]></property>
<property name="lowerName"><![CDATA[wiki-writer]]></property>
</object>
<object class="SpaceDescription" package="com.atlassian.confluence.spaces">
<id name="id">79434218</id>
<property name="hibernateVersion">2</property>
<property name="title"/><property name="lowerTitle"/><collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466102</id>
</element>
</collection>
<property name="version">1</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:13:35.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:23:21.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="contentStatus"><![CDATA[current]]></property>
<collection name="attachments" class="java.util.Collection"><element class="Attachment" package="com.atlassian.confluence.pages"><id name="id">79434223</id>
</element>
</collection>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
</object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466103</id>
<property name="body"><![CDATA[<ac:layout><ac:layout-section ac:type="single"><ac:layout-cell><p>пространство, посвященное размещению проекта ОСЖД на ресурсах ИНЭКС-а</p><ac:structured-macro ac:name="tip" ac:schema-version="1" ac:macro-id="10ee33d0-bba0-4e75-b9d6-e0fb053f18bd"><ac:parameter ac:name="title">Welcome to your new space!</ac:parameter><ac:rich-text-body><p>Confluence spaces are great for sharing content and news with your team. This is your home page. Right now it shows recent space activity, but you can customize this page in any way you like.</p></ac:rich-text-body></ac:structured-macro><h2>Complete these tasks to get started</h2><ac:task-list>
<ac:task>
<ac:task-id>85</ac:task-id>
<ac:task-status>complete</ac:task-status>
<ac:task-body><strong>Edit this home page</strong> - Click <em>Edit</em> in the top right of this screen to customize your Space home page</ac:task-body>
</ac:task>
<ac:task>
<ac:task-id>86</ac:task-id>
<ac:task-status>incomplete</ac:task-status>
<ac:task-body><strong>Create your first page</strong> - Click the <em>Create</em> button in the header to get started</ac:task-body>
</ac:task>
<ac:task>
<ac:task-id>87</ac:task-id>
<ac:task-status>complete</ac:task-status>
<ac:task-body><strong>Brand your Space</strong> - Click <em>Configure Sidebar</em> in the left panel to update space details and logo</ac:task-body>
</ac:task>
<ac:task>
<ac:task-id>88</ac:task-id>
<ac:task-status>incomplete</ac:task-status>
<ac:task-body><strong>Set permissions</strong> - Click <em>Space Tools</em> in the left sidebar to update permissions and give others access</ac:task-body>
</ac:task>
</ac:task-list><p><br /></p></ac:layout-cell></ac:layout-section><ac:layout-section ac:type="two_equal"><ac:layout-cell><h2>Recent space activity</h2><p><ac:structured-macro ac:name="recently-updated" ac:schema-version="1" ac:macro-id="5ca60316-5fc8-4cc3-84c3-64d9c9eef976"><ac:parameter ac:name="types">page, comment, blogpost</ac:parameter><ac:parameter ac:name="max">5</ac:parameter><ac:parameter ac:name="hideHeading">true</ac:parameter><ac:parameter ac:name="theme">social</ac:parameter></ac:structured-macro></p></ac:layout-cell><ac:layout-cell><h2>Space contributors</h2><p><ac:structured-macro ac:name="contributors" ac:schema-version="1" ac:macro-id="b620d485-cecc-4e34-b777-beba7b9e56f0"><ac:parameter ac:name="mode">list</ac:parameter><ac:parameter ac:name="scope">descendants</ac:parameter><ac:parameter ac:name="limit">5</ac:parameter><ac:parameter ac:name="showLastTime">true</ac:parameter><ac:parameter ac:name="order">update</ac:parameter></ac:structured-macro></p></ac:layout-cell></ac:layout-section><ac:layout-section ac:type="single"><ac:layout-cell><p><br /></p></ac:layout-cell></ac:layout-section></ac:layout>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434219</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="ConfluenceUserImpl" package="com.atlassian.confluence.user">
<id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee60003]]></id>
<property name="name"><![CDATA[vpopov]]></property>
<property name="lowerName"><![CDATA[vpopov]]></property>
</object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434824</id>
<property name="hibernateVersion">21</property>
<property name="title"><![CDATA[Переезд из ГВЦ в ИнЭкс]]></property>
<property name="lowerTitle"><![CDATA[переезд из гвц в инэкс]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466622</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547458</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547459</id>
</element>
</collection>
<property name="version">10</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="creationDate">2021-05-06 14:09:25.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="lastModificationDate">2021-05-06 17:02:52.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="ReferralLink" package="com.atlassian.confluence.links">
<id name="id">79626574</id>
<property name="viewCount">1</property>
<property name="url"><![CDATA[http://wiki.oooinex.ru/pages/viewpage.action?pageId=79434763]]></property>
<property name="lowerUrl"><![CDATA[http://wiki.oooinex.ru/pages/viewpage.action?pageid=79434763]]></property>
<property name="sourceContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434229</id>
</property>
<property name="creationDate">2021-05-26 12:47:45.000</property>
<property name="lastModificationDate">2021-05-26 12:47:45.000</property>
</object>
<object class="ReferralLink" package="com.atlassian.confluence.links">
<id name="id">79626569</id>
<property name="viewCount">1</property>
<property name="url"><![CDATA[http://wiki.oooinex.ru/dosearchsite.action?queryString=%D0%9E%D0%A1%D0%96%D0%94]]></property>
<property name="lowerUrl"><![CDATA[http://wiki.oooinex.ru/dosearchsite.action?querystring=%d0%9e%d0%a1%d0%96%d0%94]]></property>
<property name="sourceContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="creationDate">2021-05-26 12:44:45.000</property>
<property name="lastModificationDate">2021-05-26 12:44:45.000</property>
</object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434776</id>
<property name="hibernateVersion">13</property>
<property name="title"><![CDATA[Переезд из ГВЦ в ИнЭкс]]></property>
<property name="lowerTitle"><![CDATA[переезд из гвц в инэкс]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466577</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547337</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547338</id>
</element>
</collection>
<property name="version">6</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="creationDate">2021-05-06 14:09:25.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="lastModificationDate">2021-05-06 14:51:10.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434774</id>
<property name="hibernateVersion">11</property>
<property name="title"><![CDATA[Переезд из ГВЦ в ИнЭкс]]></property>
<property name="lowerTitle"><![CDATA[переезд из гвц в инэкс]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466576</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547329</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547330</id>
</element>
</collection>
<property name="version">5</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="creationDate">2021-05-06 14:09:25.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b363d970d50166a4e132b40014]]></id>
</property>
<property name="lastModificationDate">2021-05-06 14:50:24.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="ReferralLink" package="com.atlassian.confluence.links">
<id name="id">79626572</id>
<property name="viewCount">1</property>
<property name="url"><![CDATA[http://wiki.oooinex.ru/pages/viewpage.action?pageId=79434763]]></property>
<property name="lowerUrl"><![CDATA[http://wiki.oooinex.ru/pages/viewpage.action?pageid=79434763]]></property>
<property name="sourceContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434219</id>
</property>
<property name="creationDate">2021-05-26 12:45:45.000</property>
<property name="lastModificationDate">2021-05-26 12:45:45.000</property>
</object>
<object class="ReferralLink" package="com.atlassian.confluence.links">
<id name="id">79626571</id>
<property name="viewCount">2</property>
<property name="url"><![CDATA[http://wiki.oooinex.ru/pages/viewpage.action?pageId=79434229]]></property>
<property name="lowerUrl"><![CDATA[http://wiki.oooinex.ru/pages/viewpage.action?pageid=79434229]]></property>
<property name="sourceContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="creationDate">2021-05-26 12:45:45.000</property>
<property name="lastModificationDate">2021-05-26 12:47:45.000</property>
</object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434772</id>
<property name="hibernateVersion">8</property>
<property name="title"><![CDATA[Переезд из ГВЦ в ИнЭкс]]></property>
<property name="lowerTitle"><![CDATA[переезд из гвц в инэкс]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466575</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547322</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547323</id>
</element>
</collection>
<property name="version">4</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="creationDate">2021-05-06 14:09:25.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="lastModificationDate">2021-05-06 14:49:48.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="ReferralLink" package="com.atlassian.confluence.links">
<id name="id">79626570</id>
<property name="viewCount">1</property>
<property name="url"><![CDATA[http://wiki.oooinex.ru/pages/viewpage.action?pageId=79434219]]></property>
<property name="lowerUrl"><![CDATA[http://wiki.oooinex.ru/pages/viewpage.action?pageid=79434219]]></property>
<property name="sourceContent" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434229</id>
</property>
<property name="creationDate">2021-05-26 12:45:45.000</property>
<property name="lastModificationDate">2021-05-26 12:45:45.000</property>
</object>
<object class="Page" package="com.atlassian.confluence.pages">
<id name="id">79434800</id>
<property name="hibernateVersion">15</property>
<property name="title"><![CDATA[Переезд из ГВЦ в ИнЭкс]]></property>
<property name="lowerTitle"><![CDATA[переезд из гвц в инэкс]]></property>
<collection name="bodyContents" class="java.util.Collection"><element class="BodyContent" package="com.atlassian.confluence.core"><id name="id">79466598</id>
</element>
</collection>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547398</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79547399</id>
</element>
</collection>
<property name="version">7</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b371c656850171f43fe24a0000]]></id>
</property>
<property name="creationDate">2021-05-06 14:09:25.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
</property>
<property name="lastModificationDate">2021-05-06 14:53:31.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="originalVersion" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="position"/></object>
<object class="ConfluenceUserImpl" package="com.atlassian.confluence.user">
<id name="key"><![CDATA[2c9682b347d5f5c00147d5f61f15003b]]></id>
<property name="name"><![CDATA[utkin]]></property>
<property name="lowerName"><![CDATA[utkin]]></property>
</object>
<object class="ConfluenceUserImpl" package="com.atlassian.confluence.user">
<id name="key"><![CDATA[2c9682b347d5f5c00147d5f61ee80005]]></id>
<property name="name"><![CDATA[apog]]></property>
<property name="lowerName"><![CDATA[apog]]></property>
</object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466567</id>
<property name="body"><![CDATA[<p>С 26 апреля 2021 года по 30 апреля 2021 года был произведен переезд сайта ОСЖД из ГВЦ в ИнЭкс (а именно в кластер kubernetes группы проектов mwk) в рамках экспедита&nbsp;<a href="https://pirs.wflow.oooinex.ru/issues/DEVOPS-1294">https://pirs.wflow.oooinex.ru/issues/DEVOPS-1294</a></p><h2>Что было сделано:</h2><h3>Со стороны k8s</h3><p>Для повышения стабильности работы кластера был добавлен второй ингресс<br /><span style="color: rgb(35,46,66);">Обновление (скейл) клестера был произведен с помощью kubespray (лежит на боссе в /root/kubespray)</span><br /><span style="color: rgb(35,46,66);">В inventory/prod/inventory.ini добавлен&nbsp;</span>ingress-2 по аналогии с&nbsp;ingress-1<br /><span style="color: rgb(35,46,66);">После чего была запущена команда скейла кластера: ansible-playbook -u root -i inventory/prod/inventory.ini scale.yml -b --diff</span></p><p><span style="color: rgb(35,46,66);"><br /></span></p><p><span style="font-size: 16.0px;font-weight: bold;letter-spacing: 0.0px;">Со стороны LDAP&nbsp;</span></p><p>группы согласно РАД<br /><a href="http://osjd.info">osjd.info</a> Б Доступ к административному интерфейсу сайта &laquo;ОСЖД&raquo;, &laquo;ОСЖД-1&raquo;, а также к управлению составом группы OSJD.Staff<br />OSJD.Staff А Доступ к пользовательскому интерфейсу работы с общими документами для сотрудников ОСЖД<br />osjd EditorsManagers Б Доступ к управлению составом групп <a href="http://osjd.info">osjd.info</a> и OSJD.Staff</p><h5>ЮЗЕРА</h5><p>на продуктиве<br />получили список мемберов осжд-шных групп</p><p>bash-4.3# /opt/IBM/ldap/V6.3/bin/idsldapsearch -D cn=root -w kvp_root_pwd -p 2389 -b cn=ГРУППА,cn=groups,o=rzd &quot;objectclass=*&quot; ibm-allmembers</p><p>составили список уникальных юзеров<br />выгрузили отдельным льдифом каждого</p><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="354608ad-430f-4770-b0c8-0e0b7c401774"><ac:parameter ac:name="title">выгрузка юзеров</ac:parameter><ac:parameter ac:name="collapse">true</ac:parameter><ac:plain-text-body><![CDATA[for i in {"uid=5221","uid=(zorro)","uid=a.kuzmenko","uid=AAGaldin@gmail.com","uid=Abenov_e","uid=AdomaitieneD_LG","uid=ADY2018","uid=AfRA.2014","uid=Agamalova_est","uid=Agamalova_osjd","uid=aizstrauts_osjd","uid=AleksandrB_EVR","uid=Alekseeva_RZD","uid=Alexandrovskaya_rzd","uid=Alexejchuk_UZ","uid=Algimante","uid=Aliev_ktz","uid=Alimzhanova_a","uid=AndreevOgnian","uid=anseongmin","uid=antonevic_osjd","uid=Apostu_CFM","uid=ARFA.09.11.1964","uid=artemjeva_osjd","uid=ArtemjevaO_SAM","uid=artur.stanilko","uid=Aspayeva","uid=Atanasov_NKZI1","uid=austris","uid=Bakhshi_osjd","uid=Balan_CFM","uid=Balniazova_KTZ","uid=Baneviciene_LG","uid=barbascumpa_osjd","uid=Belak_ZSSKCargo","uid=belinskaya_uz","uid=belyaev_rzd","uid=bergfelu","uid=Bernatonis_LG","uid=bezmenskiy_ttk","uid=bite3","uid=bi-weiwei_kzd","uid=Bolotov_RZD","uid=bolsakova_ldz","uid=Bondarev_RZD","uid=Brundziene_LG","uid=Buc_ZSSKCARGO","uid=Budek_OSJD","uid=bugaenkoviktor_TVEMA","uid=Bukauskiene_LTG","uid=Burkov_RZD","uid=Car1","uid=CAUS_CFRMARFA","uid=Cervinka_CDCARGO","uid=Chemerynskyi_UZ","uid=Cherkasau_BC","uid=Chmielewski_axtone","uid=Cholewska_PKP","uid=civilswjtu","uid=Constantinov_OSJD","uid=cruglii_cfm","uid=CsillagN_RCH","uid=d.pranka","uid=D.Tamir","uid=dalius","uid=datacenter_xxs","uid=dekany_zsr","uid=Devenas_LG","uid=DimitarAndreev","uid=Donets_RZD","uid=Dorcakova_ZSSKCargo","uid=Dorochkevich_RZD","uid=Dorofieieva_UZ","uid=Doroshkevich_rzd","uid=DR_GITTA_MAV-START","uid=Dragancnd","uid=DSvash","uid=dumane_LG","uid=dummy","uid=Dveilys_LG","uid=Dybowski_PKP","uid=dziamo","uid=Efremova_rzd","uid=ejoo","uid=ekaterinash1","uid=Elohegyi_MAV","uid=Emelina_rzd","uid=Esimbekova_KZH","uid=Esimova_KTZ","uid=EVR-Liidia","uid=Farkas_RCH","uid=fedorchuk_ua","uid=fillova_ZSSK","uid=Fitin_UZ","uid=fominova","uid=Gajewska_PKP","uid=Galushkin_rzd","uid=Geibovic_LG","uid=Gil_PKP","uid=gjudycki","uid=GolovkoA_EVR","uid=GolovkoAA_ERS","uid=Gorchak_UZ","uid=grazinach_lt","uid=Grecova_ZSSKCargo","uid=GregorL_RCH","uid=Grigorieva_rzd","uid=grimj","uid=grygiel_mib","uid=Gulnara_cteh","uid=Guryanov_rzd","uid=harammin","uid=Hartelova_ZSR","uid=Haynes_HITRAIL","uid=Hlavaty_ZSR","uid=hong-dailing_osjd","uid=Hubieva_KTZ","uid=HUNT_EVR","uid=I.Rusanov_UZ","uid=ignas_lt","uid=Ihnat_ZSSKCargo","uid=Imanzhanova_KTZ","uid=Ineva_NRIC","uid=Iovan_CFR","uid=Israilova_k","uid=Ivanenko_UZ","uid=IVANOVA_NKZI","uid=Ivanova_NKZI1","uid=IvanovaL_LG","uid=Ivashchenko_rzd","uid=Jakubowski_PKP","uid=Janina LG DK TRS","uid=Janyga_pkp","uid=Jasansky_SZDC","uid=jauris_szdc","uid=jbeli","uid=Juhas_MDSR","uid=JUOZASD LG","uid=Juraska_LG","uid=jurczak_PLK","uid=Kabenkov","uid=kadam_PKP","uid=Kaitline","uid=Kaliutchik_BCH","uid=KALLO_MAV-START","uid=Kamshat_kz","uid=kamzolov_yuri","uid=Karzhassov_KZH","uid=Kasa_MAV","uid=kashanau_osjd","uid=Kazak_RZD","uid=Kemeziene_LG","uid=KhalabaRoman","uid=Khrapach.Andrii","uid=KhristolubovTOG","uid=Khudoyrov_OSJD","uid=Khvostik_M_rzd","uid=khvostik_rzd","uid=kiknadzetatiana","uid=Kilibaeva_KTZ","uid=kinderis","uid=kindevy","uid=kirkova_OSJD","uid=KirovaE_RZD","uid=Kiseliene_LG","uid=Kiss_OSJD","uid=Konstantinov_OSJD","uid=Konta_ZSR","uid=Korab_PKP","uid=Kornev_rzd","uid=korniluk","uid=kostikova_rzd","uid=Kostuch_axtone","uid=KotovaZ_BCH","uid=kovalenko_uz","uid=Kovarik_SZDC","uid=Kovyrnov_rzd","uid=kozmava_OSJD","uid=Kraskouski_IV_BLR","uid=krizan.martin@zsr.sk","uid=Krylova_rzd","uid=KTZ_Kovdrya_Valentina","uid=Kussainov_n","uid=Kuszewski_PKP","uid=Kutejnicyn_UZ","uid=Labeckis_LDZ","uid=Lagoda_PKPIC","uid=LaimaK","uid=laivas","uid=lazarenko_rzd","uid=Lee_KORAIL","uid=LepetenokN_RZD","uid=lg_rpss","uid=LG_RPSS_999","uid=Lisitsyn_RZD","uid=lobzik-vova","uid=Lopata_ZSSKCargo","uid=Lotfi_OSJD1","uid=Lubimova_rzd","uid=Lustov_BC","uid=Luzak_ZSSKCargo","uid=Lynnyk_UZ","uid=Majchrzak_PKP","uid=Makinen_VR","uid=Maltseva_rzd","uid=Mamytov_OSJD","uid=Mantell_UIC","uid=MarciulionisT_LG","uid=maslenka","uid=matta.mario","uid=Matta_ZSR","uid=Matyushev_SGtrans","uid=Meder_PKP","uid=Mihalco_Betamont","uid=mihaylova.Svetlana","uid=Mikalauskiene_LG","uid=Minenko_RZD","uid=mir92.2016","uid=Mitkov_nric","uid=Mlodawski_PKP","uid=moe2","uid=mo-yu_osjd","uid=MuratovA_KTZ","uid=mzilenas_lg","uid=n.svecova","uid=Natali_CTM","uid=Navora_UZ","uid=Nazha_UZ","uid=Nekrashevich_e","uid=Nemeth_MAV","uid=Neumar_ZSSKCargo","uid=Nguyen_OSJD1","uid=Niinepuu_OSJD","uid=Nisula_BC","uid=Nosenko_OSJD","uid=Novakova_CDCARGO","uid=O.Smoliy_UZ","uid=oblomov_rzd","uid=oleg_n2","uid=olgash_uz","uid=Olzhabaeva_KTZ","uid=Ovsenev_rzd","uid=ozinkowska_PLK","uid=panov_nric","uid=Pascan_OSJD","uid=paza00","uid=petr.hron_mindop.cr","uid=pevzner_rzd","uid=PingruiZhao_KZD","uid=plaske_plaske","uid=Platnitski_BCH","uid=pll68","uid=Pogrzebski_PKP","uid=PogrzebskiPKP_Intercity","uid=Pohibielko_PKP","uid=Poleshchuk_UZ","uid=prenosil_OLTIS","uid=qbs_xxs","uid=RakhimjonovBR_UTY","uid=Rakhmilevich_rzd","uid=reginaben_LG","uid=Reivytis_LG","uid=Renne_rzd","uid=ressina_rzd","uid=Rogojkina_rzd","uid=Roizina_PLASKE","uid=Rusy_CD","uid=Rychlik_ZSR","uid=rzd_eremina","uid=rzd_grigoreva","uid=rzd_kostikova","uid=rzd_renne","uid=sabadash@uz.gov.ua","uid=safarov_osjd","uid=Samuchovas_LG","uid=sanjaasuren_osjd","uid=Saracuta_CFM","uid=Sargelis_LG","uid=Sawchuk_BC","uid=Sebastian Budek","uid=Sedlakova_ZSSKCargo","uid=seiman_evr","uid=SeitmagambetovaKTZ","uid=sergeeva_rzd","uid=sergeeva1","uid=Serik.Bolysbaev2","uid=Sevastjanova E_lg","uid=Shalabaiev_UZ","uid=ShalyaginD_RZD","uid=ShestakovPA_IEDT","uid=shikhiyev_osjd","uid=shkayumkhodjaev_osjd","uid=Shoja_RAI","uid=Shurganova_AZD","uid=Simakov_BC","uid=Simoiu","uid=SimonL_RCH","uid=SimonneZs_MAV","uid=Sitekova_ZSR","uid=Skobtsov_UZ","uid=Skuratov_SGtrans","uid=Smailov_KTZ","uid=Smoljanova_n","uid=SMSokolov","uid=SokaitisE_LG","uid=solomakha_uz","uid=Somova_UZ","uid=sseverina","uid=Stanimir_UZ","uid=Starynin_LG","uid=Stefanov_NKZI","uid=stelmakh_UZ","uid=stepanenko_rzd","uid=Stern_MAV","uid=Stovba_rzd","uid=Suindikov_k","uid=Sulzenko_ldz","uid=Sutka_ZSR","uid=svetlichny_ttk","uid=Sychrovsky_SZDC","uid=Syzdykov_B.2013","uid=Szabone_MAV","uid=Szadkowski_PKP","uid=Tabakov_rzd","uid=Talanov_rzd","uid=tangvandung_VZD","uid=Tarabrin_TVEMA","uid=Tarasevic_LG","uid=Telebayev_KTZ","uid=TitovaEF_RZD","uid=Toleugaliyev_KTZH","uid=Tomek_SZDC","uid=Tregubov_rzd","uid=tsevegsuren","uid=Tsvetkov_NRIC","uid=tsyganok_uz","uid=TTSIKHELASHVILI_GR","uid=TurzakovaL_ZSSKCargo","uid=Tusupov_KTZ","uid=ubjd","uid=Ugrin_BC","uid=UteshevD_KTZ","uid=vaganovaon","uid=Valba_LG","uid=valenfalk","uid=VancevicieneML_LG","uid=VasileCodreanu","uid=vitalijus.smirnovas","uid=vkacmarcik","uid=VnukovaS_UZ","uid=Vopalecky_OSJD","uid=Voronina_EVR","uid=v-ovsyannikov","uid=Vravec_ZSR1","uid=Vytautas LGDC","uid=Vytpak","uid=wang-lianbin_osjd","uid=Wiechowska_OSJD","uid=wu-yang_osjd","uid=xia-baohe_kzd","uid=XYL_ITCMOR","uid=yanchev_nric","uid=yurkinav2","uid=Zajcevova_Betamont","uid=zanzarah","uid=Zen1971","uid=Zhankabaev_KTZ","uid=Zolboo","uid=zolotnikov_ttk","uid=zubilewicz_plk","uid=Zuk_MI"} ; do /opt/IBM/ldap/V6.3/bin/idsldapsearch -D cn=root -w kvp_root_pwd -p 2389 -b cn=users,o=rzd $i > "${i:4:${#i}}".ldif; done]] ></ac:plain-text-body></ac:structured-macro><p>перенесли к нам</p><p>поколдовали над льдифами<br />sed -i &quot;s/=/: /&quot; *.ldif<br />sed -i '1!b;s/uid: /dn: uid=/' *.ldif</p><p>вручную поменяли названия файлов, где были пробелы</p><p>залили юзеров к нам<br />for f in $(ls -1) ; do /opt/IBM/ldap/V6.3/bin/idsldapadd -p 2389 -D cn=root -w kvp_root_pwd -i /tmp/osjd-users/$f ; done</p><h5>ГРУППЫ</h5><p>формат льдифа для заливки</p><p>dn: cn=OSJD.Staff,cn=groups,o=rzd<br />changetype: modify<br />add: uniquemember<br />uniquemember:uid=Gil_PKP,cn=users,o=rzd<br />uniquemember:uid=Bernatonis_LG,cn=users,o=rzd</p><p>заливка<br />/opt/IBM/ldap/V6.3/bin/idsldapmodify -D cn=root -w kvp_root_pwd -p 2389 -f /tmp/group-osjdstaff.ldif</p><p>проверка заливки<br />/opt/IBM/ldap/V6.3/bin/idsldapsearch -D cn=root -w kvp_root_pwd -p 2389 -b cn=osjd.staff,cn=groups,o=rzd &quot;objectclass=*&quot; ibm-allmembers</p><p>группы osjd EditorsManagers у нас не было</p><p>заведено</p><p>формат льдифа<br />dn: cn=osjd EditorsManagers,cn=groups,o=rzd<br />objectclass: top<br />objectClass: groupofuniquenames<br />cn: osjd EditorsManagers<br />uniqueMember: uid=Budek_OSJD,cn=users,o=rzd<br />uniqueMember: uid=Sebastian Budek,cn=users,o=rzd</p><p>/opt/IBM/ldap/V6.3/bin/idsldapadd -D cn=root -w kvp_root_pwd -p 2389 -f /tmp/group-osjdeditors.ldif</p><p>группа&nbsp;osjd EditorsManagers добавлена подгруппой к&nbsp;EditorsManagers.portlet</p><p><span style="font-size: 16.0px;font-weight: bold;letter-spacing: 0.0px;"><br /></span></p><p><span style="font-size: 16.0px;font-weight: bold;letter-spacing: 0.0px;">Со стороны WebSpherePortal</span></p><p>для прода взят бывший портал альфы, изменены адреса</p><p><a class="w-link" href="http://172.22.2.191/" title="Пройти по ссылке">172.22.2.191</a><span style="color: rgb(35,46,66);">&nbsp;- ps-dmgr</span><br /><a class="w-link" href="http://172.22.2.192/" title="Пройти по ссылке">172.22.2.192</a><span style="color: rgb(35,46,66);">&nbsp;- ps-app01</span><br /><a class="w-link" href="http://172.22.2.193/" title="Пройти по ссылке">172.22.2.193</a><span style="color: rgb(35,46,66);">&nbsp;- ps-app02</span></p><p>для ci как и для всего используется psi</p><p>на ps-dmgr<br />/opt/IBM/WebSphere/AppServer/systemApps/isclite.ear/isclite.war/images<br />iscbanner-mosaic.gif<br /><br />/opt/IBM/WebSphere/ps-dmgr/config/cells/ps-cell/applications/isclite.ear/deployments/isclite/isclite.war/WEB-INF<br />consoleProperties.xml</p><h3>Со стороны БД</h3><h5>поднятие БД</h5><p><span style="color: rgb(35,46,66);">БД прода на 172,22,2,240</span></p><p><span style="color: rgb(35,46,66);">/usr/pgsql-12/bin/pg_ctl initdb -D //var/lib/pgsql/12/data-osjd</span><br /><span style="color: rgb(35,46,66);">cd /var/lib/pgsql/12/data-osjd</span><br /><span style="color: rgb(35,46,66);">в постгрес.конф исправить порт 5435</span><br /><span style="color: rgb(35,46,66);">и адрес прослушивания на '*'</span></p><p>в pg_hba.conf исправлены правила доступа</p><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="0a2d5f50-7c53-4be4-8acc-9a875de18b68"><ac:parameter ac:name="title">pg_hba.conf - кусок</ac:parameter><ac:plain-text-body><![CDATA[TYPE DATABASE USER ADDRESS METHOD
"local" is for Unix domain socket connections only
local all all trust
IPv4 local connections:
host all all samenet password
IPv6 local connections:
host all all ::1/128 md5
Allow replication connections from localhost, by a user with the
replication privilege.
local replication all trust
host replication all samenet password
host replication all ::1/128 md5]] ></ac:plain-text-body></ac:structured-macro><p><br />в /lib/systemd/system создан сервис<br />postgresql-12-osjd.service<br />обратить внимание на<br />Environment=PGDATA=/var/lib/pgsql/12/data-osjd/</p><p>добавлен скрипт снятия эталона по крону каждую ночь</p><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="880497b9-8763-4e84-875f-12697220b752"><ac:parameter ac:name="title">/opt/INEX/scripts/etalon-osjd.sh</ac:parameter><ac:plain-text-body><![CDATA[#!/bin/bash

sudo -u postgres pg_dump -p 5435 -f /home/postgres/main.backup-osjd-$(date +%F) main
sed -i "s/osjd.org/osjd.local.oooinex.ru/g" /home/postgres/main.backup-osjd-$(date +%F)
gzip -c /home/postgres/main.backup-osjd-$(date +%F) > /tmp/osjd.gzip
sshpass -p "ghjuhfvvf" scp /tmp/osjd.gzip inex@172.22.2.51:/mnt/ftp/gvc/.git-shared-storage/osjd/setup/etalon-maindb/dumps/main.backup.gz

]] ></ac:plain-text-body></ac:structured-macro><p><span style="color: rgb(94,108,132);">слияние 5-ти БД в одну</span></p><ul style="list-style-type: square;"><li>acl<ul style="list-style-type: square;"><li>Произведён экспорт данных из БД acl продуктива - права для групп osjd и для InEx<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql</a></li></ul></li></ul></li><li>media<ul style="list-style-type: square;"><li>Написан небольшой скрипт для выкачивания картинок с прода.&nbsp;<a href="https://gitlab.oooinex.ru/osjd/setup/media-export">https://gitlab.oooinex.ru/osjd/setup/media-export</a><ul style="list-style-type: square;"><li>Развернут на 13ой в примонтированном цефе - /mnt/cephfs/osjd/media-export и настроен на прод osjd, запускать через ./run.sh</li><li>На вход нужно подать данные для подключения к БД (в .env файле), где есть таблица cwp_media.resource_metadata с метаданными картинок, которые нужно скачать</li><li>По метаданным строятся урлы до картинок и скачиваются в папку resources внутри контейнера</li><li>Можно смонтировать папку из контейнера сразу в нужную pvc директорию, чтобы картинки сразу появлялись на ПТК</li><li>При повторном запуске, есть возможность пропускать картинки, которые уже скачали (проверяет наличие файла на диске)</li></ul></li><li>Сами метаданные картинок собрали с прода и через поиск битых ссылок по сайту<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple</a></li></ul></li></ul></li><li>content<ul style="list-style-type: square;"><li>Взяли урезанный дамп с продуктива (приходящий эталон)</li><li>Перенесли данные с прода силами Виталия и Святослава (есть чсеты в репозитории osjd/db)<br /><br /></li></ul></li></ul><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="3d1834fc-0a32-4d70-a209-1c73f82cb11a"><ac:parameter ac:name="language">sql</ac:parameter><ac:parameter ac:name="title">Скрипты</ac:parameter><ac:parameter ac:name="collapse">true</ac:parameter><ac:plain-text-body><![CDATA[-- Составляем список таблиц, которые могут содержать файлы.
select 'select '''||t1.table_name||''' as table_name, '||t1.column_name||' as media_id from '||t1.table_schema||'.'||t1.table_name||' where '||t1.column_name||' is not null and (cvpm_id is null or cvpm_id in (68, 67, 51)) union all' 
from information_schema.columns t1, information_schema.columns t2
where t2.table_schema = t1.table_schema
and t2.table_name = t1.table_name
and replace(t2.column_name, '_size', '') = replace(t1.column_name, '_id', '')
and t1.column_name like '%_id'
and t2.column_name like '%_size'
and t1.table_name in (select table_name FROM information_schema.tables t WHERE table_schema = 'cwp' and table_type = 'BASE TABLE')
order by t1.table_name;

-- Получившийся список селектов придется прореживать, т.к. не во всех таблицах есть колонка cvpm_id, из-за чего появится ошибка, 
-- но в этом случае по имени таблицы становится понятно, к какому порталу она относится. Также в последней строке надо удалить union all. 
-- Затем список селектов надо вставить
select media_id||',' from (
-- сюда
) t order by 1;
-- и выполнить в content-db.

-- Результат выполнения надо вставить
select id
from cwp_media.resource_metadata
where id in (SELECT l.resource_id FROM cwp_media.resources_links l WHERE l.vp_id in (68, 67, 51))
or domain_id in (68, 67, 51)
or id in (
-- сюда
)
order by id;
-- и выполнить в media-db. Так получим список айдишников файлов, которые могут относиться к ОСЖД 
(скорее всего, будут лишние файлы, но это лучше, чем недостача).

-- Что касается прочих данных (не файлов), то был составлен список таблиц.
-- Наверно, пока наиболее надежный способ - пройтись по админке и вручную составить
-- список армов, а на его основе - список таблиц. После этого в Бивере генерировать
-- инсерты с обработкой ошибок (on conflict do nothing). Обновлять/удалять данные сложнее, т.к.
-- надо сравнивать с продом. В этот раз делал силами Бивера путем сравнения
-- результатов селекта, например,
SELECT * FROM cwp.app_structure_staticpages WHERE structure_id in (
  select s.id from cwp.cham_structure_main s where s.cvpm_id in (51, 67, 68)
) order by id;
-- на двух птк в WinMerge.
-- Но с таким сравнением текстов статики возникла проблема.
SELECT * FROM cwp.app_staticpages_locale WHERE cvpm_id in (51, 67, 68) order by id;
-- Бивер позволяет показывать результаты в виде таблицы или текста.
-- В первом варианте при копипасте текстов с тегами добавлялись лишние кавычки, что мешало сравнивать.
-- При показе результатов в виде текста кавычки не добавлялись, сравнивать было намного удобнее.
-- Такой способ сравнения - муторный, много механических действий.
-- Если сайт небольшой, то можно рассмотреть другой вариант актуализации данных - изменить скрипт
-- чистки дампа бд при создании эталона, который регулярно приезжает с прода, чтобы отменить удаление
-- данных переносимого портала. Возможный минус - эталон станет слишком большим, и механизм его
-- получения с прода сломается. Ну и временной лаг - надо ждать ночи.

Важно!!! При переносе данных имеет смысл отключать или дропать триггеры, чтобы они не меняли данные (даже для сравнения это удобнее), 
а потом восстанавливать. Т.е. удаляем триггеры, делаем DML, создаем триггеры.
Удаляем/создаем - потому что скрипты на это есть в Бивере на вкладке DDL таблицы.
Можно вообще подготовить скрипт, который будет записывать куда-то состояние всех триггеров таблицы, выключать их,
а потом включать их, чтобы не включить выключенный, если такие вообще есть (в оракле были).]] ></ac:plain-text-body></ac:structured-macro><h3>Со стороны фронта</h3><p>Помимо слоев, используемых в отрисовке страниц, собраны слои и шаблоны для индексации контента</p><p>К АРМам для заполнения таблиц ОСЖД добавлены служебные АРМы (дерево документов, присоединенные к документам файлы и т.д)</p><p>К специфическим скриптам ОСЖД (раскрываемое верхнее меню, слайдер) добавлены общие компоненты (inex-mixins, jqui-datepicker)&nbsp;</p><p>Метаданные АРМов перенесли целиком, дабы ничего не забыть</p><h3>Со стороны nginx и ДНС</h3><p>DNS ведёт на&nbsp;94.159.31.10 (внутри - 172.22.2.251).</p><p>С&nbsp;172.22.2.251 - на&nbsp;172.22.2.95.</p><p>На&nbsp;172.22.2.95 контексты&nbsp;/wps, /admin_css, /admin_js, /js, /fonts, /mccbuilder, /mccenabler, /portal_dojo, /PortalTheme, /searchfeed, /utils и / (строго, без продолжения) ведут на 172.22.2.192 и 172.22.2.193 (для разработческого - на 172.22.2.52), Прочие - в Кубер.</p><h3>Со стороны поиска и индексера</h3><p>-----------------------------------------------------</p><h3>Со стороны установщика</h3><p>Установщик был подготовлен к работе с проектом ОСДЖ (продуктивом osjd.org и ПТК CI osjd.odev.oooinex.ru) следующим образом:</p><ol><li>Добавлены переменные для проекта (там же прописывается состав приложений, доменное имя, ветки, токены и тд) playbooks/vars/<a class="w-link" href="http://osjd.org/" title="Пройти по ссылке">osjd.org</a></li><li>Добавлены настройки самого ансибля для проекта осжд playbooks/inventory/osjd.ini</li><li>Добавлены шаблоны (конфиги nginx и записи в ДНС) для проекта осжд playbooks/files/osjd</li><li>Поправлен скрипт ptk_<a class="w-link" href="http://controll.sh/" title="Пройти по ссылке">controll.sh</a>&nbsp;(чтобы запускался с проектом осжд тоже)</li></ol><h3>Со стороны мониторинга</h3><p>Добавлен график</p><p><a href="https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1">https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1</a></p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-51-39.png" /></ac:image></p><p>В Кибане логи в mwk:</p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-54-2.png" /></ac:image></p><h2>Какие проверки были сделаны:</h2><ol><li>Админка работает, армы нового ПТК открываются, история изменений сохраняется (где имеется)</li><li>Страницы сайта загружаются, есть все картинки, данные (новости, статьи итд)</li><li>Поиск на сайте работает (и индексация изменений)</li><li>Проверка прав в ACL работает (и права acl перенесены)</li><li>Проанализировали сайт на отсутствие битых ссылок (не 200)</li></ol><p><br /></p>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434763</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547305</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">1</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79550122</id>
<property name="name"><![CDATA[macro-count.code]]></property>
<property name="stringValue"><![CDATA[20-4]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547306</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547818</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">11</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79550123</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">20</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547819</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547301</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">0</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547302</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547814</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">10</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547815</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547313</id>
<property name="name"><![CDATA[MEDIA_TYPE]]></property>
<property name="stringValue"><![CDATA[image/png]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547314</id>
<property name="name"><![CDATA[FILESIZE]]></property>
<property name="stringValue"/><property name="longValue">705813</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547315</id>
<property name="name"><![CDATA[MINOR_EDIT]]></property>
<property name="stringValue"/><property name="longValue">1</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79550124</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[code]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547322</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">3</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547323</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79550132</id>
<property name="name"><![CDATA[macro-count.code]]></property>
<property name="stringValue"><![CDATA[21-4]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547316</id>
<property name="name"><![CDATA[HIDDEN]]></property>
<property name="stringValue"/><property name="longValue">0</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547317</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">2</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79550133</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">21</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547318</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79550134</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[code]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79548096</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[code]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547328</id>
<property name="name"><![CDATA[HIDDEN]]></property>
<property name="stringValue"/><property name="longValue">0</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547329</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">4</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547330</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547325</id>
<property name="name"><![CDATA[MEDIA_TYPE]]></property>
<property name="stringValue"><![CDATA[image/png]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79548094</id>
<property name="name"><![CDATA[macro-count.code]]></property>
<property name="stringValue"><![CDATA[16-1]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547326</id>
<property name="name"><![CDATA[FILESIZE]]></property>
<property name="stringValue"/><property name="longValue">260230</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79548095</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">16</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547327</id>
<property name="name"><![CDATA[MINOR_EDIT]]></property>
<property name="stringValue"/><property name="longValue">1</property>
<property name="dateValue"/></object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466776</id>
<property name="body"><![CDATA[<p>С 26 апреля 2021 года по 30 апреля 2021 года был произведен переезд сайта ОСЖД из ГВЦ в ИнЭкс (а именно в кластер kubernetes группы проектов mwk)</p><h2>Что было сделано:</h2><h3>Со стороны k8s</h3><p>Для повышения стабильности работы кластера был добавлен второй ингресс<br /><span style="color: rgb(35,46,66);">Обновление (скейл) клестера был произведен с помощью kubespray (лежит на боссе в /root/kubespray)</span><br /><span style="color: rgb(35,46,66);">В inventory/prod/inventory.ini добавлен&nbsp;</span>ingress-2 по аналогии с&nbsp;ingress-1<br /><span style="color: rgb(35,46,66);">После чего была запущена команда скейла кластера: ansible-playbook -u root -i inventory/prod/inventory.ini scale.yml -b --diff</span></p><h3>Со стороны БД</h3><ul style="list-style-type: square;"><li>acl<ul style="list-style-type: square;"><li>Произведён экспорт данных из БД acl продуктива - права для групп osjd и для InEx<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql</a></li></ul></li></ul></li><li>media<ul style="list-style-type: square;"><li>Написан небольшой скрипт для выкачивания картинок с прода.&nbsp;<a href="https://gitlab.oooinex.ru/osjd/setup/media-export">https://gitlab.oooinex.ru/osjd/setup/media-export</a><ul style="list-style-type: square;"><li>Развернут на 13ой в примонтированном цефе - /mnt/cephfs/osjd/media-export и настроен на прод osjd, запускать через ./run.sh</li><li>На вход нужно подать данные для подключения к БД (в .env файле), где есть таблица cwp_media.resource_metadata с метаданными картинок, которые нужно скачать</li><li>По метаданным строятся урлы до картинок и скачиваются в папку resources внутри контейнера</li><li>Можно смонтировать папку из контейнера сразу в нужную pvc директорию, чтобы картинки сразу появлялись на ПТК</li><li>При повторном запуске, есть возможность пропускать картинки, которые уже скачали (проверяет наличие файла на диске)</li></ul></li><li>Сами метаданные картинок собрали с прода и через поиск битых ссылок по сайту<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple</a></li></ul></li></ul></li><li>content<ul style="list-style-type: square;"><li>Взяли урезанный дамп с продуктива (приходящий эталон)</li><li>Перенесли данные с прода силами Виталия и Святослава (есть чсеты в репозитории osjd/db)</li></ul></li></ul><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="3d1834fc-0a32-4d70-a209-1c73f82cb11a"><ac:parameter ac:name="language">sql</ac:parameter><ac:parameter ac:name="title">Скрипты</ac:parameter><ac:parameter ac:name="collapse">true</ac:parameter><ac:plain-text-body><![CDATA[-- Составляем список таблиц, которые могут содержать файлы.
select 'select '''||t1.table_name||''' as table_name, '||t1.column_name||' as media_id from '||t1.table_schema||'.'||t1.table_name||' where '||t1.column_name||' is not null and (cvpm_id is null or cvpm_id in (68, 67, 51)) union all' 
from information_schema.columns t1, information_schema.columns t2
where t2.table_schema = t1.table_schema
and t2.table_name = t1.table_name
and replace(t2.column_name, '_size', '') = replace(t1.column_name, '_id', '')
and t1.column_name like '%_id'
and t2.column_name like '%_size'
and t1.table_name in (select table_name FROM information_schema.tables t WHERE table_schema = 'cwp' and table_type = 'BASE TABLE')
order by t1.table_name;

-- Получившийся список селектов придется прореживать, т.к. не во всех таблицах есть колонка cvpm_id, из-за чего появится ошибка, 
-- но в этом случае по имени таблицы становится понятно, к какому порталу она относится. Также в последней строке надо удалить union all. 
-- Затем список селектов надо вставить
select media_id||',' from (
-- сюда
) t order by 1;
-- и выполнить в content-db.

-- Результат выполнения надо вставить
select id
from cwp_media.resource_metadata
where id in (SELECT l.resource_id FROM cwp_media.resources_links l WHERE l.vp_id in (68, 67, 51))
or domain_id in (68, 67, 51)
or id in (
-- сюда
)
order by id;
-- и выполнить в media-db. Так получим список айдишников файлов, которые могут относиться к ОСЖД 
(скорее всего, будут лишние файлы, но это лучше, чем недостача).

-- Что касается прочих данных (не файлов), то был составлен список таблиц.
-- Наверно, пока наиболее надежный способ - пройтись по админке и вручную составить
-- список армов, а на его основе - список таблиц. После этого в Бивере генерировать
-- инсерты с обработкой ошибок (on conflict do nothing). Обновлять/удалять данные сложнее, т.к.
-- надо сравнивать с продом. В этот раз делал силами Бивера путем сравнения
-- результатов селекта, например,
SELECT * FROM cwp.app_structure_staticpages WHERE structure_id in (
  select s.id from cwp.cham_structure_main s where s.cvpm_id in (51, 67, 68)
) order by id;
-- на двух птк в WinMerge.
-- Но с таким сравнением текстов статики возникла проблема.
SELECT * FROM cwp.app_staticpages_locale WHERE cvpm_id in (51, 67, 68) order by id;
-- Бивер позволяет показывать результаты в виде таблицы или текста.
-- В первом варианте при копипасте текстов с тегами добавлялись лишние кавычки, что мешало сравнивать.
-- При показе результатов в виде текста кавычки не добавлялись, сравнивать было намного удобнее.
-- Такой способ сравнения - муторный, много механических действий.
-- Если сайт небольшой, то можно рассмотреть другой вариант актуализации данных - изменить скрипт
-- чистки дампа бд при создании эталона, который регулярно приезжает с прода, чтобы отменить удаление
-- данных переносимого портала. Возможный минус - эталон станет слишком большим, и механизм его
-- получения с прода сломается. Ну и временной лаг - надо ждать ночи.

Важно!!! При переносе данных имеет смысл отключать или дропать триггеры, чтобы они не меняли данные (даже для сравнения это удобнее), 
а потом восстанавливать. Т.е. удаляем триггеры, делаем DML, создаем триггеры.
Удаляем/создаем - потому что скрипты на это есть в Бивере на вкладке DDL таблицы.
Можно вообще подготовить скрипт, который будет записывать куда-то состояние всех триггеров таблицы, выключать их,
а потом включать их, чтобы не включить выключенный, если такие вообще есть (в оракле были).

]] ></ac:plain-text-body></ac:structured-macro><p><br /></p><h3>Со стороны фронта</h3><p>Помимо слоев, используемых в отрисовке страниц, собраны слои и шаблоны для индексации контента</p><p>К АРМам для заполнения таблиц ОСЖД добавлены служебные АРМы (дерево документов, присоединенные к документам файлы и т.д)</p><p>К специфическим скриптам ОСЖД (раскрываемое верхнее меню, слайдер) добавлены общие компоненты (inex-mixins, jqui-datepicker)&nbsp;</p><p>Метаданные АРМов перенесли целиком, дабы ничего не забыть</p><h3>Со стороны nginx и ДНС</h3><p>DNS ведёт на&nbsp;94.159.31.10 (внутри - 172.22.2.251).</p><p>С&nbsp;172.22.2.251 - на&nbsp;172.22.2.95.</p><p>На&nbsp;172.22.2.95 контексты&nbsp;/wps, /admin_css, /admin_js, /js, /fonts, /mccbuilder, /mccenabler, /portal_dojo, /PortalTheme, /searchfeed, /utils и / (строго, без продолжения) ведут на 172.22.2.192 и 172.22.2.193 (для разработческого - на 172.22.2.52), Прочие - в Кубер.</p><h3>Со стороны установщика</h3><p>Установщик был подготовлен к работе с проектом ОСДЖ (продуктивом osjd.org и ПТК CI osjd.odev.oooinex.ru) следующим образом:</p><ol><li>Добавлены переменные для проекта (там же прописывается состав приложений, доменное имя, ветки, токены и тд) playbooks/vars/<a class="w-link" href="http://osjd.org/" title="Пройти по ссылке">osjd.org</a></li><li>Добавлены настройки самого ансибля для проекта осжд playbooks/inventory/osjd.ini</li><li>Добавлены шаблоны (конфиги nginx и записи в ДНС) для проекта осжд playbooks/files/osjd</li><li>Поправлен скрипт ptk_<a class="w-link" href="http://controll.sh/" title="Пройти по ссылке">controll.sh</a>&nbsp;(чтобы запускался с проектом осжд тоже)</li></ol><h3>Со стороны мониторинга</h3><p>Добавлен график</p><p><a href="https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1">https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1</a></p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-51-39.png" /></ac:image></p><p>В Кибане логи в mwk:</p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-54-2.png" /></ac:image></p><h2>Какие проверки были сделаны:</h2><ol><li>Админка работает, армы нового ПТК открываются, история изменений сохраняется (где имеется)</li><li>Страницы сайта загружаются, есть все картинки, данные (новости, статьи итд)</li><li>Поиск на сайте работает (и индексация изменений)</li><li>Проверка прав в ACL работает (и права acl перенесены)</li><li>Проанализировали сайт на отсутствие битых ссылок (не 200)</li></ol><p><br /></p>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434996</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79550449</id>
<property name="name"><![CDATA[macro-count.code]]></property>
<property name="stringValue"><![CDATA[22-4]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466738</id>
<property name="body"><![CDATA[<p>С 26 апреля 2021 года по 30 апреля 2021 года был произведен переезд сайта ОСЖД из ГВЦ в ИнЭкс (а именно в кластер kubernetes группы проектов mwk)</p><h2>Что было сделано:</h2><h3>Со стороны k8s</h3><p>Для повышения стабильности работы кластера был добавлен второй ингресс<br /><span style="color: rgb(35,46,66);">Обновление (скейл) клестера был произведен с помощью kubespray (лежит на боссе в /root/kubespray)</span><br /><span style="color: rgb(35,46,66);">В inventory/prod/inventory.ini добавлен&nbsp;</span>ingress-2 по аналогии с&nbsp;ingress-1<br /><span style="color: rgb(35,46,66);">После чего была запущена команда скейла кластера: ansible-playbook -u root -i inventory/prod/inventory.ini scale.yml -b --diff</span></p><h3>Со стороны БД</h3><ul style="list-style-type: square;"><li>acl<ul style="list-style-type: square;"><li>Произведён экспорт данных из БД acl продуктива - права для групп osjd и для InEx<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql</a></li></ul></li></ul></li><li>media<ul style="list-style-type: square;"><li>Написан небольшой скрипт для выкачивания картинок с прода.&nbsp;<a href="https://gitlab.oooinex.ru/osjd/setup/media-export">https://gitlab.oooinex.ru/osjd/setup/media-export</a><ul style="list-style-type: square;"><li>Развернут на 13ой в примонтированном цефе - /mnt/cephfs/osjd/media-export и настроен на прод osjd, запускать через ./run.sh</li><li>На вход нужно подать данные для подключения к БД (в .env файле), где есть таблица cwp_media.resource_metadata с метаданными картинок, которые нужно скачать</li><li>По метаданным строятся урлы до картинок и скачиваются в папку resources внутри контейнера</li><li>Можно смонтировать папку из контейнера сразу в нужную pvc директорию, чтобы картинки сразу появлялись на ПТК</li><li>При повторном запуске, есть возможность пропускать картинки, которые уже скачали (проверяет наличие файла на диске)</li></ul></li><li>Сами метаданные картинок собрали с прода и через поиск битых ссылок по сайту<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple</a></li></ul></li></ul></li><li>content<ul style="list-style-type: square;"><li>Взяли урезанный дамп с продуктива (приходящий эталон)</li><li>Перенесли данные с прода силами Виталия и Святослава (есть чсеты в репозитории osjd/db)</li></ul></li></ul><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="f15611fe-8d22-405e-8fca-42d593b9fb17"><ac:parameter ac:name="language">sql</ac:parameter><ac:parameter ac:name="collapse">true</ac:parameter><ac:plain-text-body><![CDATA[-- Составляем список таблиц, которые могут содержать файлы.
select 'select '''||t1.table_name||''' as table_name, '||t1.column_name||' as media_id from '||t1.table_schema||'.'||t1.table_name||' where '||t1.column_name||' is not null and (cvpm_id is null or cvpm_id in (68, 67, 51)) union all' 
from information_schema.columns t1, information_schema.columns t2
where t2.table_schema = t1.table_schema
and t2.table_name = t1.table_name
and replace(t2.column_name, '_size', '') = replace(t1.column_name, '_id', '')
and t1.column_name like '%_id'
and t2.column_name like '%_size'
and t1.table_name in (select table_name FROM information_schema.tables t WHERE table_schema = 'cwp' and table_type = 'BASE TABLE')
order by t1.table_name;

-- Получившийся список селектов придется прореживать, т.к. не во всех таблицах есть колонка cvpm_id, из-за чего появится ошибка, но в этом случае по имени таблицы становится понятно, к какому порталу она относится. Также в последней строке надо удалить union all. Затем список селектов надо вставить
select media_id||',' from (
-- сюда
) t order by 1;
-- и выполнить в content-db.

-- Результат выполнения надо вставить
select id
from cwp_media.resource_metadata
where id in (SELECT l.resource_id FROM cwp_media.resources_links l WHERE l.vp_id in (68, 67, 51))
or domain_id in (68, 67, 51)
or id in (
-- сюда
)
order by id;
-- и выполнить в media-db. Так получим список айдишников файлов, которые могут относиться к ОСЖД (скорее всего, будут лишние файлы, но это лучше, чем недостача).


]] ></ac:plain-text-body></ac:structured-macro><p><br /></p><h3>Со стороны фронта</h3><p>Помимо слоев, используемых в отрисовке страниц, собраны слои и шаблоны для индексации контента</p><p>К АРМам для заполнения таблиц ОСЖД добавлены служебные АРМы (дерево документов, присоединенные к документам файлы и т.д)</p><p>К специфическим скриптам ОСЖД (раскрываемое верхнее меню, слайдер) добавлены общие компоненты (inex-mixins, jqui-datepicker)&nbsp;</p><p>Метаданные АРМов перенесли целиком, дабы ничего не забыть</p><h3>Со стороны nginx и ДНС</h3><p>DNS ведёт на&nbsp;94.159.31.10 (внутри - 172.22.2.251).</p><p>С&nbsp;172.22.2.251 - на&nbsp;172.22.2.95.</p><p>На&nbsp;172.22.2.95 контексты&nbsp;/wps, /admin_css, /admin_js, /js, /fonts, /mccbuilder, /mccenabler, /portal_dojo, /PortalTheme, /searchfeed, /utils и / (строго, без продолжения) ведут на 172.22.2.192 и 172.22.2.193 (для разработческого - на 172.22.2.52), Прочие - в Кубер.</p><h3>Со стороны установщика</h3><p>Установщик был подготовлен к работе с проектом ОСДЖ (продуктивом osjd.org и ПТК CI osjd.odev.oooinex.ru) следующим образом:</p><ol><li>Добавлены переменные для проекта (там же прописывается состав приложений, доменное имя, ветки, токены и тд) playbooks/vars/<a class="w-link" href="http://osjd.org/" title="Пройти по ссылке">osjd.org</a></li><li>Добавлены настройки самого ансибля для проекта осжд playbooks/inventory/osjd.ini</li><li>Добавлены шаблоны (конфиги nginx и записи в ДНС) для проекта осжд playbooks/files/osjd</li><li>Поправлен скрипт ptk_<a class="w-link" href="http://controll.sh/" title="Пройти по ссылке">controll.sh</a>&nbsp;(чтобы запускался с проектом осжд тоже)</li></ol><h3>Со стороны мониторинга</h3><p>Добавлен график</p><p><a href="https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1">https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1</a></p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-51-39.png" /></ac:image></p><p>В Кибане логи в mwk:</p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-54-2.png" /></ac:image></p><h2>Какие проверки были сделаны:</h2><ol><li>Админка работает, армы нового ПТК открываются, история изменений сохраняется (где имеется)</li><li>Страницы сайта загружаются, есть все картинки, данные (новости, статьи итд)</li><li>Поиск на сайте работает (и индексация изменений)</li><li>Проверка прав в ACL работает (и права acl перенесены)</li><li>Проанализировали сайт на отсутствие битых ссылок (не 200)</li></ol><p><br /></p>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434955</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79550450</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">22</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79550451</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[code]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466740</id>
<property name="body"><![CDATA[<p>С 26 апреля 2021 года по 30 апреля 2021 года был произведен переезд сайта ОСЖД из ГВЦ в ИнЭкс (а именно в кластер kubernetes группы проектов mwk)</p><h2>Что было сделано:</h2><h3>Со стороны k8s</h3><p>Для повышения стабильности работы кластера был добавлен второй ингресс<br /><span style="color: rgb(35,46,66);">Обновление (скейл) клестера был произведен с помощью kubespray (лежит на боссе в /root/kubespray)</span><br /><span style="color: rgb(35,46,66);">В inventory/prod/inventory.ini добавлен&nbsp;</span>ingress-2 по аналогии с&nbsp;ingress-1<br /><span style="color: rgb(35,46,66);">После чего была запущена команда скейла кластера: ansible-playbook -u root -i inventory/prod/inventory.ini scale.yml -b --diff</span></p><h3>Со стороны БД</h3><ul style="list-style-type: square;"><li>acl<ul style="list-style-type: square;"><li>Произведён экспорт данных из БД acl продуктива - права для групп osjd и для InEx<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql</a></li></ul></li></ul></li><li>media<ul style="list-style-type: square;"><li>Написан небольшой скрипт для выкачивания картинок с прода.&nbsp;<a href="https://gitlab.oooinex.ru/osjd/setup/media-export">https://gitlab.oooinex.ru/osjd/setup/media-export</a><ul style="list-style-type: square;"><li>Развернут на 13ой в примонтированном цефе - /mnt/cephfs/osjd/media-export и настроен на прод osjd, запускать через ./run.sh</li><li>На вход нужно подать данные для подключения к БД (в .env файле), где есть таблица cwp_media.resource_metadata с метаданными картинок, которые нужно скачать</li><li>По метаданным строятся урлы до картинок и скачиваются в папку resources внутри контейнера</li><li>Можно смонтировать папку из контейнера сразу в нужную pvc директорию, чтобы картинки сразу появлялись на ПТК</li><li>При повторном запуске, есть возможность пропускать картинки, которые уже скачали (проверяет наличие файла на диске)</li></ul></li><li>Сами метаданные картинок собрали с прода и через поиск битых ссылок по сайту<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple</a></li></ul></li></ul></li><li>content<ul style="list-style-type: square;"><li>Взяли урезанный дамп с продуктива (приходящий эталон)</li><li>Перенесли данные с прода силами Виталия и Святослава (есть чсеты в репозитории osjd/db)</li></ul></li></ul><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="f15611fe-8d22-405e-8fca-42d593b9fb17"><ac:parameter ac:name="language">sql</ac:parameter><ac:parameter ac:name="collapse">true</ac:parameter><ac:plain-text-body><![CDATA[-- Составляем список таблиц, которые могут содержать файлы.
select 'select '''||t1.table_name||''' as table_name, '||t1.column_name||' as media_id from '||t1.table_schema||'.'||t1.table_name||' where '||t1.column_name||' is not null and (cvpm_id is null or cvpm_id in (68, 67, 51)) union all' 
from information_schema.columns t1, information_schema.columns t2
where t2.table_schema = t1.table_schema
and t2.table_name = t1.table_name
and replace(t2.column_name, '_size', '') = replace(t1.column_name, '_id', '')
and t1.column_name like '%_id'
and t2.column_name like '%_size'
and t1.table_name in (select table_name FROM information_schema.tables t WHERE table_schema = 'cwp' and table_type = 'BASE TABLE')
order by t1.table_name;

-- Получившийся список селектов придется прореживать, т.к. не во всех таблицах есть колонка cvpm_id, из-за чего появится ошибка, 
но в этом случае по имени таблицы становится понятно, к какому порталу она относится. Также в последней строке надо удалить union all. 
Затем список селектов надо вставить
select media_id||',' from (
-- сюда
) t order by 1;
-- и выполнить в content-db.

-- Результат выполнения надо вставить
select id
from cwp_media.resource_metadata
where id in (SELECT l.resource_id FROM cwp_media.resources_links l WHERE l.vp_id in (68, 67, 51))
or domain_id in (68, 67, 51)
or id in (
-- сюда
)
order by id;
-- и выполнить в media-db. Так получим список айдишников файлов, которые могут относиться к ОСЖД 
(скорее всего, будут лишние файлы, но это лучше, чем недостача).

/* Что касается прочих данных (не файлов), то был составлен список таблиц.
Наверно, пока наиболее надежный способ - пройтись по админке и вручную составить
список армов, а на его основе - список таблиц. После этого в Бивере генерировать
инсерты с обработкой ошибок (on conflict do nothing). Обновлять/удалять данные сложнее, т.к.
надо сравнивать с продом. В этот раз делал силами Бивера путем сравнения
результатов селекта, например,
*/
SELECT * FROM cwp.app_structure_staticpages WHERE structure_id in (
  select s.id from cwp.cham_structure_main s where s.cvpm_id in (51, 67, 68)
) order by id;
/* на двух птк в WinMerge.
Но с таким сравнением текстов статики возникла проблема.
SELECT * FROM cwp.app_staticpages_locale WHERE cvpm_id in (51, 67, 68) order by id;
Бивер позволяет показывать результаты в виде таблицы или текста.
В первом варианте при копипасте текстов с тегами добавлялись лишние кавычки, что мешало сравнивать.
При показе результатов в виде текста кавычки не добавлялись, сравнивать было намного удобнее.
Такой способ сравнения - муторный, много механических действий.
Если сайт небольшой, то можно рассмотреть другой вариант актуализации данных - изменить скрипт
чистки дампа бд при создании эталона, который регулярно приезжает с прода, чтобы отменить удаление
данных переносимого портала. Возможный минус - эталон станет слишком большим, и механизм его
получения с прода сломается. Ну и временной лаг - надо ждать ночи.
*/



]] ></ac:plain-text-body></ac:structured-macro><p><br /></p><h3>Со стороны фронта</h3><p>Помимо слоев, используемых в отрисовке страниц, собраны слои и шаблоны для индексации контента</p><p>К АРМам для заполнения таблиц ОСЖД добавлены служебные АРМы (дерево документов, присоединенные к документам файлы и т.д)</p><p>К специфическим скриптам ОСЖД (раскрываемое верхнее меню, слайдер) добавлены общие компоненты (inex-mixins, jqui-datepicker)&nbsp;</p><p>Метаданные АРМов перенесли целиком, дабы ничего не забыть</p><h3>Со стороны nginx и ДНС</h3><p>DNS ведёт на&nbsp;94.159.31.10 (внутри - 172.22.2.251).</p><p>С&nbsp;172.22.2.251 - на&nbsp;172.22.2.95.</p><p>На&nbsp;172.22.2.95 контексты&nbsp;/wps, /admin_css, /admin_js, /js, /fonts, /mccbuilder, /mccenabler, /portal_dojo, /PortalTheme, /searchfeed, /utils и / (строго, без продолжения) ведут на 172.22.2.192 и 172.22.2.193 (для разработческого - на 172.22.2.52), Прочие - в Кубер.</p><h3>Со стороны установщика</h3><p>Установщик был подготовлен к работе с проектом ОСДЖ (продуктивом osjd.org и ПТК CI osjd.odev.oooinex.ru) следующим образом:</p><ol><li>Добавлены переменные для проекта (там же прописывается состав приложений, доменное имя, ветки, токены и тд) playbooks/vars/<a class="w-link" href="http://osjd.org/" title="Пройти по ссылке">osjd.org</a></li><li>Добавлены настройки самого ансибля для проекта осжд playbooks/inventory/osjd.ini</li><li>Добавлены шаблоны (конфиги nginx и записи в ДНС) для проекта осжд playbooks/files/osjd</li><li>Поправлен скрипт ptk_<a class="w-link" href="http://controll.sh/" title="Пройти по ссылке">controll.sh</a>&nbsp;(чтобы запускался с проектом осжд тоже)</li></ol><h3>Со стороны мониторинга</h3><p>Добавлен график</p><p><a href="https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1">https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1</a></p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-51-39.png" /></ac:image></p><p>В Кибане логи в mwk:</p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-54-2.png" /></ac:image></p><h2>Какие проверки были сделаны:</h2><ol><li>Админка работает, армы нового ПТК открываются, история изменений сохраняется (где имеется)</li><li>Страницы сайта загружаются, есть все картинки, данные (новости, статьи итд)</li><li>Поиск на сайте работает (и индексация изменений)</li><li>Проверка прав в ACL работает (и права acl перенесены)</li><li>Проанализировали сайт на отсутствие битых ссылок (не 200)</li></ol><p><br /></p>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434957</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466742</id>
<property name="body"><![CDATA[<p>С 26 апреля 2021 года по 30 апреля 2021 года был произведен переезд сайта ОСЖД из ГВЦ в ИнЭкс (а именно в кластер kubernetes группы проектов mwk)</p><h2>Что было сделано:</h2><h3>Со стороны k8s</h3><p>Для повышения стабильности работы кластера был добавлен второй ингресс<br /><span style="color: rgb(35,46,66);">Обновление (скейл) клестера был произведен с помощью kubespray (лежит на боссе в /root/kubespray)</span><br /><span style="color: rgb(35,46,66);">В inventory/prod/inventory.ini добавлен&nbsp;</span>ingress-2 по аналогии с&nbsp;ingress-1<br /><span style="color: rgb(35,46,66);">После чего была запущена команда скейла кластера: ansible-playbook -u root -i inventory/prod/inventory.ini scale.yml -b --diff</span></p><h3>Со стороны БД</h3><ul style="list-style-type: square;"><li>acl<ul style="list-style-type: square;"><li>Произведён экспорт данных из БД acl продуктива - права для групп osjd и для InEx<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql</a></li></ul></li></ul></li><li>media<ul style="list-style-type: square;"><li>Написан небольшой скрипт для выкачивания картинок с прода.&nbsp;<a href="https://gitlab.oooinex.ru/osjd/setup/media-export">https://gitlab.oooinex.ru/osjd/setup/media-export</a><ul style="list-style-type: square;"><li>Развернут на 13ой в примонтированном цефе - /mnt/cephfs/osjd/media-export и настроен на прод osjd, запускать через ./run.sh</li><li>На вход нужно подать данные для подключения к БД (в .env файле), где есть таблица cwp_media.resource_metadata с метаданными картинок, которые нужно скачать</li><li>По метаданным строятся урлы до картинок и скачиваются в папку resources внутри контейнера</li><li>Можно смонтировать папку из контейнера сразу в нужную pvc директорию, чтобы картинки сразу появлялись на ПТК</li><li>При повторном запуске, есть возможность пропускать картинки, которые уже скачали (проверяет наличие файла на диске)</li></ul></li><li>Сами метаданные картинок собрали с прода и через поиск битых ссылок по сайту<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple</a></li></ul></li></ul></li><li>content<ul style="list-style-type: square;"><li>Взяли урезанный дамп с продуктива (приходящий эталон)</li><li>Перенесли данные с прода силами Виталия и Святослава (есть чсеты в репозитории osjd/db)</li></ul></li></ul><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="3d1834fc-0a32-4d70-a209-1c73f82cb11a"><ac:parameter ac:name="language">sql</ac:parameter><ac:parameter ac:name="title">Скрипты</ac:parameter><ac:parameter ac:name="collapse">true</ac:parameter><ac:plain-text-body><![CDATA[-- Составляем список таблиц, которые могут содержать файлы.
select 'select '''||t1.table_name||''' as table_name, '||t1.column_name||' as media_id from '||t1.table_schema||'.'||t1.table_name||' where '||t1.column_name||' is not null and (cvpm_id is null or cvpm_id in (68, 67, 51)) union all' 
from information_schema.columns t1, information_schema.columns t2
where t2.table_schema = t1.table_schema
and t2.table_name = t1.table_name
and replace(t2.column_name, '_size', '') = replace(t1.column_name, '_id', '')
and t1.column_name like '%_id'
and t2.column_name like '%_size'
and t1.table_name in (select table_name FROM information_schema.tables t WHERE table_schema = 'cwp' and table_type = 'BASE TABLE')
order by t1.table_name;

-- Получившийся список селектов придется прореживать, т.к. не во всех таблицах есть колонка cvpm_id, из-за чего появится ошибка, 
-- но в этом случае по имени таблицы становится понятно, к какому порталу она относится. Также в последней строке надо удалить union all. 
-- Затем список селектов надо вставить
select media_id||',' from (
-- сюда
) t order by 1;
-- и выполнить в content-db.

-- Результат выполнения надо вставить
select id
from cwp_media.resource_metadata
where id in (SELECT l.resource_id FROM cwp_media.resources_links l WHERE l.vp_id in (68, 67, 51))
or domain_id in (68, 67, 51)
or id in (
-- сюда
)
order by id;
-- и выполнить в media-db. Так получим список айдишников файлов, которые могут относиться к ОСЖД 
(скорее всего, будут лишние файлы, но это лучше, чем недостача).

-- Что касается прочих данных (не файлов), то был составлен список таблиц.
-- Наверно, пока наиболее надежный способ - пройтись по админке и вручную составить
-- список армов, а на его основе - список таблиц. После этого в Бивере генерировать
-- инсерты с обработкой ошибок (on conflict do nothing). Обновлять/удалять данные сложнее, т.к.
-- надо сравнивать с продом. В этот раз делал силами Бивера путем сравнения
-- результатов селекта, например,
SELECT * FROM cwp.app_structure_staticpages WHERE structure_id in (
  select s.id from cwp.cham_structure_main s where s.cvpm_id in (51, 67, 68)
) order by id;
-- на двух птк в WinMerge.
-- Но с таким сравнением текстов статики возникла проблема.
SELECT * FROM cwp.app_staticpages_locale WHERE cvpm_id in (51, 67, 68) order by id;
-- Бивер позволяет показывать результаты в виде таблицы или текста.
-- В первом варианте при копипасте текстов с тегами добавлялись лишние кавычки, что мешало сравнивать.
-- При показе результатов в виде текста кавычки не добавлялись, сравнивать было намного удобнее.
-- Такой способ сравнения - муторный, много механических действий.
-- Если сайт небольшой, то можно рассмотреть другой вариант актуализации данных - изменить скрипт
-- чистки дампа бд при создании эталона, который регулярно приезжает с прода, чтобы отменить удаление
-- данных переносимого портала. Возможный минус - эталон станет слишком большим, и механизм его
-- получения с прода сломается. Ну и временной лаг - надо ждать ночи.




]] ></ac:plain-text-body></ac:structured-macro><p><br /></p><h3>Со стороны фронта</h3><p>Помимо слоев, используемых в отрисовке страниц, собраны слои и шаблоны для индексации контента</p><p>К АРМам для заполнения таблиц ОСЖД добавлены служебные АРМы (дерево документов, присоединенные к документам файлы и т.д)</p><p>К специфическим скриптам ОСЖД (раскрываемое верхнее меню, слайдер) добавлены общие компоненты (inex-mixins, jqui-datepicker)&nbsp;</p><p>Метаданные АРМов перенесли целиком, дабы ничего не забыть</p><h3>Со стороны nginx и ДНС</h3><p>DNS ведёт на&nbsp;94.159.31.10 (внутри - 172.22.2.251).</p><p>С&nbsp;172.22.2.251 - на&nbsp;172.22.2.95.</p><p>На&nbsp;172.22.2.95 контексты&nbsp;/wps, /admin_css, /admin_js, /js, /fonts, /mccbuilder, /mccenabler, /portal_dojo, /PortalTheme, /searchfeed, /utils и / (строго, без продолжения) ведут на 172.22.2.192 и 172.22.2.193 (для разработческого - на 172.22.2.52), Прочие - в Кубер.</p><h3>Со стороны установщика</h3><p>Установщик был подготовлен к работе с проектом ОСДЖ (продуктивом osjd.org и ПТК CI osjd.odev.oooinex.ru) следующим образом:</p><ol><li>Добавлены переменные для проекта (там же прописывается состав приложений, доменное имя, ветки, токены и тд) playbooks/vars/<a class="w-link" href="http://osjd.org/" title="Пройти по ссылке">osjd.org</a></li><li>Добавлены настройки самого ансибля для проекта осжд playbooks/inventory/osjd.ini</li><li>Добавлены шаблоны (конфиги nginx и записи в ДНС) для проекта осжд playbooks/files/osjd</li><li>Поправлен скрипт ptk_<a class="w-link" href="http://controll.sh/" title="Пройти по ссылке">controll.sh</a>&nbsp;(чтобы запускался с проектом осжд тоже)</li></ol><h3>Со стороны мониторинга</h3><p>Добавлен график</p><p><a href="https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1">https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1</a></p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-51-39.png" /></ac:image></p><p>В Кибане логи в mwk:</p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-54-2.png" /></ac:image></p><h2>Какие проверки были сделаны:</h2><ol><li>Админка работает, армы нового ПТК открываются, история изменений сохраняется (где имеется)</li><li>Страницы сайта загружаются, есть все картинки, данные (новости, статьи итд)</li><li>Поиск на сайте работает (и индексация изменений)</li><li>Проверка прав в ACL работает (и права acl перенесены)</li><li>Проанализировали сайт на отсутствие битых ссылок (не 200)</li></ol><p><br /></p>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434959</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79467243</id>
<property name="body"><![CDATA[<p>С 26 апреля 2021 года по 30 апреля 2021 года был произведен переезд сайта ОСЖД из ГВЦ в ИнЭкс (а именно в кластер kubernetes группы проектов mwk)</p><h2>Что было сделано:</h2><h3>Со стороны k8s</h3><p>Для повышения стабильности работы кластера был добавлен второй ингресс<br /><span style="color: rgb(35,46,66);">Обновление (скейл) клестера был произведен с помощью kubespray (лежит на боссе в /root/kubespray)</span><br /><span style="color: rgb(35,46,66);">В inventory/prod/inventory.ini добавлен&nbsp;</span>ingress-2 по аналогии с&nbsp;ingress-1<br /><span style="color: rgb(35,46,66);">После чего была запущена команда скейла кластера: ansible-playbook -u root -i inventory/prod/inventory.ini scale.yml -b --diff</span></p><p><span style="color: rgb(35,46,66);"><br /></span></p><p><span style="font-size: 16.0px;font-weight: bold;letter-spacing: 0.0px;">Со стороны LDAP&nbsp;</span></p><p><br /></p><p>группы согласно РАД<br /><a href="http://osjd.info">osjd.info</a> Б Доступ к административному интерфейсу сайта &laquo;ОСЖД&raquo;, &laquo;ОСЖД-1&raquo;, а также к управлению составом группы OSJD.Staff<br />OSJD.Staff А Доступ к пользовательскому интерфейсу работы с общими документами для сотрудников ОСЖД<br />osjd EditorsManagers Б Доступ к управлению составом групп <a href="http://osjd.info">osjd.info</a> и OSJD.Staff</p><h5>ЮЗЕРА</h5><p>на продуктиве<br />получили список мемберов осжд-шных групп</p><p>bash-4.3# /opt/IBM/ldap/V6.3/bin/idsldapsearch -D cn=root -w kvp_root_pwd -p 2389 -b cn=ГРУППА,cn=groups,o=rzd &quot;objectclass=*&quot; ibm-allmembers</p><p>составили список уникальных юзеров<br />выгрузили отдельным льдифом каждого</p><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="354608ad-430f-4770-b0c8-0e0b7c401774"><ac:parameter ac:name="title">выгрузка юзеров</ac:parameter><ac:parameter ac:name="collapse">true</ac:parameter><ac:plain-text-body><![CDATA[for i in {"uid=5221","uid=(zorro)","uid=a.kuzmenko","uid=AAGaldin@gmail.com","uid=Abenov_e","uid=AdomaitieneD_LG","uid=ADY2018","uid=AfRA.2014","uid=Agamalova_est","uid=Agamalova_osjd","uid=aizstrauts_osjd","uid=AleksandrB_EVR","uid=Alekseeva_RZD","uid=Alexandrovskaya_rzd","uid=Alexejchuk_UZ","uid=Algimante","uid=Aliev_ktz","uid=Alimzhanova_a","uid=AndreevOgnian","uid=anseongmin","uid=antonevic_osjd","uid=Apostu_CFM","uid=ARFA.09.11.1964","uid=artemjeva_osjd","uid=ArtemjevaO_SAM","uid=artur.stanilko","uid=Aspayeva","uid=Atanasov_NKZI1","uid=austris","uid=Bakhshi_osjd","uid=Balan_CFM","uid=Balniazova_KTZ","uid=Baneviciene_LG","uid=barbascumpa_osjd","uid=Belak_ZSSKCargo","uid=belinskaya_uz","uid=belyaev_rzd","uid=bergfelu","uid=Bernatonis_LG","uid=bezmenskiy_ttk","uid=bite3","uid=bi-weiwei_kzd","uid=Bolotov_RZD","uid=bolsakova_ldz","uid=Bondarev_RZD","uid=Brundziene_LG","uid=Buc_ZSSKCARGO","uid=Budek_OSJD","uid=bugaenkoviktor_TVEMA","uid=Bukauskiene_LTG","uid=Burkov_RZD","uid=Car1","uid=CAUS_CFRMARFA","uid=Cervinka_CDCARGO","uid=Chemerynskyi_UZ","uid=Cherkasau_BC","uid=Chmielewski_axtone","uid=Cholewska_PKP","uid=civilswjtu","uid=Constantinov_OSJD","uid=cruglii_cfm","uid=CsillagN_RCH","uid=d.pranka","uid=D.Tamir","uid=dalius","uid=datacenter_xxs","uid=dekany_zsr","uid=Devenas_LG","uid=DimitarAndreev","uid=Donets_RZD","uid=Dorcakova_ZSSKCargo","uid=Dorochkevich_RZD","uid=Dorofieieva_UZ","uid=Doroshkevich_rzd","uid=DR_GITTA_MAV-START","uid=Dragancnd","uid=DSvash","uid=dumane_LG","uid=dummy","uid=Dveilys_LG","uid=Dybowski_PKP","uid=dziamo","uid=Efremova_rzd","uid=ejoo","uid=ekaterinash1","uid=Elohegyi_MAV","uid=Emelina_rzd","uid=Esimbekova_KZH","uid=Esimova_KTZ","uid=EVR-Liidia","uid=Farkas_RCH","uid=fedorchuk_ua","uid=fillova_ZSSK","uid=Fitin_UZ","uid=fominova","uid=Gajewska_PKP","uid=Galushkin_rzd","uid=Geibovic_LG","uid=Gil_PKP","uid=gjudycki","uid=GolovkoA_EVR","uid=GolovkoAA_ERS","uid=Gorchak_UZ","uid=grazinach_lt","uid=Grecova_ZSSKCargo","uid=GregorL_RCH","uid=Grigorieva_rzd","uid=grimj","uid=grygiel_mib","uid=Gulnara_cteh","uid=Guryanov_rzd","uid=harammin","uid=Hartelova_ZSR","uid=Haynes_HITRAIL","uid=Hlavaty_ZSR","uid=hong-dailing_osjd","uid=Hubieva_KTZ","uid=HUNT_EVR","uid=I.Rusanov_UZ","uid=ignas_lt","uid=Ihnat_ZSSKCargo","uid=Imanzhanova_KTZ","uid=Ineva_NRIC","uid=Iovan_CFR","uid=Israilova_k","uid=Ivanenko_UZ","uid=IVANOVA_NKZI","uid=Ivanova_NKZI1","uid=IvanovaL_LG","uid=Ivashchenko_rzd","uid=Jakubowski_PKP","uid=Janina LG DK TRS","uid=Janyga_pkp","uid=Jasansky_SZDC","uid=jauris_szdc","uid=jbeli","uid=Juhas_MDSR","uid=JUOZASD LG","uid=Juraska_LG","uid=jurczak_PLK","uid=Kabenkov","uid=kadam_PKP","uid=Kaitline","uid=Kaliutchik_BCH","uid=KALLO_MAV-START","uid=Kamshat_kz","uid=kamzolov_yuri","uid=Karzhassov_KZH","uid=Kasa_MAV","uid=kashanau_osjd","uid=Kazak_RZD","uid=Kemeziene_LG","uid=KhalabaRoman","uid=Khrapach.Andrii","uid=KhristolubovTOG","uid=Khudoyrov_OSJD","uid=Khvostik_M_rzd","uid=khvostik_rzd","uid=kiknadzetatiana","uid=Kilibaeva_KTZ","uid=kinderis","uid=kindevy","uid=kirkova_OSJD","uid=KirovaE_RZD","uid=Kiseliene_LG","uid=Kiss_OSJD","uid=Konstantinov_OSJD","uid=Konta_ZSR","uid=Korab_PKP","uid=Kornev_rzd","uid=korniluk","uid=kostikova_rzd","uid=Kostuch_axtone","uid=KotovaZ_BCH","uid=kovalenko_uz","uid=Kovarik_SZDC","uid=Kovyrnov_rzd","uid=kozmava_OSJD","uid=Kraskouski_IV_BLR","uid=krizan.martin@zsr.sk","uid=Krylova_rzd","uid=KTZ_Kovdrya_Valentina","uid=Kussainov_n","uid=Kuszewski_PKP","uid=Kutejnicyn_UZ","uid=Labeckis_LDZ","uid=Lagoda_PKPIC","uid=LaimaK","uid=laivas","uid=lazarenko_rzd","uid=Lee_KORAIL","uid=LepetenokN_RZD","uid=lg_rpss","uid=LG_RPSS_999","uid=Lisitsyn_RZD","uid=lobzik-vova","uid=Lopata_ZSSKCargo","uid=Lotfi_OSJD1","uid=Lubimova_rzd","uid=Lustov_BC","uid=Luzak_ZSSKCargo","uid=Lynnyk_UZ","uid=Majchrzak_PKP","uid=Makinen_VR","uid=Maltseva_rzd","uid=Mamytov_OSJD","uid=Mantell_UIC","uid=MarciulionisT_LG","uid=maslenka","uid=matta.mario","uid=Matta_ZSR","uid=Matyushev_SGtrans","uid=Meder_PKP","uid=Mihalco_Betamont","uid=mihaylova.Svetlana","uid=Mikalauskiene_LG","uid=Minenko_RZD","uid=mir92.2016","uid=Mitkov_nric","uid=Mlodawski_PKP","uid=moe2","uid=mo-yu_osjd","uid=MuratovA_KTZ","uid=mzilenas_lg","uid=n.svecova","uid=Natali_CTM","uid=Navora_UZ","uid=Nazha_UZ","uid=Nekrashevich_e","uid=Nemeth_MAV","uid=Neumar_ZSSKCargo","uid=Nguyen_OSJD1","uid=Niinepuu_OSJD","uid=Nisula_BC","uid=Nosenko_OSJD","uid=Novakova_CDCARGO","uid=O.Smoliy_UZ","uid=oblomov_rzd","uid=oleg_n2","uid=olgash_uz","uid=Olzhabaeva_KTZ","uid=Ovsenev_rzd","uid=ozinkowska_PLK","uid=panov_nric","uid=Pascan_OSJD","uid=paza00","uid=petr.hron_mindop.cr","uid=pevzner_rzd","uid=PingruiZhao_KZD","uid=plaske_plaske","uid=Platnitski_BCH","uid=pll68","uid=Pogrzebski_PKP","uid=PogrzebskiPKP_Intercity","uid=Pohibielko_PKP","uid=Poleshchuk_UZ","uid=prenosil_OLTIS","uid=qbs_xxs","uid=RakhimjonovBR_UTY","uid=Rakhmilevich_rzd","uid=reginaben_LG","uid=Reivytis_LG","uid=Renne_rzd","uid=ressina_rzd","uid=Rogojkina_rzd","uid=Roizina_PLASKE","uid=Rusy_CD","uid=Rychlik_ZSR","uid=rzd_eremina","uid=rzd_grigoreva","uid=rzd_kostikova","uid=rzd_renne","uid=sabadash@uz.gov.ua","uid=safarov_osjd","uid=Samuchovas_LG","uid=sanjaasuren_osjd","uid=Saracuta_CFM","uid=Sargelis_LG","uid=Sawchuk_BC","uid=Sebastian Budek","uid=Sedlakova_ZSSKCargo","uid=seiman_evr","uid=SeitmagambetovaKTZ","uid=sergeeva_rzd","uid=sergeeva1","uid=Serik.Bolysbaev2","uid=Sevastjanova E_lg","uid=Shalabaiev_UZ","uid=ShalyaginD_RZD","uid=ShestakovPA_IEDT","uid=shikhiyev_osjd","uid=shkayumkhodjaev_osjd","uid=Shoja_RAI","uid=Shurganova_AZD","uid=Simakov_BC","uid=Simoiu","uid=SimonL_RCH","uid=SimonneZs_MAV","uid=Sitekova_ZSR","uid=Skobtsov_UZ","uid=Skuratov_SGtrans","uid=Smailov_KTZ","uid=Smoljanova_n","uid=SMSokolov","uid=SokaitisE_LG","uid=solomakha_uz","uid=Somova_UZ","uid=sseverina","uid=Stanimir_UZ","uid=Starynin_LG","uid=Stefanov_NKZI","uid=stelmakh_UZ","uid=stepanenko_rzd","uid=Stern_MAV","uid=Stovba_rzd","uid=Suindikov_k","uid=Sulzenko_ldz","uid=Sutka_ZSR","uid=svetlichny_ttk","uid=Sychrovsky_SZDC","uid=Syzdykov_B.2013","uid=Szabone_MAV","uid=Szadkowski_PKP","uid=Tabakov_rzd","uid=Talanov_rzd","uid=tangvandung_VZD","uid=Tarabrin_TVEMA","uid=Tarasevic_LG","uid=Telebayev_KTZ","uid=TitovaEF_RZD","uid=Toleugaliyev_KTZH","uid=Tomek_SZDC","uid=Tregubov_rzd","uid=tsevegsuren","uid=Tsvetkov_NRIC","uid=tsyganok_uz","uid=TTSIKHELASHVILI_GR","uid=TurzakovaL_ZSSKCargo","uid=Tusupov_KTZ","uid=ubjd","uid=Ugrin_BC","uid=UteshevD_KTZ","uid=vaganovaon","uid=Valba_LG","uid=valenfalk","uid=VancevicieneML_LG","uid=VasileCodreanu","uid=vitalijus.smirnovas","uid=vkacmarcik","uid=VnukovaS_UZ","uid=Vopalecky_OSJD","uid=Voronina_EVR","uid=v-ovsyannikov","uid=Vravec_ZSR1","uid=Vytautas LGDC","uid=Vytpak","uid=wang-lianbin_osjd","uid=Wiechowska_OSJD","uid=wu-yang_osjd","uid=xia-baohe_kzd","uid=XYL_ITCMOR","uid=yanchev_nric","uid=yurkinav2","uid=Zajcevova_Betamont","uid=zanzarah","uid=Zen1971","uid=Zhankabaev_KTZ","uid=Zolboo","uid=zolotnikov_ttk","uid=zubilewicz_plk","uid=Zuk_MI"} ; do /opt/IBM/ldap/V6.3/bin/idsldapsearch -D cn=root -w kvp_root_pwd -p 2389 -b cn=users,o=rzd $i > "${i:4:${#i}}".ldif; done]] ></ac:plain-text-body></ac:structured-macro><p><br /></p><p>перенесли к нам</p><p>поколдовали над льдифами<br />sed -i &quot;s/=/: /&quot; *.ldif<br />sed -i '1!b;s/uid: /dn: uid=/' *.ldif</p><p>вручную поменяли названия файлов, где были пробелы</p><p>залили юзеров к нам<br />for f in $(ls -1) ; do /opt/IBM/ldap/V6.3/bin/idsldapadd -p 2389 -D cn=root -w kvp_root_pwd -i /tmp/osjd-users/$f ; done</p><h5>ГРУППЫ</h5><p>формат льдифа для заливки</p><p>dn: cn=OSJD.Staff,cn=groups,o=rzd<br />changetype: modify<br />add: uniquemember<br />uniquemember:uid=Gil_PKP,cn=users,o=rzd<br />uniquemember:uid=Bernatonis_LG,cn=users,o=rzd</p><p>заливка<br />/opt/IBM/ldap/V6.3/bin/idsldapmodify -D cn=root -w kvp_root_pwd -p 2389 -f /tmp/group-osjdstaff.ldif</p><p>проверка заливки<br />/opt/IBM/ldap/V6.3/bin/idsldapsearch -D cn=root -w kvp_root_pwd -p 2389 -b cn=osjd.staff,cn=groups,o=rzd &quot;objectclass=*&quot; ibm-allmembers</p><p>группы osjd EditorsManagers у нас не было</p><p>заведено</p><p>формат льдифа<br />dn: cn=osjd EditorsManagers,cn=groups,o=rzd<br />objectclass: top<br />objectClass: groupofuniquenames<br />cn: osjd EditorsManagers<br />uniqueMember: uid=Budek_OSJD,cn=users,o=rzd<br />uniqueMember: uid=Sebastian Budek,cn=users,o=rzd</p><p>/opt/IBM/ldap/V6.3/bin/idsldapadd -D cn=root -w kvp_root_pwd -p 2389 -f /tmp/group-osjdeditors.ldif</p><p>группа&nbsp;osjd EditorsManagers добавлена подгруппой к&nbsp;EditorsManagers.portlet</p><p><span style="font-size: 16.0px;font-weight: bold;letter-spacing: 0.0px;">Со стороны WebSpherePortal</span></p><p>для прода взят бывший портал альфы, изменены адреса</p><p><a class="w-link" href="http://172.22.2.191/" title="Пройти по ссылке">172.22.2.191</a><span style="color: rgb(35,46,66);">&nbsp;- ps-dmgr</span><br /><a class="w-link" href="http://172.22.2.192/" title="Пройти по ссылке">172.22.2.192</a><span style="color: rgb(35,46,66);">&nbsp;- ps-app01</span><br /><a class="w-link" href="http://172.22.2.193/" title="Пройти по ссылке">172.22.2.193</a><span style="color: rgb(35,46,66);">&nbsp;- ps-app02</span></p><p>для ci как и для всего используется psi</p><p>на ps-dmgr<br />/opt/IBM/WebSphere/AppServer/systemApps/isclite.ear/isclite.war/images<br />iscbanner-mosaic.gif<br /><br />/opt/IBM/WebSphere/ps-dmgr/config/cells/ps-cell/applications/isclite.ear/deployments/isclite/isclite.war/WEB-INF<br />consoleProperties.xml</p><h3>Со стороны БД</h3><h5>поднятие БД</h5><p><span style="color: rgb(35,46,66);">БД прода на 172,22,2,240</span></p><p><span style="color: rgb(35,46,66);">/usr/pgsql-12/bin/pg_ctl initdb -D //var/lib/pgsql/12/data-osjd</span><br /><span style="color: rgb(35,46,66);">cd /var/lib/pgsql/12/data-osjd</span><br /><span style="color: rgb(35,46,66);">в постгрес.конф исправить порт 5435</span><br /><span style="color: rgb(35,46,66);">и адрес прослушивания на '*'</span></p><p>в pg_hba.conf исправлены правила доступа</p><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="0a2d5f50-7c53-4be4-8acc-9a875de18b68"><ac:parameter ac:name="title">pg_hba.conf - кусок</ac:parameter><ac:plain-text-body><![CDATA[TYPE DATABASE USER ADDRESS METHOD
"local" is for Unix domain socket connections only
local all all trust
IPv4 local connections:
host all all samenet password
IPv6 local connections:
host all all ::1/128 md5
Allow replication connections from localhost, by a user with the
replication privilege.
local replication all trust
host replication all samenet password
host replication all ::1/128 md5]] ></ac:plain-text-body></ac:structured-macro><p><br />в /lib/systemd/system создан сервис<br />postgresql-12-osjd.service<br />обратить внимание на<br />Environment=PGDATA=/var/lib/pgsql/12/data-osjd/</p><p>добавлен скрипт снятия эталона по крону каждую ночь</p><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="880497b9-8763-4e84-875f-12697220b752"><ac:parameter ac:name="title">/opt/INEX/scripts/etalon-osjd.sh</ac:parameter><ac:plain-text-body><![CDATA[#!/bin/bash

sudo -u postgres pg_dump -p 5435 -f /home/postgres/main.backup-osjd-$(date +%F) main
sed -i "s/osjd.org/osjd.local.oooinex.ru/g" /home/postgres/main.backup-osjd-$(date +%F)
gzip -c /home/postgres/main.backup-osjd-$(date +%F) > /tmp/osjd.gzip
sshpass -p "ghjuhfvvf" scp /tmp/osjd.gzip inex@172.22.2.51:/mnt/ftp/gvc/.git-shared-storage/osjd/setup/etalon-maindb/dumps/main.backup.gz

]] ></ac:plain-text-body></ac:structured-macro><p><br /></p><h5>слияние 5-ти БД в одну<br /><br /></h5><ul style="list-style-type: square;"><li>acl<ul style="list-style-type: square;"><li>Произведён экспорт данных из БД acl продуктива - права для групп osjd и для InEx<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql</a></li></ul></li></ul></li><li>media<ul style="list-style-type: square;"><li>Написан небольшой скрипт для выкачивания картинок с прода.&nbsp;<a href="https://gitlab.oooinex.ru/osjd/setup/media-export">https://gitlab.oooinex.ru/osjd/setup/media-export</a><ul style="list-style-type: square;"><li>Развернут на 13ой в примонтированном цефе - /mnt/cephfs/osjd/media-export и настроен на прод osjd, запускать через ./run.sh</li><li>На вход нужно подать данные для подключения к БД (в .env файле), где есть таблица cwp_media.resource_metadata с метаданными картинок, которые нужно скачать</li><li>По метаданным строятся урлы до картинок и скачиваются в папку resources внутри контейнера</li><li>Можно смонтировать папку из контейнера сразу в нужную pvc директорию, чтобы картинки сразу появлялись на ПТК</li><li>При повторном запуске, есть возможность пропускать картинки, которые уже скачали (проверяет наличие файла на диске)</li></ul></li><li>Сами метаданные картинок собрали с прода и через поиск битых ссылок по сайту<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple</a></li></ul></li></ul></li><li>content<ul style="list-style-type: square;"><li>Взяли урезанный дамп с продуктива (приходящий эталон)</li><li>Перенесли данные с прода силами Виталия и Святослава (есть чсеты в репозитории osjd/db)<br /><br /></li></ul></li></ul><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="3d1834fc-0a32-4d70-a209-1c73f82cb11a"><ac:parameter ac:name="language">sql</ac:parameter><ac:parameter ac:name="title">Скрипты</ac:parameter><ac:parameter ac:name="collapse">true</ac:parameter><ac:plain-text-body><![CDATA[-- Составляем список таблиц, которые могут содержать файлы.
select 'select '''||t1.table_name||''' as table_name, '||t1.column_name||' as media_id from '||t1.table_schema||'.'||t1.table_name||' where '||t1.column_name||' is not null and (cvpm_id is null or cvpm_id in (68, 67, 51)) union all' 
from information_schema.columns t1, information_schema.columns t2
where t2.table_schema = t1.table_schema
and t2.table_name = t1.table_name
and replace(t2.column_name, '_size', '') = replace(t1.column_name, '_id', '')
and t1.column_name like '%_id'
and t2.column_name like '%_size'
and t1.table_name in (select table_name FROM information_schema.tables t WHERE table_schema = 'cwp' and table_type = 'BASE TABLE')
order by t1.table_name;

-- Получившийся список селектов придется прореживать, т.к. не во всех таблицах есть колонка cvpm_id, из-за чего появится ошибка, 
-- но в этом случае по имени таблицы становится понятно, к какому порталу она относится. Также в последней строке надо удалить union all. 
-- Затем список селектов надо вставить
select media_id||',' from (
-- сюда
) t order by 1;
-- и выполнить в content-db.

-- Результат выполнения надо вставить
select id
from cwp_media.resource_metadata
where id in (SELECT l.resource_id FROM cwp_media.resources_links l WHERE l.vp_id in (68, 67, 51))
or domain_id in (68, 67, 51)
or id in (
-- сюда
)
order by id;
-- и выполнить в media-db. Так получим список айдишников файлов, которые могут относиться к ОСЖД 
(скорее всего, будут лишние файлы, но это лучше, чем недостача).

-- Что касается прочих данных (не файлов), то был составлен список таблиц.
-- Наверно, пока наиболее надежный способ - пройтись по админке и вручную составить
-- список армов, а на его основе - список таблиц. После этого в Бивере генерировать
-- инсерты с обработкой ошибок (on conflict do nothing). Обновлять/удалять данные сложнее, т.к.
-- надо сравнивать с продом. В этот раз делал силами Бивера путем сравнения
-- результатов селекта, например,
SELECT * FROM cwp.app_structure_staticpages WHERE structure_id in (
  select s.id from cwp.cham_structure_main s where s.cvpm_id in (51, 67, 68)
) order by id;
-- на двух птк в WinMerge.
-- Но с таким сравнением текстов статики возникла проблема.
SELECT * FROM cwp.app_staticpages_locale WHERE cvpm_id in (51, 67, 68) order by id;
-- Бивер позволяет показывать результаты в виде таблицы или текста.
-- В первом варианте при копипасте текстов с тегами добавлялись лишние кавычки, что мешало сравнивать.
-- При показе результатов в виде текста кавычки не добавлялись, сравнивать было намного удобнее.
-- Такой способ сравнения - муторный, много механических действий.
-- Если сайт небольшой, то можно рассмотреть другой вариант актуализации данных - изменить скрипт
-- чистки дампа бд при создании эталона, который регулярно приезжает с прода, чтобы отменить удаление
-- данных переносимого портала. Возможный минус - эталон станет слишком большим, и механизм его
-- получения с прода сломается. Ну и временной лаг - надо ждать ночи.

Важно!!! При переносе данных имеет смысл отключать или дропать триггеры, чтобы они не меняли данные (даже для сравнения это удобнее), 
а потом восстанавливать. Т.е. удаляем триггеры, делаем DML, создаем триггеры.
Удаляем/создаем - потому что скрипты на это есть в Бивере на вкладке DDL таблицы.
Можно вообще подготовить скрипт, который будет записывать куда-то состояние всех триггеров таблицы, выключать их,
а потом включать их, чтобы не включить выключенный, если такие вообще есть (в оракле были).]] ></ac:plain-text-body></ac:structured-macro><h3>Со стороны фронта</h3><p>Помимо слоев, используемых в отрисовке страниц, собраны слои и шаблоны для индексации контента</p><p>К АРМам для заполнения таблиц ОСЖД добавлены служебные АРМы (дерево документов, присоединенные к документам файлы и т.д)</p><p>К специфическим скриптам ОСЖД (раскрываемое верхнее меню, слайдер) добавлены общие компоненты (inex-mixins, jqui-datepicker)&nbsp;</p><p>Метаданные АРМов перенесли целиком, дабы ничего не забыть</p><h3>Со стороны nginx и ДНС</h3><p>DNS ведёт на&nbsp;94.159.31.10 (внутри - 172.22.2.251).</p><p>С&nbsp;172.22.2.251 - на&nbsp;172.22.2.95.</p><p>На&nbsp;172.22.2.95 контексты&nbsp;/wps, /admin_css, /admin_js, /js, /fonts, /mccbuilder, /mccenabler, /portal_dojo, /PortalTheme, /searchfeed, /utils и / (строго, без продолжения) ведут на 172.22.2.192 и 172.22.2.193 (для разработческого - на 172.22.2.52), Прочие - в Кубер.</p><h3>Со стороны поиска и индексера</h3><h3>Со стороны установщика</h3><p>Установщик был подготовлен к работе с проектом ОСДЖ (продуктивом osjd.org и ПТК CI osjd.odev.oooinex.ru) следующим образом:</p><ol><li>Добавлены переменные для проекта (там же прописывается состав приложений, доменное имя, ветки, токены и тд) playbooks/vars/<a class="w-link" href="http://osjd.org/" title="Пройти по ссылке">osjd.org</a></li><li>Добавлены настройки самого ансибля для проекта осжд playbooks/inventory/osjd.ini</li><li>Добавлены шаблоны (конфиги nginx и записи в ДНС) для проекта осжд playbooks/files/osjd</li><li>Поправлен скрипт ptk_<a class="w-link" href="http://controll.sh/" title="Пройти по ссылке">controll.sh</a>&nbsp;(чтобы запускался с проектом осжд тоже)</li></ol><h3>Со стороны мониторинга</h3><p>Добавлен график</p><p><a href="https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1">https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1</a></p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-51-39.png" /></ac:image></p><p>В Кибане логи в mwk:</p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-54-2.png" /></ac:image></p><h2>Какие проверки были сделаны:</h2><ol><li>Админка работает, армы нового ПТК открываются, история изменений сохраняется (где имеется)</li><li>Страницы сайта загружаются, есть все картинки, данные (новости, статьи итд)</li><li>Поиск на сайте работает (и индексация изменений)</li><li>Проверка прав в ACL работает (и права acl перенесены)</li><li>Проанализировали сайт на отсутствие битых ссылок (не 200)</li></ol><p><br /></p>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79435532</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79467247</id>
<property name="body"><![CDATA[<p>С 26 апреля 2021 года по 30 апреля 2021 года был произведен переезд сайта ОСЖД из ГВЦ в ИнЭкс (а именно в кластер kubernetes группы проектов mwk)</p><h2>Что было сделано:</h2><h3>Со стороны k8s</h3><p>Для повышения стабильности работы кластера был добавлен второй ингресс<br /><span style="color: rgb(35,46,66);">Обновление (скейл) клестера был произведен с помощью kubespray (лежит на боссе в /root/kubespray)</span><br /><span style="color: rgb(35,46,66);">В inventory/prod/inventory.ini добавлен&nbsp;</span>ingress-2 по аналогии с&nbsp;ingress-1<br /><span style="color: rgb(35,46,66);">После чего была запущена команда скейла кластера: ansible-playbook -u root -i inventory/prod/inventory.ini scale.yml -b --diff</span></p><p><span style="color: rgb(35,46,66);"><br /></span></p><p><span style="font-size: 16.0px;font-weight: bold;letter-spacing: 0.0px;">Со стороны LDAP&nbsp;</span></p><p>группы согласно РАД<br /><a href="http://osjd.info">osjd.info</a> Б Доступ к административному интерфейсу сайта &laquo;ОСЖД&raquo;, &laquo;ОСЖД-1&raquo;, а также к управлению составом группы OSJD.Staff<br />OSJD.Staff А Доступ к пользовательскому интерфейсу работы с общими документами для сотрудников ОСЖД<br />osjd EditorsManagers Б Доступ к управлению составом групп <a href="http://osjd.info">osjd.info</a> и OSJD.Staff</p><h5>ЮЗЕРА</h5><p>на продуктиве<br />получили список мемберов осжд-шных групп</p><p>bash-4.3# /opt/IBM/ldap/V6.3/bin/idsldapsearch -D cn=root -w kvp_root_pwd -p 2389 -b cn=ГРУППА,cn=groups,o=rzd &quot;objectclass=*&quot; ibm-allmembers</p><p>составили список уникальных юзеров<br />выгрузили отдельным льдифом каждого</p><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="354608ad-430f-4770-b0c8-0e0b7c401774"><ac:parameter ac:name="title">выгрузка юзеров</ac:parameter><ac:parameter ac:name="collapse">true</ac:parameter><ac:plain-text-body><![CDATA[for i in {"uid=5221","uid=(zorro)","uid=a.kuzmenko","uid=AAGaldin@gmail.com","uid=Abenov_e","uid=AdomaitieneD_LG","uid=ADY2018","uid=AfRA.2014","uid=Agamalova_est","uid=Agamalova_osjd","uid=aizstrauts_osjd","uid=AleksandrB_EVR","uid=Alekseeva_RZD","uid=Alexandrovskaya_rzd","uid=Alexejchuk_UZ","uid=Algimante","uid=Aliev_ktz","uid=Alimzhanova_a","uid=AndreevOgnian","uid=anseongmin","uid=antonevic_osjd","uid=Apostu_CFM","uid=ARFA.09.11.1964","uid=artemjeva_osjd","uid=ArtemjevaO_SAM","uid=artur.stanilko","uid=Aspayeva","uid=Atanasov_NKZI1","uid=austris","uid=Bakhshi_osjd","uid=Balan_CFM","uid=Balniazova_KTZ","uid=Baneviciene_LG","uid=barbascumpa_osjd","uid=Belak_ZSSKCargo","uid=belinskaya_uz","uid=belyaev_rzd","uid=bergfelu","uid=Bernatonis_LG","uid=bezmenskiy_ttk","uid=bite3","uid=bi-weiwei_kzd","uid=Bolotov_RZD","uid=bolsakova_ldz","uid=Bondarev_RZD","uid=Brundziene_LG","uid=Buc_ZSSKCARGO","uid=Budek_OSJD","uid=bugaenkoviktor_TVEMA","uid=Bukauskiene_LTG","uid=Burkov_RZD","uid=Car1","uid=CAUS_CFRMARFA","uid=Cervinka_CDCARGO","uid=Chemerynskyi_UZ","uid=Cherkasau_BC","uid=Chmielewski_axtone","uid=Cholewska_PKP","uid=civilswjtu","uid=Constantinov_OSJD","uid=cruglii_cfm","uid=CsillagN_RCH","uid=d.pranka","uid=D.Tamir","uid=dalius","uid=datacenter_xxs","uid=dekany_zsr","uid=Devenas_LG","uid=DimitarAndreev","uid=Donets_RZD","uid=Dorcakova_ZSSKCargo","uid=Dorochkevich_RZD","uid=Dorofieieva_UZ","uid=Doroshkevich_rzd","uid=DR_GITTA_MAV-START","uid=Dragancnd","uid=DSvash","uid=dumane_LG","uid=dummy","uid=Dveilys_LG","uid=Dybowski_PKP","uid=dziamo","uid=Efremova_rzd","uid=ejoo","uid=ekaterinash1","uid=Elohegyi_MAV","uid=Emelina_rzd","uid=Esimbekova_KZH","uid=Esimova_KTZ","uid=EVR-Liidia","uid=Farkas_RCH","uid=fedorchuk_ua","uid=fillova_ZSSK","uid=Fitin_UZ","uid=fominova","uid=Gajewska_PKP","uid=Galushkin_rzd","uid=Geibovic_LG","uid=Gil_PKP","uid=gjudycki","uid=GolovkoA_EVR","uid=GolovkoAA_ERS","uid=Gorchak_UZ","uid=grazinach_lt","uid=Grecova_ZSSKCargo","uid=GregorL_RCH","uid=Grigorieva_rzd","uid=grimj","uid=grygiel_mib","uid=Gulnara_cteh","uid=Guryanov_rzd","uid=harammin","uid=Hartelova_ZSR","uid=Haynes_HITRAIL","uid=Hlavaty_ZSR","uid=hong-dailing_osjd","uid=Hubieva_KTZ","uid=HUNT_EVR","uid=I.Rusanov_UZ","uid=ignas_lt","uid=Ihnat_ZSSKCargo","uid=Imanzhanova_KTZ","uid=Ineva_NRIC","uid=Iovan_CFR","uid=Israilova_k","uid=Ivanenko_UZ","uid=IVANOVA_NKZI","uid=Ivanova_NKZI1","uid=IvanovaL_LG","uid=Ivashchenko_rzd","uid=Jakubowski_PKP","uid=Janina LG DK TRS","uid=Janyga_pkp","uid=Jasansky_SZDC","uid=jauris_szdc","uid=jbeli","uid=Juhas_MDSR","uid=JUOZASD LG","uid=Juraska_LG","uid=jurczak_PLK","uid=Kabenkov","uid=kadam_PKP","uid=Kaitline","uid=Kaliutchik_BCH","uid=KALLO_MAV-START","uid=Kamshat_kz","uid=kamzolov_yuri","uid=Karzhassov_KZH","uid=Kasa_MAV","uid=kashanau_osjd","uid=Kazak_RZD","uid=Kemeziene_LG","uid=KhalabaRoman","uid=Khrapach.Andrii","uid=KhristolubovTOG","uid=Khudoyrov_OSJD","uid=Khvostik_M_rzd","uid=khvostik_rzd","uid=kiknadzetatiana","uid=Kilibaeva_KTZ","uid=kinderis","uid=kindevy","uid=kirkova_OSJD","uid=KirovaE_RZD","uid=Kiseliene_LG","uid=Kiss_OSJD","uid=Konstantinov_OSJD","uid=Konta_ZSR","uid=Korab_PKP","uid=Kornev_rzd","uid=korniluk","uid=kostikova_rzd","uid=Kostuch_axtone","uid=KotovaZ_BCH","uid=kovalenko_uz","uid=Kovarik_SZDC","uid=Kovyrnov_rzd","uid=kozmava_OSJD","uid=Kraskouski_IV_BLR","uid=krizan.martin@zsr.sk","uid=Krylova_rzd","uid=KTZ_Kovdrya_Valentina","uid=Kussainov_n","uid=Kuszewski_PKP","uid=Kutejnicyn_UZ","uid=Labeckis_LDZ","uid=Lagoda_PKPIC","uid=LaimaK","uid=laivas","uid=lazarenko_rzd","uid=Lee_KORAIL","uid=LepetenokN_RZD","uid=lg_rpss","uid=LG_RPSS_999","uid=Lisitsyn_RZD","uid=lobzik-vova","uid=Lopata_ZSSKCargo","uid=Lotfi_OSJD1","uid=Lubimova_rzd","uid=Lustov_BC","uid=Luzak_ZSSKCargo","uid=Lynnyk_UZ","uid=Majchrzak_PKP","uid=Makinen_VR","uid=Maltseva_rzd","uid=Mamytov_OSJD","uid=Mantell_UIC","uid=MarciulionisT_LG","uid=maslenka","uid=matta.mario","uid=Matta_ZSR","uid=Matyushev_SGtrans","uid=Meder_PKP","uid=Mihalco_Betamont","uid=mihaylova.Svetlana","uid=Mikalauskiene_LG","uid=Minenko_RZD","uid=mir92.2016","uid=Mitkov_nric","uid=Mlodawski_PKP","uid=moe2","uid=mo-yu_osjd","uid=MuratovA_KTZ","uid=mzilenas_lg","uid=n.svecova","uid=Natali_CTM","uid=Navora_UZ","uid=Nazha_UZ","uid=Nekrashevich_e","uid=Nemeth_MAV","uid=Neumar_ZSSKCargo","uid=Nguyen_OSJD1","uid=Niinepuu_OSJD","uid=Nisula_BC","uid=Nosenko_OSJD","uid=Novakova_CDCARGO","uid=O.Smoliy_UZ","uid=oblomov_rzd","uid=oleg_n2","uid=olgash_uz","uid=Olzhabaeva_KTZ","uid=Ovsenev_rzd","uid=ozinkowska_PLK","uid=panov_nric","uid=Pascan_OSJD","uid=paza00","uid=petr.hron_mindop.cr","uid=pevzner_rzd","uid=PingruiZhao_KZD","uid=plaske_plaske","uid=Platnitski_BCH","uid=pll68","uid=Pogrzebski_PKP","uid=PogrzebskiPKP_Intercity","uid=Pohibielko_PKP","uid=Poleshchuk_UZ","uid=prenosil_OLTIS","uid=qbs_xxs","uid=RakhimjonovBR_UTY","uid=Rakhmilevich_rzd","uid=reginaben_LG","uid=Reivytis_LG","uid=Renne_rzd","uid=ressina_rzd","uid=Rogojkina_rzd","uid=Roizina_PLASKE","uid=Rusy_CD","uid=Rychlik_ZSR","uid=rzd_eremina","uid=rzd_grigoreva","uid=rzd_kostikova","uid=rzd_renne","uid=sabadash@uz.gov.ua","uid=safarov_osjd","uid=Samuchovas_LG","uid=sanjaasuren_osjd","uid=Saracuta_CFM","uid=Sargelis_LG","uid=Sawchuk_BC","uid=Sebastian Budek","uid=Sedlakova_ZSSKCargo","uid=seiman_evr","uid=SeitmagambetovaKTZ","uid=sergeeva_rzd","uid=sergeeva1","uid=Serik.Bolysbaev2","uid=Sevastjanova E_lg","uid=Shalabaiev_UZ","uid=ShalyaginD_RZD","uid=ShestakovPA_IEDT","uid=shikhiyev_osjd","uid=shkayumkhodjaev_osjd","uid=Shoja_RAI","uid=Shurganova_AZD","uid=Simakov_BC","uid=Simoiu","uid=SimonL_RCH","uid=SimonneZs_MAV","uid=Sitekova_ZSR","uid=Skobtsov_UZ","uid=Skuratov_SGtrans","uid=Smailov_KTZ","uid=Smoljanova_n","uid=SMSokolov","uid=SokaitisE_LG","uid=solomakha_uz","uid=Somova_UZ","uid=sseverina","uid=Stanimir_UZ","uid=Starynin_LG","uid=Stefanov_NKZI","uid=stelmakh_UZ","uid=stepanenko_rzd","uid=Stern_MAV","uid=Stovba_rzd","uid=Suindikov_k","uid=Sulzenko_ldz","uid=Sutka_ZSR","uid=svetlichny_ttk","uid=Sychrovsky_SZDC","uid=Syzdykov_B.2013","uid=Szabone_MAV","uid=Szadkowski_PKP","uid=Tabakov_rzd","uid=Talanov_rzd","uid=tangvandung_VZD","uid=Tarabrin_TVEMA","uid=Tarasevic_LG","uid=Telebayev_KTZ","uid=TitovaEF_RZD","uid=Toleugaliyev_KTZH","uid=Tomek_SZDC","uid=Tregubov_rzd","uid=tsevegsuren","uid=Tsvetkov_NRIC","uid=tsyganok_uz","uid=TTSIKHELASHVILI_GR","uid=TurzakovaL_ZSSKCargo","uid=Tusupov_KTZ","uid=ubjd","uid=Ugrin_BC","uid=UteshevD_KTZ","uid=vaganovaon","uid=Valba_LG","uid=valenfalk","uid=VancevicieneML_LG","uid=VasileCodreanu","uid=vitalijus.smirnovas","uid=vkacmarcik","uid=VnukovaS_UZ","uid=Vopalecky_OSJD","uid=Voronina_EVR","uid=v-ovsyannikov","uid=Vravec_ZSR1","uid=Vytautas LGDC","uid=Vytpak","uid=wang-lianbin_osjd","uid=Wiechowska_OSJD","uid=wu-yang_osjd","uid=xia-baohe_kzd","uid=XYL_ITCMOR","uid=yanchev_nric","uid=yurkinav2","uid=Zajcevova_Betamont","uid=zanzarah","uid=Zen1971","uid=Zhankabaev_KTZ","uid=Zolboo","uid=zolotnikov_ttk","uid=zubilewicz_plk","uid=Zuk_MI"} ; do /opt/IBM/ldap/V6.3/bin/idsldapsearch -D cn=root -w kvp_root_pwd -p 2389 -b cn=users,o=rzd $i > "${i:4:${#i}}".ldif; done]] ></ac:plain-text-body></ac:structured-macro><p>перенесли к нам</p><p>поколдовали над льдифами<br />sed -i &quot;s/=/: /&quot; *.ldif<br />sed -i '1!b;s/uid: /dn: uid=/' *.ldif</p><p>вручную поменяли названия файлов, где были пробелы</p><p>залили юзеров к нам<br />for f in $(ls -1) ; do /opt/IBM/ldap/V6.3/bin/idsldapadd -p 2389 -D cn=root -w kvp_root_pwd -i /tmp/osjd-users/$f ; done</p><h5>ГРУППЫ</h5><p>формат льдифа для заливки</p><p>dn: cn=OSJD.Staff,cn=groups,o=rzd<br />changetype: modify<br />add: uniquemember<br />uniquemember:uid=Gil_PKP,cn=users,o=rzd<br />uniquemember:uid=Bernatonis_LG,cn=users,o=rzd</p><p>заливка<br />/opt/IBM/ldap/V6.3/bin/idsldapmodify -D cn=root -w kvp_root_pwd -p 2389 -f /tmp/group-osjdstaff.ldif</p><p>проверка заливки<br />/opt/IBM/ldap/V6.3/bin/idsldapsearch -D cn=root -w kvp_root_pwd -p 2389 -b cn=osjd.staff,cn=groups,o=rzd &quot;objectclass=*&quot; ibm-allmembers</p><p>группы osjd EditorsManagers у нас не было</p><p>заведено</p><p>формат льдифа<br />dn: cn=osjd EditorsManagers,cn=groups,o=rzd<br />objectclass: top<br />objectClass: groupofuniquenames<br />cn: osjd EditorsManagers<br />uniqueMember: uid=Budek_OSJD,cn=users,o=rzd<br />uniqueMember: uid=Sebastian Budek,cn=users,o=rzd</p><p>/opt/IBM/ldap/V6.3/bin/idsldapadd -D cn=root -w kvp_root_pwd -p 2389 -f /tmp/group-osjdeditors.ldif</p><p>группа&nbsp;osjd EditorsManagers добавлена подгруппой к&nbsp;EditorsManagers.portlet</p><p><span style="font-size: 16.0px;font-weight: bold;letter-spacing: 0.0px;"><br /></span></p><p><span style="font-size: 16.0px;font-weight: bold;letter-spacing: 0.0px;">Со стороны WebSpherePortal</span></p><p>для прода взят бывший портал альфы, изменены адреса</p><p><a class="w-link" href="http://172.22.2.191/" title="Пройти по ссылке">172.22.2.191</a><span style="color: rgb(35,46,66);">&nbsp;- ps-dmgr</span><br /><a class="w-link" href="http://172.22.2.192/" title="Пройти по ссылке">172.22.2.192</a><span style="color: rgb(35,46,66);">&nbsp;- ps-app01</span><br /><a class="w-link" href="http://172.22.2.193/" title="Пройти по ссылке">172.22.2.193</a><span style="color: rgb(35,46,66);">&nbsp;- ps-app02</span></p><p>для ci как и для всего используется psi</p><p>на ps-dmgr<br />/opt/IBM/WebSphere/AppServer/systemApps/isclite.ear/isclite.war/images<br />iscbanner-mosaic.gif<br /><br />/opt/IBM/WebSphere/ps-dmgr/config/cells/ps-cell/applications/isclite.ear/deployments/isclite/isclite.war/WEB-INF<br />consoleProperties.xml</p><h3>Со стороны БД</h3><h5>поднятие БД</h5><p><span style="color: rgb(35,46,66);">БД прода на 172,22,2,240</span></p><p><span style="color: rgb(35,46,66);">/usr/pgsql-12/bin/pg_ctl initdb -D //var/lib/pgsql/12/data-osjd</span><br /><span style="color: rgb(35,46,66);">cd /var/lib/pgsql/12/data-osjd</span><br /><span style="color: rgb(35,46,66);">в постгрес.конф исправить порт 5435</span><br /><span style="color: rgb(35,46,66);">и адрес прослушивания на '*'</span></p><p>в pg_hba.conf исправлены правила доступа</p><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="0a2d5f50-7c53-4be4-8acc-9a875de18b68"><ac:parameter ac:name="title">pg_hba.conf - кусок</ac:parameter><ac:plain-text-body><![CDATA[TYPE DATABASE USER ADDRESS METHOD
"local" is for Unix domain socket connections only
local all all trust
IPv4 local connections:
host all all samenet password
IPv6 local connections:
host all all ::1/128 md5
Allow replication connections from localhost, by a user with the
replication privilege.
local replication all trust
host replication all samenet password
host replication all ::1/128 md5]] ></ac:plain-text-body></ac:structured-macro><p><br />в /lib/systemd/system создан сервис<br />postgresql-12-osjd.service<br />обратить внимание на<br />Environment=PGDATA=/var/lib/pgsql/12/data-osjd/</p><p>добавлен скрипт снятия эталона по крону каждую ночь</p><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="880497b9-8763-4e84-875f-12697220b752"><ac:parameter ac:name="title">/opt/INEX/scripts/etalon-osjd.sh</ac:parameter><ac:plain-text-body><![CDATA[#!/bin/bash

sudo -u postgres pg_dump -p 5435 -f /home/postgres/main.backup-osjd-$(date +%F) main
sed -i "s/osjd.org/osjd.local.oooinex.ru/g" /home/postgres/main.backup-osjd-$(date +%F)
gzip -c /home/postgres/main.backup-osjd-$(date +%F) > /tmp/osjd.gzip
sshpass -p "ghjuhfvvf" scp /tmp/osjd.gzip inex@172.22.2.51:/mnt/ftp/gvc/.git-shared-storage/osjd/setup/etalon-maindb/dumps/main.backup.gz

]] ></ac:plain-text-body></ac:structured-macro><p><span style="color: rgb(94,108,132);">слияние 5-ти БД в одну</span></p><ul style="list-style-type: square;"><li>acl<ul style="list-style-type: square;"><li>Произведён экспорт данных из БД acl продуктива - права для групп osjd и для InEx<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql</a></li></ul></li></ul></li><li>media<ul style="list-style-type: square;"><li>Написан небольшой скрипт для выкачивания картинок с прода.&nbsp;<a href="https://gitlab.oooinex.ru/osjd/setup/media-export">https://gitlab.oooinex.ru/osjd/setup/media-export</a><ul style="list-style-type: square;"><li>Развернут на 13ой в примонтированном цефе - /mnt/cephfs/osjd/media-export и настроен на прод osjd, запускать через ./run.sh</li><li>На вход нужно подать данные для подключения к БД (в .env файле), где есть таблица cwp_media.resource_metadata с метаданными картинок, которые нужно скачать</li><li>По метаданным строятся урлы до картинок и скачиваются в папку resources внутри контейнера</li><li>Можно смонтировать папку из контейнера сразу в нужную pvc директорию, чтобы картинки сразу появлялись на ПТК</li><li>При повторном запуске, есть возможность пропускать картинки, которые уже скачали (проверяет наличие файла на диске)</li></ul></li><li>Сами метаданные картинок собрали с прода и через поиск битых ссылок по сайту<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple</a></li></ul></li></ul></li><li>content<ul style="list-style-type: square;"><li>Взяли урезанный дамп с продуктива (приходящий эталон)</li><li>Перенесли данные с прода силами Виталия и Святослава (есть чсеты в репозитории osjd/db)<br /><br /></li></ul></li></ul><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="3d1834fc-0a32-4d70-a209-1c73f82cb11a"><ac:parameter ac:name="language">sql</ac:parameter><ac:parameter ac:name="title">Скрипты</ac:parameter><ac:parameter ac:name="collapse">true</ac:parameter><ac:plain-text-body><![CDATA[-- Составляем список таблиц, которые могут содержать файлы.
select 'select '''||t1.table_name||''' as table_name, '||t1.column_name||' as media_id from '||t1.table_schema||'.'||t1.table_name||' where '||t1.column_name||' is not null and (cvpm_id is null or cvpm_id in (68, 67, 51)) union all' 
from information_schema.columns t1, information_schema.columns t2
where t2.table_schema = t1.table_schema
and t2.table_name = t1.table_name
and replace(t2.column_name, '_size', '') = replace(t1.column_name, '_id', '')
and t1.column_name like '%_id'
and t2.column_name like '%_size'
and t1.table_name in (select table_name FROM information_schema.tables t WHERE table_schema = 'cwp' and table_type = 'BASE TABLE')
order by t1.table_name;

-- Получившийся список селектов придется прореживать, т.к. не во всех таблицах есть колонка cvpm_id, из-за чего появится ошибка, 
-- но в этом случае по имени таблицы становится понятно, к какому порталу она относится. Также в последней строке надо удалить union all. 
-- Затем список селектов надо вставить
select media_id||',' from (
-- сюда
) t order by 1;
-- и выполнить в content-db.

-- Результат выполнения надо вставить
select id
from cwp_media.resource_metadata
where id in (SELECT l.resource_id FROM cwp_media.resources_links l WHERE l.vp_id in (68, 67, 51))
or domain_id in (68, 67, 51)
or id in (
-- сюда
)
order by id;
-- и выполнить в media-db. Так получим список айдишников файлов, которые могут относиться к ОСЖД 
(скорее всего, будут лишние файлы, но это лучше, чем недостача).

-- Что касается прочих данных (не файлов), то был составлен список таблиц.
-- Наверно, пока наиболее надежный способ - пройтись по админке и вручную составить
-- список армов, а на его основе - список таблиц. После этого в Бивере генерировать
-- инсерты с обработкой ошибок (on conflict do nothing). Обновлять/удалять данные сложнее, т.к.
-- надо сравнивать с продом. В этот раз делал силами Бивера путем сравнения
-- результатов селекта, например,
SELECT * FROM cwp.app_structure_staticpages WHERE structure_id in (
  select s.id from cwp.cham_structure_main s where s.cvpm_id in (51, 67, 68)
) order by id;
-- на двух птк в WinMerge.
-- Но с таким сравнением текстов статики возникла проблема.
SELECT * FROM cwp.app_staticpages_locale WHERE cvpm_id in (51, 67, 68) order by id;
-- Бивер позволяет показывать результаты в виде таблицы или текста.
-- В первом варианте при копипасте текстов с тегами добавлялись лишние кавычки, что мешало сравнивать.
-- При показе результатов в виде текста кавычки не добавлялись, сравнивать было намного удобнее.
-- Такой способ сравнения - муторный, много механических действий.
-- Если сайт небольшой, то можно рассмотреть другой вариант актуализации данных - изменить скрипт
-- чистки дампа бд при создании эталона, который регулярно приезжает с прода, чтобы отменить удаление
-- данных переносимого портала. Возможный минус - эталон станет слишком большим, и механизм его
-- получения с прода сломается. Ну и временной лаг - надо ждать ночи.

Важно!!! При переносе данных имеет смысл отключать или дропать триггеры, чтобы они не меняли данные (даже для сравнения это удобнее), 
а потом восстанавливать. Т.е. удаляем триггеры, делаем DML, создаем триггеры.
Удаляем/создаем - потому что скрипты на это есть в Бивере на вкладке DDL таблицы.
Можно вообще подготовить скрипт, который будет записывать куда-то состояние всех триггеров таблицы, выключать их,
а потом включать их, чтобы не включить выключенный, если такие вообще есть (в оракле были).]] ></ac:plain-text-body></ac:structured-macro><h3>Со стороны фронта</h3><p>Помимо слоев, используемых в отрисовке страниц, собраны слои и шаблоны для индексации контента</p><p>К АРМам для заполнения таблиц ОСЖД добавлены служебные АРМы (дерево документов, присоединенные к документам файлы и т.д)</p><p>К специфическим скриптам ОСЖД (раскрываемое верхнее меню, слайдер) добавлены общие компоненты (inex-mixins, jqui-datepicker)&nbsp;</p><p>Метаданные АРМов перенесли целиком, дабы ничего не забыть</p><h3>Со стороны nginx и ДНС</h3><p>DNS ведёт на&nbsp;94.159.31.10 (внутри - 172.22.2.251).</p><p>С&nbsp;172.22.2.251 - на&nbsp;172.22.2.95.</p><p>На&nbsp;172.22.2.95 контексты&nbsp;/wps, /admin_css, /admin_js, /js, /fonts, /mccbuilder, /mccenabler, /portal_dojo, /PortalTheme, /searchfeed, /utils и / (строго, без продолжения) ведут на 172.22.2.192 и 172.22.2.193 (для разработческого - на 172.22.2.52), Прочие - в Кубер.</p><h3>Со стороны поиска и индексера</h3><p>-----------------------------------------------------</p><h3>Со стороны установщика</h3><p>Установщик был подготовлен к работе с проектом ОСДЖ (продуктивом osjd.org и ПТК CI osjd.odev.oooinex.ru) следующим образом:</p><ol><li>Добавлены переменные для проекта (там же прописывается состав приложений, доменное имя, ветки, токены и тд) playbooks/vars/<a class="w-link" href="http://osjd.org/" title="Пройти по ссылке">osjd.org</a></li><li>Добавлены настройки самого ансибля для проекта осжд playbooks/inventory/osjd.ini</li><li>Добавлены шаблоны (конфиги nginx и записи в ДНС) для проекта осжд playbooks/files/osjd</li><li>Поправлен скрипт ptk_<a class="w-link" href="http://controll.sh/" title="Пройти по ссылке">controll.sh</a>&nbsp;(чтобы запускался с проектом осжд тоже)</li></ol><h3>Со стороны мониторинга</h3><p>Добавлен график</p><p><a href="https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1">https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1</a></p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-51-39.png" /></ac:image></p><p>В Кибане логи в mwk:</p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-54-2.png" /></ac:image></p><h2>Какие проверки были сделаны:</h2><ol><li>Админка работает, армы нового ПТК открываются, история изменений сохраняется (где имеется)</li><li>Страницы сайта загружаются, есть все картинки, данные (новости, статьи итд)</li><li>Поиск на сайте работает (и индексация изменений)</li><li>Проверка прав в ACL работает (и права acl перенесены)</li><li>Проанализировали сайт на отсутствие битых ссылок (не 200)</li></ol><p><br /></p>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79435536</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466722</id>
<property name="body"><![CDATA[<p>С 26 апреля 2021 года по 30 апреля 2021 года был произведен переезд сайта ОСЖД из ГВЦ в ИнЭкс (а именно в кластер kubernetes группы проектов mwk)</p><h2>Что было сделано:</h2><h3>Со стороны k8s</h3><p>Для повышения стабильности работы кластера был добавлен второй ингресс<br /><span style="color: rgb(35,46,66);">Обновление (скейл) клестера был произведен с помощью kubespray (лежит на боссе в /root/kubespray)</span><br /><span style="color: rgb(35,46,66);">В inventory/prod/inventory.ini добавлен&nbsp;</span>ingress-2 по аналогии с&nbsp;ingress-1<br /><span style="color: rgb(35,46,66);">После чего была запущена команда скейла кластера: ansible-playbook -u root -i inventory/prod/inventory.ini scale.yml -b --diff</span></p><h3>Со стороны БД</h3><ul style="list-style-type: square;"><li>acl<ul style="list-style-type: square;"><li>Произведён экспорт данных из БД acl продуктива - права для групп osjd и для InEx<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql</a></li></ul></li></ul></li><li>media<ul style="list-style-type: square;"><li>Написан небольшой скрипт для выкачивания картинок с прода.&nbsp;<a href="https://gitlab.oooinex.ru/osjd/setup/media-export">https://gitlab.oooinex.ru/osjd/setup/media-export</a><ul style="list-style-type: square;"><li>Развернут на 13ой в примонтированном цефе - /mnt/cephfs/osjd/media-export и настроен на прод osjd, запускать через ./run.sh</li><li>На вход нужно подать данные для подключения к БД (в .env файле), где есть таблица cwp_media.resource_metadata с метаданными картинок, которые нужно скачать</li><li>По метаданным строятся урлы до картинок и скачиваются в папку resources внутри контейнера</li><li>Можно смонтировать папку из контейнера сразу в нужную pvc директорию, чтобы картинки сразу появлялись на ПТК</li><li>При повторном запуске, есть возможность пропускать картинки, которые уже скачали (проверяет наличие файла на диске)</li></ul></li><li>Сами метаданные картинок собрали с прода и через поиск битых ссылок по сайту<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple</a></li></ul></li></ul></li><li>content<ul style="list-style-type: square;"><li>Взяли урезанный дамп с продуктива (приходящий эталон)</li><li>Перенесли данные с прода силами Виталия и Святослава (есть чсеты в репозитории osjd/db)</li></ul></li></ul><h3>Со стороны фронта</h3><p>Помимо слоев, используемых в отрисовке страниц, собраны слои и шаблоны для индексации контента</p><p>К АРМам для заполнения таблиц ОСЖД добавлены служебные АРМы (дерево документов, присоединенные к документам файлы и т.д)</p><p>К специфическим скриптам ОСЖД (раскрываемое верхнее меню, слайдер) добавлены общие компоненты (inex-mixins, jqui-datepicker)&nbsp;</p><p>Метаданные АРМов перенесли целиком, дабы ничего не забыть</p><h3>Со стороны nginx и ДНС</h3><p>DNS ведёт на&nbsp;94.159.31.10 (внутри - 172.22.2.251).</p><p>С&nbsp;172.22.2.251 - на&nbsp;172.22.2.95.</p><p>На&nbsp;172.22.2.95 контексты&nbsp;/wps, /admin_css, /admin_js, /js, /fonts, /mccbuilder, /mccenabler, /portal_dojo, /PortalTheme, /searchfeed, /utils и / (строго, без продолжения) ведут на 172.22.2.192 и 172.22.2.193 (для разработческого - на 172.22.2.52), Прочие - в Кубер.</p><h3>Со стороны установщика</h3><p>Установщик был подготовлен к работе с проектом ОСДЖ (продуктивом osjd.org и ПТК CI osjd.odev.oooinex.ru) следующим образом:</p><ol><li>Добавлены переменные для проекта (там же прописывается состав приложений, доменное имя, ветки, токены и тд) playbooks/vars/<a class="w-link" href="http://osjd.org/" title="Пройти по ссылке">osjd.org</a></li><li>Добавлены настройки самого ансибля для проекта осжд playbooks/inventory/osjd.ini</li><li>Добавлены шаблоны (конфиги nginx и записи в ДНС) для проекта осжд playbooks/files/osjd</li><li>Поправлен скрипт ptk_<a class="w-link" href="http://controll.sh/" title="Пройти по ссылке">controll.sh</a>&nbsp;(чтобы запускался с проектом осжд тоже)</li></ol><h3>Со стороны мониторинга</h3><p>Добавлен график</p><p><a href="https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1">https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1</a></p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-51-39.png" /></ac:image></p><p>В Кибане логи в mwk:</p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-54-2.png" /></ac:image></p><h2>Какие проверки были сделаны:</h2><ol><li>Админка работает, армы нового ПТК открываются, история изменений сохраняется (где имеется)</li><li>Страницы сайта загружаются, есть все картинки, данные (новости, статьи итд)</li><li>Поиск на сайте работает (и индексация изменений)</li><li>Проверка прав в ACL работает (и права acl перенесены)</li><li>Проанализировали сайт на отсутствие битых ссылок (не 200)</li></ol><p><br /></p>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434934</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547336</id>
<property name="name"><![CDATA[HIDDEN]]></property>
<property name="stringValue"/><property name="longValue">0</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547337</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">5</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547850</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">12</property>
<property name="dateValue"/></object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466714</id>
<property name="body"><![CDATA[<p>С 26 апреля 2021 года по 30 апреля 2021 года был произведен переезд сайта ОСЖД из ГВЦ в ИнЭкс (а именно в кластер kubernetes группы проектов mwk)</p><h2>Что было сделано:</h2><h3>Со стороны k8s</h3><p>Для повышения стабильности работы кластера был добавлен второй ингресс<br /><span style="color: rgb(35,46,66);">Обновление (скейл) клестера был произведен с помощью kubespray (лежит на боссе в /root/kubespray)</span><br /><span style="color: rgb(35,46,66);">В inventory/prod/inventory.ini добавлен&nbsp;</span>ingress-2 по аналогии с&nbsp;ingress-1<br /><span style="color: rgb(35,46,66);">После чего была запущена команда скейла кластера: ansible-playbook -u root -i inventory/prod/inventory.ini scale.yml -b --diff</span></p><h3>Со стороны БД</h3><ul style="list-style-type: square;"><li>acl</li><li>media</li><li>content</li></ul><h3>Со стороны фронта</h3><p>Помимо слоев, используемых в отрисовке страниц, собраны слои и шаблоны для индексации контента</p><p>К АРМам для заполнения таблиц ОСЖД добавлены служебные АРМы (дерево документов, присоединенные к документам файлы и т.д)</p><p>К специфическим скриптам ОСЖД (раскрываемое верхнее меню, слайдер) добавлены общие компоненты (inex-mixins, jqui-datepicker)&nbsp;</p><h3>Со стороны nginx и ДНС</h3><p>DNS ведёт на&nbsp;94.159.31.10 (внутри - 172.22.2.251).</p><p>С&nbsp;172.22.2.251 - на&nbsp;172.22.2.95.</p><p>На&nbsp;172.22.2.95 контексты&nbsp;/wps, /admin_css, /admin_js, /js, /fonts, /mccbuilder, /mccenabler, /portal_dojo, /PortalTheme, /searchfeed, /utils и / (строго, без продолжения) ведут на 172.22.2.192 и 172.22.2.193 (для разработческого - на 172.22.2.52), Прочие - в Кубер.</p><h3>Со стороны установщика</h3><p>Установщик был подготовлен к работе с проектом ОСДЖ (продуктивом osjd.org и ПТК CI osjd.odev.oooinex.ru) следующим образом:</p><ol><li>Добавлены переменные для проекта (там же прописывается состав приложений, доменное имя, ветки, токены и тд) playbooks/vars/<a class="w-link" href="http://osjd.org/" title="Пройти по ссылке">osjd.org</a></li><li>Добавлены настройки самого ансибля для проекта осжд playbooks/inventory/osjd.ini</li><li>Добавлены шаблоны (конфиги nginx и записи в ДНС) для проекта осжд playbooks/files/osjd</li><li>Поправлен скрипт ptk_<a class="w-link" href="http://controll.sh/" title="Пройти по ссылке">controll.sh</a>&nbsp;(чтобы запускался с проектом осжд тоже)</li></ol><h3>Со стороны мониторинга</h3><p>Добавлен график</p><p><a href="https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1">https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1</a></p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-51-39.png" /></ac:image></p><p>В Кибане логи в mwk:</p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-54-2.png" /></ac:image></p><h2>Какие проверки были сделаны:</h2><ol><li>Админка работает, армы нового ПТК открываются, история изменений сохраняется (где имеется)</li><li>Страницы сайта загружаются, есть все картинки, данные (новости, статьи итд)</li><li>Поиск на сайте работает (и индексация изменений)</li><li>Проверка прав в ACL работает (и права acl перенесены)</li></ol><p><br /></p>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434922</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547338</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547851</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466715</id>
<property name="body"><![CDATA[<p>С 26 апреля 2021 года по 30 апреля 2021 года был произведен переезд сайта ОСЖД из ГВЦ в ИнЭкс (а именно в кластер kubernetes группы проектов mwk)</p><h2>Что было сделано:</h2><h3>Со стороны k8s</h3><p>Для повышения стабильности работы кластера был добавлен второй ингресс<br /><span style="color: rgb(35,46,66);">Обновление (скейл) клестера был произведен с помощью kubespray (лежит на боссе в /root/kubespray)</span><br /><span style="color: rgb(35,46,66);">В inventory/prod/inventory.ini добавлен&nbsp;</span>ingress-2 по аналогии с&nbsp;ingress-1<br /><span style="color: rgb(35,46,66);">После чего была запущена команда скейла кластера: ansible-playbook -u root -i inventory/prod/inventory.ini scale.yml -b --diff</span></p><h3>Со стороны БД</h3><ul style="list-style-type: square;"><li>acl<ul style="list-style-type: square;"><li>Произведён экспорт данных из БД acl продуктива - права для групп osjd и для InEx<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql</a></li></ul></li></ul></li><li>media<ul style="list-style-type: square;"><li>Написан небольшой скрипт для выкачивания картинок с прода.&nbsp;<a href="https://gitlab.oooinex.ru/osjd/setup/media-export">https://gitlab.oooinex.ru/osjd/setup/media-export</a><ul style="list-style-type: square;"><li>Развернут на 13ой - /mnt/cephfs/osjd/media-export и настроен на прод osjd, запускать через ./run.sh</li><li>На вход нужно подать данные для подключения к БД (в .env файле), где есть таблица cwp_media.resource_metadata с метаданными картинок, которые нужно скачать</li><li>По метаданным строятся урлы до картинок и скачиваются в папку resources внутри контейнера</li><li>Можно смонтировать папку из контейнера сразу в нужную pvc директорию, чтобы картинки сразу появлялись на ПТК</li><li>При повторном запуске, есть возможность пропускать картинки, которые уже скачали (проверяет наличие файла на диске)</li></ul></li><li>Сами метаданные картинок собрали с прода и через поиск битых ссылок по сайту<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple</a></li></ul></li></ul></li><li>content<ul style="list-style-type: square;"><li>Взяли урезанный дамп с продуктива (приходящий эталон)</li><li>Перенесли данные с прода силами Виталия и Святослава (есть чсеты в репозитории osjd/db)</li></ul></li></ul><h3>Со стороны фронта</h3><p>Помимо слоев, используемых в отрисовке страниц, собраны слои и шаблоны для индексации контента</p><p>К АРМам для заполнения таблиц ОСЖД добавлены служебные АРМы (дерево документов, присоединенные к документам файлы и т.д)</p><p>К специфическим скриптам ОСЖД (раскрываемое верхнее меню, слайдер) добавлены общие компоненты (inex-mixins, jqui-datepicker)&nbsp;</p><p>Метаданные АРМов перенесли целиком, дабы ничего не забыть</p><h3>Со стороны nginx и ДНС</h3><p>DNS ведёт на&nbsp;94.159.31.10 (внутри - 172.22.2.251).</p><p>С&nbsp;172.22.2.251 - на&nbsp;172.22.2.95.</p><p>На&nbsp;172.22.2.95 контексты&nbsp;/wps, /admin_css, /admin_js, /js, /fonts, /mccbuilder, /mccenabler, /portal_dojo, /PortalTheme, /searchfeed, /utils и / (строго, без продолжения) ведут на 172.22.2.192 и 172.22.2.193 (для разработческого - на 172.22.2.52), Прочие - в Кубер.</p><h3>Со стороны установщика</h3><p>Установщик был подготовлен к работе с проектом ОСДЖ (продуктивом osjd.org и ПТК CI osjd.odev.oooinex.ru) следующим образом:</p><ol><li>Добавлены переменные для проекта (там же прописывается состав приложений, доменное имя, ветки, токены и тд) playbooks/vars/<a class="w-link" href="http://osjd.org/" title="Пройти по ссылке">osjd.org</a></li><li>Добавлены настройки самого ансибля для проекта осжд playbooks/inventory/osjd.ini</li><li>Добавлены шаблоны (конфиги nginx и записи в ДНС) для проекта осжд playbooks/files/osjd</li><li>Поправлен скрипт ptk_<a class="w-link" href="http://controll.sh/" title="Пройти по ссылке">controll.sh</a>&nbsp;(чтобы запускался с проектом осжд тоже)</li></ol><h3>Со стороны мониторинга</h3><p>Добавлен график</p><p><a href="https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1">https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1</a></p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-51-39.png" /></ac:image></p><p>В Кибане логи в mwk:</p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-54-2.png" /></ac:image></p><h2>Какие проверки были сделаны:</h2><ol><li>Админка работает, армы нового ПТК открываются, история изменений сохраняется (где имеется)</li><li>Страницы сайта загружаются, есть все картинки, данные (новости, статьи итд)</li><li>Поиск на сайте работает (и индексация изменений)</li><li>Проверка прав в ACL работает (и права acl перенесены)</li><li>Проанализировали сайт на отсутствие битых ссылок (не 200)</li></ol><p><br /></p>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434923</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547333</id>
<property name="name"><![CDATA[MEDIA_TYPE]]></property>
<property name="stringValue"><![CDATA[image/png]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547334</id>
<property name="name"><![CDATA[FILESIZE]]></property>
<property name="stringValue"/><property name="longValue">248189</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547335</id>
<property name="name"><![CDATA[MINOR_EDIT]]></property>
<property name="stringValue"/><property name="longValue">1</property>
<property name="dateValue"/></object>
<object class="Attachment" package="com.atlassian.confluence.pages">
<id name="id">79434223</id>
<property name="hibernateVersion">1</property>
<property name="title"><![CDATA[OSJD]]></property>
<property name="lowerTitle"><![CDATA[osjd]]></property>
<collection name="contentProperties" class="java.util.Collection"><element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545380</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545381</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545382</id>
</element>
<element class="ContentProperty" package="com.atlassian.confluence.content"><id name="id">79545383</id>
</element>
</collection>
<property name="version">1</property>
<property name="creator" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="creationDate">2021-04-27 12:23:22.000</property>
<property name="lastModifier" class="ConfluenceUserImpl" package="com.atlassian.confluence.user"><id name="key"><![CDATA[2c9682b35f00e236016020c17d6b0008]]></id>
</property>
<property name="lastModificationDate">2021-04-27 12:23:22.000</property>
<property name="versionComment"><![CDATA[]]></property>
<property name="contentStatus"><![CDATA[current]]></property>
<property name="containerContent" class="SpaceDescription" package="com.atlassian.confluence.spaces"><id name="id">79434218</id>
</property>
<property name="space" class="Space" package="com.atlassian.confluence.spaces"><id name="id">81297409</id>
</property>
<collection name="imageDetailsDTO" class="java.util.Set"></collection>
</object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545384</id>
<property name="name"><![CDATA[macro-count.recently-updated]]></property>
<property name="stringValue"><![CDATA[2-1]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545385</id>
<property name="name"><![CDATA[macro-count.tip]]></property>
<property name="stringValue"><![CDATA[2-1]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545386</id>
<property name="name"><![CDATA[macro-count.contributors]]></property>
<property name="stringValue"><![CDATA[2-1]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545387</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">2</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547435</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">7</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545392</id>
<property name="name"><![CDATA[macro-count.contributors]]></property>
<property name="stringValue"><![CDATA[2-1]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547440</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545393</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">2</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545394</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[recently-updated,tip,contributors]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547955</id>
<property name="name"><![CDATA[macro-count.code]]></property>
<property name="stringValue"><![CDATA[13-1]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545388</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[recently-updated,tip,contributors]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547436</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545390</id>
<property name="name"><![CDATA[macro-count.recently-updated]]></property>
<property name="stringValue"><![CDATA[2-1]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545391</id>
<property name="name"><![CDATA[macro-count.tip]]></property>
<property name="stringValue"><![CDATA[2-1]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547439</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">8</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547961</id>
<property name="name"><![CDATA[macro-count.code]]></property>
<property name="stringValue"><![CDATA[14-1]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547962</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">14</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547963</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[code]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547956</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">13</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547957</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[code]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547968</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">15</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547969</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[code]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547458</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">9</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547459</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545404</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">0</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545405</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547967</id>
<property name="name"><![CDATA[macro-count.code]]></property>
<property name="stringValue"><![CDATA[15-1]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79548681</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[code]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79548682</id>
<property name="name"><![CDATA[macro-count.code]]></property>
<property name="stringValue"><![CDATA[18-3]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79548683</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">18</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547398</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">6</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79547399</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79548688</id>
<property name="name"><![CDATA[macro-count.code]]></property>
<property name="stringValue"><![CDATA[19-4]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466897</id>
<property name="body"><![CDATA[<p>С 26 апреля 2021 года по 30 апреля 2021 года был произведен переезд сайта ОСЖД из ГВЦ в ИнЭкс (а именно в кластер kubernetes группы проектов mwk)</p><h2>Что было сделано:</h2><h3>Со стороны k8s</h3><p>Для повышения стабильности работы кластера был добавлен второй ингресс<br /><span style="color: rgb(35,46,66);">Обновление (скейл) клестера был произведен с помощью kubespray (лежит на боссе в /root/kubespray)</span><br /><span style="color: rgb(35,46,66);">В inventory/prod/inventory.ini добавлен&nbsp;</span>ingress-2 по аналогии с&nbsp;ingress-1<br /><span style="color: rgb(35,46,66);">После чего была запущена команда скейла кластера: ansible-playbook -u root -i inventory/prod/inventory.ini scale.yml -b --diff</span></p><p><span style="color: rgb(35,46,66);"><br /></span></p><p><span style="font-size: 16.0px;font-weight: bold;letter-spacing: 0.0px;">Со стороны LDAP&nbsp;</span></p><p><br /></p><p>группы согласно РАД<br /><a href="http://osjd.info">osjd.info</a> Б Доступ к административному интерфейсу сайта &laquo;ОСЖД&raquo;, &laquo;ОСЖД-1&raquo;, а также к управлению составом группы OSJD.Staff<br />OSJD.Staff А Доступ к пользовательскому интерфейсу работы с общими документами для сотрудников ОСЖД<br />osjd EditorsManagers Б Доступ к управлению составом групп <a href="http://osjd.info">osjd.info</a> и OSJD.Staff</p><h5>ЮЗЕРА</h5><p>на продуктиве<br />получили список мемберов осжд-шных групп</p><p>bash-4.3# /opt/IBM/ldap/V6.3/bin/idsldapsearch -D cn=root -w kvp_root_pwd -p 2389 -b cn=ГРУППА,cn=groups,o=rzd &quot;objectclass=*&quot; ibm-allmembers</p><p>составили список уникальных юзеров<br />выгрузили отдельным льдифом каждого</p><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="354608ad-430f-4770-b0c8-0e0b7c401774"><ac:parameter ac:name="title">выгрузка юзеров</ac:parameter><ac:parameter ac:name="collapse">true</ac:parameter><ac:plain-text-body><![CDATA[for i in {"uid=5221","uid=(zorro)","uid=a.kuzmenko","uid=AAGaldin@gmail.com","uid=Abenov_e","uid=AdomaitieneD_LG","uid=ADY2018","uid=AfRA.2014","uid=Agamalova_est","uid=Agamalova_osjd","uid=aizstrauts_osjd","uid=AleksandrB_EVR","uid=Alekseeva_RZD","uid=Alexandrovskaya_rzd","uid=Alexejchuk_UZ","uid=Algimante","uid=Aliev_ktz","uid=Alimzhanova_a","uid=AndreevOgnian","uid=anseongmin","uid=antonevic_osjd","uid=Apostu_CFM","uid=ARFA.09.11.1964","uid=artemjeva_osjd","uid=ArtemjevaO_SAM","uid=artur.stanilko","uid=Aspayeva","uid=Atanasov_NKZI1","uid=austris","uid=Bakhshi_osjd","uid=Balan_CFM","uid=Balniazova_KTZ","uid=Baneviciene_LG","uid=barbascumpa_osjd","uid=Belak_ZSSKCargo","uid=belinskaya_uz","uid=belyaev_rzd","uid=bergfelu","uid=Bernatonis_LG","uid=bezmenskiy_ttk","uid=bite3","uid=bi-weiwei_kzd","uid=Bolotov_RZD","uid=bolsakova_ldz","uid=Bondarev_RZD","uid=Brundziene_LG","uid=Buc_ZSSKCARGO","uid=Budek_OSJD","uid=bugaenkoviktor_TVEMA","uid=Bukauskiene_LTG","uid=Burkov_RZD","uid=Car1","uid=CAUS_CFRMARFA","uid=Cervinka_CDCARGO","uid=Chemerynskyi_UZ","uid=Cherkasau_BC","uid=Chmielewski_axtone","uid=Cholewska_PKP","uid=civilswjtu","uid=Constantinov_OSJD","uid=cruglii_cfm","uid=CsillagN_RCH","uid=d.pranka","uid=D.Tamir","uid=dalius","uid=datacenter_xxs","uid=dekany_zsr","uid=Devenas_LG","uid=DimitarAndreev","uid=Donets_RZD","uid=Dorcakova_ZSSKCargo","uid=Dorochkevich_RZD","uid=Dorofieieva_UZ","uid=Doroshkevich_rzd","uid=DR_GITTA_MAV-START","uid=Dragancnd","uid=DSvash","uid=dumane_LG","uid=dummy","uid=Dveilys_LG","uid=Dybowski_PKP","uid=dziamo","uid=Efremova_rzd","uid=ejoo","uid=ekaterinash1","uid=Elohegyi_MAV","uid=Emelina_rzd","uid=Esimbekova_KZH","uid=Esimova_KTZ","uid=EVR-Liidia","uid=Farkas_RCH","uid=fedorchuk_ua","uid=fillova_ZSSK","uid=Fitin_UZ","uid=fominova","uid=Gajewska_PKP","uid=Galushkin_rzd","uid=Geibovic_LG","uid=Gil_PKP","uid=gjudycki","uid=GolovkoA_EVR","uid=GolovkoAA_ERS","uid=Gorchak_UZ","uid=grazinach_lt","uid=Grecova_ZSSKCargo","uid=GregorL_RCH","uid=Grigorieva_rzd","uid=grimj","uid=grygiel_mib","uid=Gulnara_cteh","uid=Guryanov_rzd","uid=harammin","uid=Hartelova_ZSR","uid=Haynes_HITRAIL","uid=Hlavaty_ZSR","uid=hong-dailing_osjd","uid=Hubieva_KTZ","uid=HUNT_EVR","uid=I.Rusanov_UZ","uid=ignas_lt","uid=Ihnat_ZSSKCargo","uid=Imanzhanova_KTZ","uid=Ineva_NRIC","uid=Iovan_CFR","uid=Israilova_k","uid=Ivanenko_UZ","uid=IVANOVA_NKZI","uid=Ivanova_NKZI1","uid=IvanovaL_LG","uid=Ivashchenko_rzd","uid=Jakubowski_PKP","uid=Janina LG DK TRS","uid=Janyga_pkp","uid=Jasansky_SZDC","uid=jauris_szdc","uid=jbeli","uid=Juhas_MDSR","uid=JUOZASD LG","uid=Juraska_LG","uid=jurczak_PLK","uid=Kabenkov","uid=kadam_PKP","uid=Kaitline","uid=Kaliutchik_BCH","uid=KALLO_MAV-START","uid=Kamshat_kz","uid=kamzolov_yuri","uid=Karzhassov_KZH","uid=Kasa_MAV","uid=kashanau_osjd","uid=Kazak_RZD","uid=Kemeziene_LG","uid=KhalabaRoman","uid=Khrapach.Andrii","uid=KhristolubovTOG","uid=Khudoyrov_OSJD","uid=Khvostik_M_rzd","uid=khvostik_rzd","uid=kiknadzetatiana","uid=Kilibaeva_KTZ","uid=kinderis","uid=kindevy","uid=kirkova_OSJD","uid=KirovaE_RZD","uid=Kiseliene_LG","uid=Kiss_OSJD","uid=Konstantinov_OSJD","uid=Konta_ZSR","uid=Korab_PKP","uid=Kornev_rzd","uid=korniluk","uid=kostikova_rzd","uid=Kostuch_axtone","uid=KotovaZ_BCH","uid=kovalenko_uz","uid=Kovarik_SZDC","uid=Kovyrnov_rzd","uid=kozmava_OSJD","uid=Kraskouski_IV_BLR","uid=krizan.martin@zsr.sk","uid=Krylova_rzd","uid=KTZ_Kovdrya_Valentina","uid=Kussainov_n","uid=Kuszewski_PKP","uid=Kutejnicyn_UZ","uid=Labeckis_LDZ","uid=Lagoda_PKPIC","uid=LaimaK","uid=laivas","uid=lazarenko_rzd","uid=Lee_KORAIL","uid=LepetenokN_RZD","uid=lg_rpss","uid=LG_RPSS_999","uid=Lisitsyn_RZD","uid=lobzik-vova","uid=Lopata_ZSSKCargo","uid=Lotfi_OSJD1","uid=Lubimova_rzd","uid=Lustov_BC","uid=Luzak_ZSSKCargo","uid=Lynnyk_UZ","uid=Majchrzak_PKP","uid=Makinen_VR","uid=Maltseva_rzd","uid=Mamytov_OSJD","uid=Mantell_UIC","uid=MarciulionisT_LG","uid=maslenka","uid=matta.mario","uid=Matta_ZSR","uid=Matyushev_SGtrans","uid=Meder_PKP","uid=Mihalco_Betamont","uid=mihaylova.Svetlana","uid=Mikalauskiene_LG","uid=Minenko_RZD","uid=mir92.2016","uid=Mitkov_nric","uid=Mlodawski_PKP","uid=moe2","uid=mo-yu_osjd","uid=MuratovA_KTZ","uid=mzilenas_lg","uid=n.svecova","uid=Natali_CTM","uid=Navora_UZ","uid=Nazha_UZ","uid=Nekrashevich_e","uid=Nemeth_MAV","uid=Neumar_ZSSKCargo","uid=Nguyen_OSJD1","uid=Niinepuu_OSJD","uid=Nisula_BC","uid=Nosenko_OSJD","uid=Novakova_CDCARGO","uid=O.Smoliy_UZ","uid=oblomov_rzd","uid=oleg_n2","uid=olgash_uz","uid=Olzhabaeva_KTZ","uid=Ovsenev_rzd","uid=ozinkowska_PLK","uid=panov_nric","uid=Pascan_OSJD","uid=paza00","uid=petr.hron_mindop.cr","uid=pevzner_rzd","uid=PingruiZhao_KZD","uid=plaske_plaske","uid=Platnitski_BCH","uid=pll68","uid=Pogrzebski_PKP","uid=PogrzebskiPKP_Intercity","uid=Pohibielko_PKP","uid=Poleshchuk_UZ","uid=prenosil_OLTIS","uid=qbs_xxs","uid=RakhimjonovBR_UTY","uid=Rakhmilevich_rzd","uid=reginaben_LG","uid=Reivytis_LG","uid=Renne_rzd","uid=ressina_rzd","uid=Rogojkina_rzd","uid=Roizina_PLASKE","uid=Rusy_CD","uid=Rychlik_ZSR","uid=rzd_eremina","uid=rzd_grigoreva","uid=rzd_kostikova","uid=rzd_renne","uid=sabadash@uz.gov.ua","uid=safarov_osjd","uid=Samuchovas_LG","uid=sanjaasuren_osjd","uid=Saracuta_CFM","uid=Sargelis_LG","uid=Sawchuk_BC","uid=Sebastian Budek","uid=Sedlakova_ZSSKCargo","uid=seiman_evr","uid=SeitmagambetovaKTZ","uid=sergeeva_rzd","uid=sergeeva1","uid=Serik.Bolysbaev2","uid=Sevastjanova E_lg","uid=Shalabaiev_UZ","uid=ShalyaginD_RZD","uid=ShestakovPA_IEDT","uid=shikhiyev_osjd","uid=shkayumkhodjaev_osjd","uid=Shoja_RAI","uid=Shurganova_AZD","uid=Simakov_BC","uid=Simoiu","uid=SimonL_RCH","uid=SimonneZs_MAV","uid=Sitekova_ZSR","uid=Skobtsov_UZ","uid=Skuratov_SGtrans","uid=Smailov_KTZ","uid=Smoljanova_n","uid=SMSokolov","uid=SokaitisE_LG","uid=solomakha_uz","uid=Somova_UZ","uid=sseverina","uid=Stanimir_UZ","uid=Starynin_LG","uid=Stefanov_NKZI","uid=stelmakh_UZ","uid=stepanenko_rzd","uid=Stern_MAV","uid=Stovba_rzd","uid=Suindikov_k","uid=Sulzenko_ldz","uid=Sutka_ZSR","uid=svetlichny_ttk","uid=Sychrovsky_SZDC","uid=Syzdykov_B.2013","uid=Szabone_MAV","uid=Szadkowski_PKP","uid=Tabakov_rzd","uid=Talanov_rzd","uid=tangvandung_VZD","uid=Tarabrin_TVEMA","uid=Tarasevic_LG","uid=Telebayev_KTZ","uid=TitovaEF_RZD","uid=Toleugaliyev_KTZH","uid=Tomek_SZDC","uid=Tregubov_rzd","uid=tsevegsuren","uid=Tsvetkov_NRIC","uid=tsyganok_uz","uid=TTSIKHELASHVILI_GR","uid=TurzakovaL_ZSSKCargo","uid=Tusupov_KTZ","uid=ubjd","uid=Ugrin_BC","uid=UteshevD_KTZ","uid=vaganovaon","uid=Valba_LG","uid=valenfalk","uid=VancevicieneML_LG","uid=VasileCodreanu","uid=vitalijus.smirnovas","uid=vkacmarcik","uid=VnukovaS_UZ","uid=Vopalecky_OSJD","uid=Voronina_EVR","uid=v-ovsyannikov","uid=Vravec_ZSR1","uid=Vytautas LGDC","uid=Vytpak","uid=wang-lianbin_osjd","uid=Wiechowska_OSJD","uid=wu-yang_osjd","uid=xia-baohe_kzd","uid=XYL_ITCMOR","uid=yanchev_nric","uid=yurkinav2","uid=Zajcevova_Betamont","uid=zanzarah","uid=Zen1971","uid=Zhankabaev_KTZ","uid=Zolboo","uid=zolotnikov_ttk","uid=zubilewicz_plk","uid=Zuk_MI"} ; do /opt/IBM/ldap/V6.3/bin/idsldapsearch -D cn=root -w kvp_root_pwd -p 2389 -b cn=users,o=rzd $i > "${i:4:${#i}}".ldif; done]] ></ac:plain-text-body></ac:structured-macro><p><br /></p><p>перенесли к нам</p><p>поколдовали над льдифами<br />sed -i &quot;s/=/: /&quot; *.ldif<br />sed -i '1!b;s/uid: /dn: uid=/' *.ldif</p><p>вручную поменяли названия файлов, где были пробелы</p><p>залили юзеров к нам<br />for f in $(ls -1) ; do /opt/IBM/ldap/V6.3/bin/idsldapadd -p 2389 -D cn=root -w kvp_root_pwd -i /tmp/osjd-users/$f ; done</p><h5>ГРУППЫ</h5><p>формат льдифа для заливки</p><p>dn: cn=OSJD.Staff,cn=groups,o=rzd<br />changetype: modify<br />add: uniquemember<br />uniquemember:uid=Gil_PKP,cn=users,o=rzd<br />uniquemember:uid=Bernatonis_LG,cn=users,o=rzd</p><p>заливка<br />/opt/IBM/ldap/V6.3/bin/idsldapmodify -D cn=root -w kvp_root_pwd -p 2389 -f /tmp/group-osjdstaff.ldif</p><p>проверка заливки<br />/opt/IBM/ldap/V6.3/bin/idsldapsearch -D cn=root -w kvp_root_pwd -p 2389 -b cn=osjd.staff,cn=groups,o=rzd &quot;objectclass=*&quot; ibm-allmembers</p><p>группы osjd EditorsManagers у нас не было</p><p>заведено</p><p>формат льдифа<br />dn: cn=osjd EditorsManagers,cn=groups,o=rzd<br />objectclass: top<br />objectClass: groupofuniquenames<br />cn: osjd EditorsManagers<br />uniqueMember: uid=Budek_OSJD,cn=users,o=rzd<br />uniqueMember: uid=Sebastian Budek,cn=users,o=rzd</p><p>/opt/IBM/ldap/V6.3/bin/idsldapadd -D cn=root -w kvp_root_pwd -p 2389 -f /tmp/group-osjdeditors.ldif</p><p>группа&nbsp;osjd EditorsManagers добавлена подгруппой к&nbsp;EditorsManagers.portlet</p><p><span style="font-size: 16.0px;font-weight: bold;letter-spacing: 0.0px;">Со стороны WebSpherePortal</span></p><p>для прода взят бывший портал альфы, изменены адреса</p><p><a class="w-link" href="http://172.22.2.191/" title="Пройти по ссылке">172.22.2.191</a><span style="color: rgb(35,46,66);">&nbsp;- ps-dmgr</span><br /><a class="w-link" href="http://172.22.2.192/" title="Пройти по ссылке">172.22.2.192</a><span style="color: rgb(35,46,66);">&nbsp;- ps-app01</span><br /><a class="w-link" href="http://172.22.2.193/" title="Пройти по ссылке">172.22.2.193</a><span style="color: rgb(35,46,66);">&nbsp;- ps-app02</span></p><p>для ci как и для всего используется psi</p><h3>Со стороны БД</h3><h5>поднятие БД</h5><p><span style="color: rgb(35,46,66);">БД прода на 172,22,2,240</span></p><p><span style="color: rgb(35,46,66);">/usr/pgsql-12/bin/pg_ctl initdb -D //var/lib/pgsql/12/data-osjd</span><br /><span style="color: rgb(35,46,66);">cd /var/lib/pgsql/12/data-osjd</span><br /><span style="color: rgb(35,46,66);">в постгрес.конф исправить порт 5435</span><br /><span style="color: rgb(35,46,66);">и адрес прослушивания на '*'</span></p><p>в pg_hba.conf исправлены правила доступа</p><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="0a2d5f50-7c53-4be4-8acc-9a875de18b68"><ac:parameter ac:name="title">pg_hba.conf - кусок</ac:parameter><ac:plain-text-body><![CDATA[TYPE DATABASE USER ADDRESS METHOD
"local" is for Unix domain socket connections only
local all all trust
IPv4 local connections:
host all all samenet password
IPv6 local connections:
host all all ::1/128 md5
Allow replication connections from localhost, by a user with the
replication privilege.
local replication all trust
host replication all samenet password
host replication all ::1/128 md5]] ></ac:plain-text-body></ac:structured-macro><p><br />в /lib/systemd/system создан сервис<br />postgresql-12-osjd.service<br />обратить внимание на<br />Environment=PGDATA=/var/lib/pgsql/12/data-osjd/</p><p>добавлен скрипт снятия эталона по крону каждую ночь</p><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="880497b9-8763-4e84-875f-12697220b752"><ac:parameter ac:name="title">/opt/INEX/scripts/etalon-osjd.sh</ac:parameter><ac:plain-text-body><![CDATA[#!/bin/bash

sudo -u postgres pg_dump -p 5435 -f /home/postgres/main.backup-osjd-$(date +%F) main
sed -i "s/osjd.org/osjd.local.oooinex.ru/g" /home/postgres/main.backup-osjd-$(date +%F)
gzip -c /home/postgres/main.backup-osjd-$(date +%F) > /tmp/osjd.gzip
sshpass -p "ghjuhfvvf" scp /tmp/osjd.gzip inex@172.22.2.51:/mnt/ftp/gvc/.git-shared-storage/osjd/setup/etalon-maindb/dumps/main.backup.gz

]] ></ac:plain-text-body></ac:structured-macro><p><br /></p><h5>слияние 5-ти БД в одну<br /><br /></h5><ul style="list-style-type: square;"><li>acl<ul style="list-style-type: square;"><li>Произведён экспорт данных из БД acl продуктива - права для групп osjd и для InEx<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql</a></li></ul></li></ul></li><li>media<ul style="list-style-type: square;"><li>Написан небольшой скрипт для выкачивания картинок с прода.&nbsp;<a href="https://gitlab.oooinex.ru/osjd/setup/media-export">https://gitlab.oooinex.ru/osjd/setup/media-export</a><ul style="list-style-type: square;"><li>Развернут на 13ой в примонтированном цефе - /mnt/cephfs/osjd/media-export и настроен на прод osjd, запускать через ./run.sh</li><li>На вход нужно подать данные для подключения к БД (в .env файле), где есть таблица cwp_media.resource_metadata с метаданными картинок, которые нужно скачать</li><li>По метаданным строятся урлы до картинок и скачиваются в папку resources внутри контейнера</li><li>Можно смонтировать папку из контейнера сразу в нужную pvc директорию, чтобы картинки сразу появлялись на ПТК</li><li>При повторном запуске, есть возможность пропускать картинки, которые уже скачали (проверяет наличие файла на диске)</li></ul></li><li>Сами метаданные картинок собрали с прода и через поиск битых ссылок по сайту<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple</a></li></ul></li></ul></li><li>content<ul style="list-style-type: square;"><li>Взяли урезанный дамп с продуктива (приходящий эталон)</li><li>Перенесли данные с прода силами Виталия и Святослава (есть чсеты в репозитории osjd/db)<br /><br /></li></ul></li></ul><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="3d1834fc-0a32-4d70-a209-1c73f82cb11a"><ac:parameter ac:name="language">sql</ac:parameter><ac:parameter ac:name="title">Скрипты</ac:parameter><ac:parameter ac:name="collapse">true</ac:parameter><ac:plain-text-body><![CDATA[-- Составляем список таблиц, которые могут содержать файлы.
select 'select '''||t1.table_name||''' as table_name, '||t1.column_name||' as media_id from '||t1.table_schema||'.'||t1.table_name||' where '||t1.column_name||' is not null and (cvpm_id is null or cvpm_id in (68, 67, 51)) union all' 
from information_schema.columns t1, information_schema.columns t2
where t2.table_schema = t1.table_schema
and t2.table_name = t1.table_name
and replace(t2.column_name, '_size', '') = replace(t1.column_name, '_id', '')
and t1.column_name like '%_id'
and t2.column_name like '%_size'
and t1.table_name in (select table_name FROM information_schema.tables t WHERE table_schema = 'cwp' and table_type = 'BASE TABLE')
order by t1.table_name;

-- Получившийся список селектов придется прореживать, т.к. не во всех таблицах есть колонка cvpm_id, из-за чего появится ошибка, 
-- но в этом случае по имени таблицы становится понятно, к какому порталу она относится. Также в последней строке надо удалить union all. 
-- Затем список селектов надо вставить
select media_id||',' from (
-- сюда
) t order by 1;
-- и выполнить в content-db.

-- Результат выполнения надо вставить
select id
from cwp_media.resource_metadata
where id in (SELECT l.resource_id FROM cwp_media.resources_links l WHERE l.vp_id in (68, 67, 51))
or domain_id in (68, 67, 51)
or id in (
-- сюда
)
order by id;
-- и выполнить в media-db. Так получим список айдишников файлов, которые могут относиться к ОСЖД 
(скорее всего, будут лишние файлы, но это лучше, чем недостача).

-- Что касается прочих данных (не файлов), то был составлен список таблиц.
-- Наверно, пока наиболее надежный способ - пройтись по админке и вручную составить
-- список армов, а на его основе - список таблиц. После этого в Бивере генерировать
-- инсерты с обработкой ошибок (on conflict do nothing). Обновлять/удалять данные сложнее, т.к.
-- надо сравнивать с продом. В этот раз делал силами Бивера путем сравнения
-- результатов селекта, например,
SELECT * FROM cwp.app_structure_staticpages WHERE structure_id in (
  select s.id from cwp.cham_structure_main s where s.cvpm_id in (51, 67, 68)
) order by id;
-- на двух птк в WinMerge.
-- Но с таким сравнением текстов статики возникла проблема.
SELECT * FROM cwp.app_staticpages_locale WHERE cvpm_id in (51, 67, 68) order by id;
-- Бивер позволяет показывать результаты в виде таблицы или текста.
-- В первом варианте при копипасте текстов с тегами добавлялись лишние кавычки, что мешало сравнивать.
-- При показе результатов в виде текста кавычки не добавлялись, сравнивать было намного удобнее.
-- Такой способ сравнения - муторный, много механических действий.
-- Если сайт небольшой, то можно рассмотреть другой вариант актуализации данных - изменить скрипт
-- чистки дампа бд при создании эталона, который регулярно приезжает с прода, чтобы отменить удаление
-- данных переносимого портала. Возможный минус - эталон станет слишком большим, и механизм его
-- получения с прода сломается. Ну и временной лаг - надо ждать ночи.

Важно!!! При переносе данных имеет смысл отключать или дропать триггеры, чтобы они не меняли данные (даже для сравнения это удобнее), 
а потом восстанавливать. Т.е. удаляем триггеры, делаем DML, создаем триггеры.
Удаляем/создаем - потому что скрипты на это есть в Бивере на вкладке DDL таблицы.
Можно вообще подготовить скрипт, который будет записывать куда-то состояние всех триггеров таблицы, выключать их,
а потом включать их, чтобы не включить выключенный, если такие вообще есть (в оракле были).]] ></ac:plain-text-body></ac:structured-macro><h3>Со стороны фронта</h3><p>Помимо слоев, используемых в отрисовке страниц, собраны слои и шаблоны для индексации контента</p><p>К АРМам для заполнения таблиц ОСЖД добавлены служебные АРМы (дерево документов, присоединенные к документам файлы и т.д)</p><p>К специфическим скриптам ОСЖД (раскрываемое верхнее меню, слайдер) добавлены общие компоненты (inex-mixins, jqui-datepicker)&nbsp;</p><p>Метаданные АРМов перенесли целиком, дабы ничего не забыть</p><h3>Со стороны nginx и ДНС</h3><p>DNS ведёт на&nbsp;94.159.31.10 (внутри - 172.22.2.251).</p><p>С&nbsp;172.22.2.251 - на&nbsp;172.22.2.95.</p><p>На&nbsp;172.22.2.95 контексты&nbsp;/wps, /admin_css, /admin_js, /js, /fonts, /mccbuilder, /mccenabler, /portal_dojo, /PortalTheme, /searchfeed, /utils и / (строго, без продолжения) ведут на 172.22.2.192 и 172.22.2.193 (для разработческого - на 172.22.2.52), Прочие - в Кубер.</p><h3>Со стороны поиска и индексера</h3><h3>Со стороны установщика</h3><p>Установщик был подготовлен к работе с проектом ОСДЖ (продуктивом osjd.org и ПТК CI osjd.odev.oooinex.ru) следующим образом:</p><ol><li>Добавлены переменные для проекта (там же прописывается состав приложений, доменное имя, ветки, токены и тд) playbooks/vars/<a class="w-link" href="http://osjd.org/" title="Пройти по ссылке">osjd.org</a></li><li>Добавлены настройки самого ансибля для проекта осжд playbooks/inventory/osjd.ini</li><li>Добавлены шаблоны (конфиги nginx и записи в ДНС) для проекта осжд playbooks/files/osjd</li><li>Поправлен скрипт ptk_<a class="w-link" href="http://controll.sh/" title="Пройти по ссылке">controll.sh</a>&nbsp;(чтобы запускался с проектом осжд тоже)</li></ol><h3>Со стороны мониторинга</h3><p>Добавлен график</p><p><a href="https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1">https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1</a></p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-51-39.png" /></ac:image></p><p>В Кибане логи в mwk:</p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-54-2.png" /></ac:image></p><h2>Какие проверки были сделаны:</h2><ol><li>Админка работает, армы нового ПТК открываются, история изменений сохраняется (где имеется)</li><li>Страницы сайта загружаются, есть все картинки, данные (новости, статьи итд)</li><li>Поиск на сайте работает (и индексация изменений)</li><li>Проверка прав в ACL работает (и права acl перенесены)</li><li>Проанализировали сайт на отсутствие битых ссылок (не 200)</li></ol><p><br /></p>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79435130</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79548689</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">19</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79548691</id>
<property name="name"><![CDATA[macro-count.code]]></property>
<property name="stringValue"><![CDATA[19-4]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79548687</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[code]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545368</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[recently-updated,tip,contributors]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545364</id>
<property name="name"><![CDATA[macro-count.recently-updated]]></property>
<property name="stringValue"><![CDATA[1-1]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79548692</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">19</property>
<property name="dateValue"/></object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466892</id>
<property name="body"><![CDATA[<p>С 26 апреля 2021 года по 30 апреля 2021 года был произведен переезд сайта ОСЖД из ГВЦ в ИнЭкс (а именно в кластер kubernetes группы проектов mwk)</p><h2>Что было сделано:</h2><h3>Со стороны k8s</h3><p>Для повышения стабильности работы кластера был добавлен второй ингресс<br /><span style="color: rgb(35,46,66);">Обновление (скейл) клестера был произведен с помощью kubespray (лежит на боссе в /root/kubespray)</span><br /><span style="color: rgb(35,46,66);">В inventory/prod/inventory.ini добавлен&nbsp;</span>ingress-2 по аналогии с&nbsp;ingress-1<br /><span style="color: rgb(35,46,66);">После чего была запущена команда скейла кластера: ansible-playbook -u root -i inventory/prod/inventory.ini scale.yml -b --diff</span></p><p><span style="color: rgb(35,46,66);"><br /></span></p><p><span style="font-size: 16.0px;font-weight: bold;letter-spacing: 0.0px;">Со стороны LDAP&nbsp;</span></p><p><span style="color: rgb(35,46,66);">----------------------------------------------------------------------------------</span></p><h3>Со стороны БД</h3><ul style="list-style-type: square;"><li>acl<ul style="list-style-type: square;"><li>Произведён экспорт данных из БД acl продуктива - права для групп osjd и для InEx<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql</a></li></ul></li></ul></li><li>media<ul style="list-style-type: square;"><li>Написан небольшой скрипт для выкачивания картинок с прода.&nbsp;<a href="https://gitlab.oooinex.ru/osjd/setup/media-export">https://gitlab.oooinex.ru/osjd/setup/media-export</a><ul style="list-style-type: square;"><li>Развернут на 13ой в примонтированном цефе - /mnt/cephfs/osjd/media-export и настроен на прод osjd, запускать через ./run.sh</li><li>На вход нужно подать данные для подключения к БД (в .env файле), где есть таблица cwp_media.resource_metadata с метаданными картинок, которые нужно скачать</li><li>По метаданным строятся урлы до картинок и скачиваются в папку resources внутри контейнера</li><li>Можно смонтировать папку из контейнера сразу в нужную pvc директорию, чтобы картинки сразу появлялись на ПТК</li><li>При повторном запуске, есть возможность пропускать картинки, которые уже скачали (проверяет наличие файла на диске)</li></ul></li><li>Сами метаданные картинок собрали с прода и через поиск битых ссылок по сайту<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple</a></li></ul></li></ul></li><li>content<ul style="list-style-type: square;"><li>Взяли урезанный дамп с продуктива (приходящий эталон)</li><li>Перенесли данные с прода силами Виталия и Святослава (есть чсеты в репозитории osjd/db)<br /><br /></li></ul></li></ul><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="3d1834fc-0a32-4d70-a209-1c73f82cb11a"><ac:parameter ac:name="language">sql</ac:parameter><ac:parameter ac:name="title">Скрипты</ac:parameter><ac:parameter ac:name="collapse">true</ac:parameter><ac:plain-text-body><![CDATA[-- Составляем список таблиц, которые могут содержать файлы.
select 'select '''||t1.table_name||''' as table_name, '||t1.column_name||' as media_id from '||t1.table_schema||'.'||t1.table_name||' where '||t1.column_name||' is not null and (cvpm_id is null or cvpm_id in (68, 67, 51)) union all' 
from information_schema.columns t1, information_schema.columns t2
where t2.table_schema = t1.table_schema
and t2.table_name = t1.table_name
and replace(t2.column_name, '_size', '') = replace(t1.column_name, '_id', '')
and t1.column_name like '%_id'
and t2.column_name like '%_size'
and t1.table_name in (select table_name FROM information_schema.tables t WHERE table_schema = 'cwp' and table_type = 'BASE TABLE')
order by t1.table_name;

-- Получившийся список селектов придется прореживать, т.к. не во всех таблицах есть колонка cvpm_id, из-за чего появится ошибка, 
-- но в этом случае по имени таблицы становится понятно, к какому порталу она относится. Также в последней строке надо удалить union all. 
-- Затем список селектов надо вставить
select media_id||',' from (
-- сюда
) t order by 1;
-- и выполнить в content-db.

-- Результат выполнения надо вставить
select id
from cwp_media.resource_metadata
where id in (SELECT l.resource_id FROM cwp_media.resources_links l WHERE l.vp_id in (68, 67, 51))
or domain_id in (68, 67, 51)
or id in (
-- сюда
)
order by id;
-- и выполнить в media-db. Так получим список айдишников файлов, которые могут относиться к ОСЖД 
(скорее всего, будут лишние файлы, но это лучше, чем недостача).

-- Что касается прочих данных (не файлов), то был составлен список таблиц.
-- Наверно, пока наиболее надежный способ - пройтись по админке и вручную составить
-- список армов, а на его основе - список таблиц. После этого в Бивере генерировать
-- инсерты с обработкой ошибок (on conflict do nothing). Обновлять/удалять данные сложнее, т.к.
-- надо сравнивать с продом. В этот раз делал силами Бивера путем сравнения
-- результатов селекта, например,
SELECT * FROM cwp.app_structure_staticpages WHERE structure_id in (
  select s.id from cwp.cham_structure_main s where s.cvpm_id in (51, 67, 68)
) order by id;
-- на двух птк в WinMerge.
-- Но с таким сравнением текстов статики возникла проблема.
SELECT * FROM cwp.app_staticpages_locale WHERE cvpm_id in (51, 67, 68) order by id;
-- Бивер позволяет показывать результаты в виде таблицы или текста.
-- В первом варианте при копипасте текстов с тегами добавлялись лишние кавычки, что мешало сравнивать.
-- При показе результатов в виде текста кавычки не добавлялись, сравнивать было намного удобнее.
-- Такой способ сравнения - муторный, много механических действий.
-- Если сайт небольшой, то можно рассмотреть другой вариант актуализации данных - изменить скрипт
-- чистки дампа бд при создании эталона, который регулярно приезжает с прода, чтобы отменить удаление
-- данных переносимого портала. Возможный минус - эталон станет слишком большим, и механизм его
-- получения с прода сломается. Ну и временной лаг - надо ждать ночи.

Важно!!! При переносе данных имеет смысл отключать или дропать триггеры, чтобы они не меняли данные (даже для сравнения это удобнее), 
а потом восстанавливать. Т.е. удаляем триггеры, делаем DML, создаем триггеры.
Удаляем/создаем - потому что скрипты на это есть в Бивере на вкладке DDL таблицы.
Можно вообще подготовить скрипт, который будет записывать куда-то состояние всех триггеров таблицы, выключать их,
а потом включать их, чтобы не включить выключенный, если такие вообще есть (в оракле были).]] ></ac:plain-text-body></ac:structured-macro><h3>Со стороны фронта</h3><p>Помимо слоев, используемых в отрисовке страниц, собраны слои и шаблоны для индексации контента</p><p>К АРМам для заполнения таблиц ОСЖД добавлены служебные АРМы (дерево документов, присоединенные к документам файлы и т.д)</p><p>К специфическим скриптам ОСЖД (раскрываемое верхнее меню, слайдер) добавлены общие компоненты (inex-mixins, jqui-datepicker)&nbsp;</p><p>Метаданные АРМов перенесли целиком, дабы ничего не забыть</p><h3>Со стороны nginx и ДНС</h3><p>DNS ведёт на&nbsp;94.159.31.10 (внутри - 172.22.2.251).</p><p>С&nbsp;172.22.2.251 - на&nbsp;172.22.2.95.</p><p>На&nbsp;172.22.2.95 контексты&nbsp;/wps, /admin_css, /admin_js, /js, /fonts, /mccbuilder, /mccenabler, /portal_dojo, /PortalTheme, /searchfeed, /utils и / (строго, без продолжения) ведут на 172.22.2.192 и 172.22.2.193 (для разработческого - на 172.22.2.52), Прочие - в Кубер.</p><h3>Со стороны установщика</h3><p>Установщик был подготовлен к работе с проектом ОСДЖ (продуктивом osjd.org и ПТК CI osjd.odev.oooinex.ru) следующим образом:</p><ol><li>Добавлены переменные для проекта (там же прописывается состав приложений, доменное имя, ветки, токены и тд) playbooks/vars/<a class="w-link" href="http://osjd.org/" title="Пройти по ссылке">osjd.org</a></li><li>Добавлены настройки самого ансибля для проекта осжд playbooks/inventory/osjd.ini</li><li>Добавлены шаблоны (конфиги nginx и записи в ДНС) для проекта осжд playbooks/files/osjd</li><li>Поправлен скрипт ptk_<a class="w-link" href="http://controll.sh/" title="Пройти по ссылке">controll.sh</a>&nbsp;(чтобы запускался с проектом осжд тоже)</li></ol><h3>Со стороны мониторинга</h3><p>Добавлен график</p><p><a href="https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1">https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1</a></p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-51-39.png" /></ac:image></p><p>В Кибане логи в mwk:</p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-54-2.png" /></ac:image></p><h2>Какие проверки были сделаны:</h2><ol><li>Админка работает, армы нового ПТК открываются, история изменений сохраняется (где имеется)</li><li>Страницы сайта загружаются, есть все картинки, данные (новости, статьи итд)</li><li>Поиск на сайте работает (и индексация изменений)</li><li>Проверка прав в ACL работает (и права acl перенесены)</li><li>Проанализировали сайт на отсутствие битых ссылок (не 200)</li></ol><p><br /></p>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79435125</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545365</id>
<property name="name"><![CDATA[macro-count.tip]]></property>
<property name="stringValue"><![CDATA[1-1]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79548693</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[code]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545366</id>
<property name="name"><![CDATA[macro-count.contributors]]></property>
<property name="stringValue"><![CDATA[1-1]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545367</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">1</property>
<property name="dateValue"/></object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466895</id>
<property name="body"><![CDATA[<p>С 26 апреля 2021 года по 30 апреля 2021 года был произведен переезд сайта ОСЖД из ГВЦ в ИнЭкс (а именно в кластер kubernetes группы проектов mwk)</p><h2>Что было сделано:</h2><h3>Со стороны k8s</h3><p>Для повышения стабильности работы кластера был добавлен второй ингресс<br /><span style="color: rgb(35,46,66);">Обновление (скейл) клестера был произведен с помощью kubespray (лежит на боссе в /root/kubespray)</span><br /><span style="color: rgb(35,46,66);">В inventory/prod/inventory.ini добавлен&nbsp;</span>ingress-2 по аналогии с&nbsp;ingress-1<br /><span style="color: rgb(35,46,66);">После чего была запущена команда скейла кластера: ansible-playbook -u root -i inventory/prod/inventory.ini scale.yml -b --diff</span></p><p><span style="color: rgb(35,46,66);"><br /></span></p><p><span style="font-size: 16.0px;font-weight: bold;letter-spacing: 0.0px;">Со стороны LDAP&nbsp;</span></p><h5>ЮЗЕРА</h5><p>на продуктиве<br />получили список мемберов осжд-шных групп</p><p>bash-4.3# /opt/IBM/ldap/V6.3/bin/idsldapsearch -D cn=root -w kvp_root_pwd -p 2389 -b cn=ГРУППА,cn=groups,o=rzd &quot;objectclass=*&quot; ibm-allmembers</p><p>составили список уникальных юзеров<br />выгрузили отдельным льдифом каждого</p><p>for i in {&quot;uid=5221&quot;,&quot;uid=(zorro)&quot;,&quot;uid=a.kuzmenko&quot;,&quot;uid=<a href="mailto:AAGaldin@gmail.com">AAGaldin@gmail.com</a>&quot;,&quot;uid=Abenov_e&quot;,&quot;uid=AdomaitieneD_LG&quot;,&quot;uid=ADY2018&quot;,&quot;uid=AfRA.2014&quot;,&quot;uid=Agamalova_est&quot;,&quot;uid=Agamalova_osjd&quot;,&quot;uid=aizstrauts_osjd&quot;,&quot;uid=AleksandrB_EVR&quot;,&quot;uid=Alekseeva_RZD&quot;,&quot;uid=Alexandrovskaya_rzd&quot;,&quot;uid=Alexejchuk_UZ&quot;,&quot;uid=Algimante&quot;,&quot;uid=Aliev_ktz&quot;,&quot;uid=Alimzhanova_a&quot;,&quot;uid=AndreevOgnian&quot;,&quot;uid=anseongmin&quot;,&quot;uid=antonevic_osjd&quot;,&quot;uid=Apostu_CFM&quot;,&quot;uid=ARFA.09.11.1964&quot;,&quot;uid=artemjeva_osjd&quot;,&quot;uid=ArtemjevaO_SAM&quot;,&quot;uid=artur.stanilko&quot;,&quot;uid=Aspayeva&quot;,&quot;uid=Atanasov_NKZI1&quot;,&quot;uid=austris&quot;,&quot;uid=Bakhshi_osjd&quot;,&quot;uid=Balan_CFM&quot;,&quot;uid=Balniazova_KTZ&quot;,&quot;uid=Baneviciene_LG&quot;,&quot;uid=barbascumpa_osjd&quot;,&quot;uid=Belak_ZSSKCargo&quot;,&quot;uid=belinskaya_uz&quot;,&quot;uid=belyaev_rzd&quot;,&quot;uid=bergfelu&quot;,&quot;uid=Bernatonis_LG&quot;,&quot;uid=bezmenskiy_ttk&quot;,&quot;uid=bite3&quot;,&quot;uid=bi-weiwei_kzd&quot;,&quot;uid=Bolotov_RZD&quot;,&quot;uid=bolsakova_ldz&quot;,&quot;uid=Bondarev_RZD&quot;,&quot;uid=Brundziene_LG&quot;,&quot;uid=Buc_ZSSKCARGO&quot;,&quot;uid=Budek_OSJD&quot;,&quot;uid=bugaenkoviktor_TVEMA&quot;,&quot;uid=Bukauskiene_LTG&quot;,&quot;uid=Burkov_RZD&quot;,&quot;uid=Car1&quot;,&quot;uid=CAUS_CFRMARFA&quot;,&quot;uid=Cervinka_CDCARGO&quot;,&quot;uid=Chemerynskyi_UZ&quot;,&quot;uid=Cherkasau_BC&quot;,&quot;uid=Chmielewski_axtone&quot;,&quot;uid=Cholewska_PKP&quot;,&quot;uid=civilswjtu&quot;,&quot;uid=Constantinov_OSJD&quot;,&quot;uid=cruglii_cfm&quot;,&quot;uid=CsillagN_RCH&quot;,&quot;uid=d.pranka&quot;,&quot;uid=D.Tamir&quot;,&quot;uid=dalius&quot;,&quot;uid=datacenter_xxs&quot;,&quot;uid=dekany_zsr&quot;,&quot;uid=Devenas_LG&quot;,&quot;uid=DimitarAndreev&quot;,&quot;uid=Donets_RZD&quot;,&quot;uid=Dorcakova_ZSSKCargo&quot;,&quot;uid=Dorochkevich_RZD&quot;,&quot;uid=Dorofieieva_UZ&quot;,&quot;uid=Doroshkevich_rzd&quot;,&quot;uid=DR_GITTA_MAV-START&quot;,&quot;uid=Dragancnd&quot;,&quot;uid=DSvash&quot;,&quot;uid=dumane_LG&quot;,&quot;uid=dummy&quot;,&quot;uid=Dveilys_LG&quot;,&quot;uid=Dybowski_PKP&quot;,&quot;uid=dziamo&quot;,&quot;uid=Efremova_rzd&quot;,&quot;uid=ejoo&quot;,&quot;uid=ekaterinash1&quot;,&quot;uid=Elohegyi_MAV&quot;,&quot;uid=Emelina_rzd&quot;,&quot;uid=Esimbekova_KZH&quot;,&quot;uid=Esimova_KTZ&quot;,&quot;uid=EVR-Liidia&quot;,&quot;uid=Farkas_RCH&quot;,&quot;uid=fedorchuk_ua&quot;,&quot;uid=fillova_ZSSK&quot;,&quot;uid=Fitin_UZ&quot;,&quot;uid=fominova&quot;,&quot;uid=Gajewska_PKP&quot;,&quot;uid=Galushkin_rzd&quot;,&quot;uid=Geibovic_LG&quot;,&quot;uid=Gil_PKP&quot;,&quot;uid=gjudycki&quot;,&quot;uid=GolovkoA_EVR&quot;,&quot;uid=GolovkoAA_ERS&quot;,&quot;uid=Gorchak_UZ&quot;,&quot;uid=grazinach_lt&quot;,&quot;uid=Grecova_ZSSKCargo&quot;,&quot;uid=GregorL_RCH&quot;,&quot;uid=Grigorieva_rzd&quot;,&quot;uid=grimj&quot;,&quot;uid=grygiel_mib&quot;,&quot;uid=Gulnara_cteh&quot;,&quot;uid=Guryanov_rzd&quot;,&quot;uid=harammin&quot;,&quot;uid=Hartelova_ZSR&quot;,&quot;uid=Haynes_HITRAIL&quot;,&quot;uid=Hlavaty_ZSR&quot;,&quot;uid=hong-dailing_osjd&quot;,&quot;uid=Hubieva_KTZ&quot;,&quot;uid=HUNT_EVR&quot;,&quot;uid=I.Rusanov_UZ&quot;,&quot;uid=ignas_lt&quot;,&quot;uid=Ihnat_ZSSKCargo&quot;,&quot;uid=Imanzhanova_KTZ&quot;,&quot;uid=Ineva_NRIC&quot;,&quot;uid=Iovan_CFR&quot;,&quot;uid=Israilova_k&quot;,&quot;uid=Ivanenko_UZ&quot;,&quot;uid=IVANOVA_NKZI&quot;,&quot;uid=Ivanova_NKZI1&quot;,&quot;uid=IvanovaL_LG&quot;,&quot;uid=Ivashchenko_rzd&quot;,&quot;uid=Jakubowski_PKP&quot;,&quot;uid=Janina LG DK TRS&quot;,&quot;uid=Janyga_pkp&quot;,&quot;uid=Jasansky_SZDC&quot;,&quot;uid=jauris_szdc&quot;,&quot;uid=jbeli&quot;,&quot;uid=Juhas_MDSR&quot;,&quot;uid=JUOZASD LG&quot;,&quot;uid=Juraska_LG&quot;,&quot;uid=jurczak_PLK&quot;,&quot;uid=Kabenkov&quot;,&quot;uid=kadam_PKP&quot;,&quot;uid=Kaitline&quot;,&quot;uid=Kaliutchik_BCH&quot;,&quot;uid=KALLO_MAV-START&quot;,&quot;uid=Kamshat_kz&quot;,&quot;uid=kamzolov_yuri&quot;,&quot;uid=Karzhassov_KZH&quot;,&quot;uid=Kasa_MAV&quot;,&quot;uid=kashanau_osjd&quot;,&quot;uid=Kazak_RZD&quot;,&quot;uid=Kemeziene_LG&quot;,&quot;uid=KhalabaRoman&quot;,&quot;uid=Khrapach.Andrii&quot;,&quot;uid=KhristolubovTOG&quot;,&quot;uid=Khudoyrov_OSJD&quot;,&quot;uid=Khvostik_M_rzd&quot;,&quot;uid=khvostik_rzd&quot;,&quot;uid=kiknadzetatiana&quot;,&quot;uid=Kilibaeva_KTZ&quot;,&quot;uid=kinderis&quot;,&quot;uid=kindevy&quot;,&quot;uid=kirkova_OSJD&quot;,&quot;uid=KirovaE_RZD&quot;,&quot;uid=Kiseliene_LG&quot;,&quot;uid=Kiss_OSJD&quot;,&quot;uid=Konstantinov_OSJD&quot;,&quot;uid=Konta_ZSR&quot;,&quot;uid=Korab_PKP&quot;,&quot;uid=Kornev_rzd&quot;,&quot;uid=korniluk&quot;,&quot;uid=kostikova_rzd&quot;,&quot;uid=Kostuch_axtone&quot;,&quot;uid=KotovaZ_BCH&quot;,&quot;uid=kovalenko_uz&quot;,&quot;uid=Kovarik_SZDC&quot;,&quot;uid=Kovyrnov_rzd&quot;,&quot;uid=kozmava_OSJD&quot;,&quot;uid=Kraskouski_IV_BLR&quot;,&quot;uid=krizan.martin@<a href="http://zsr.sk">zsr.sk</a>&quot;,&quot;uid=Krylova_rzd&quot;,&quot;uid=KTZ_Kovdrya_Valentina&quot;,&quot;uid=Kussainov_n&quot;,&quot;uid=Kuszewski_PKP&quot;,&quot;uid=Kutejnicyn_UZ&quot;,&quot;uid=Labeckis_LDZ&quot;,&quot;uid=Lagoda_PKPIC&quot;,&quot;uid=LaimaK&quot;,&quot;uid=laivas&quot;,&quot;uid=lazarenko_rzd&quot;,&quot;uid=Lee_KORAIL&quot;,&quot;uid=LepetenokN_RZD&quot;,&quot;uid=lg_rpss&quot;,&quot;uid=LG_RPSS_999&quot;,&quot;uid=Lisitsyn_RZD&quot;,&quot;uid=lobzik-vova&quot;,&quot;uid=Lopata_ZSSKCargo&quot;,&quot;uid=Lotfi_OSJD1&quot;,&quot;uid=Lubimova_rzd&quot;,&quot;uid=Lustov_BC&quot;,&quot;uid=Luzak_ZSSKCargo&quot;,&quot;uid=Lynnyk_UZ&quot;,&quot;uid=Majchrzak_PKP&quot;,&quot;uid=Makinen_VR&quot;,&quot;uid=Maltseva_rzd&quot;,&quot;uid=Mamytov_OSJD&quot;,&quot;uid=Mantell_UIC&quot;,&quot;uid=MarciulionisT_LG&quot;,&quot;uid=maslenka&quot;,&quot;uid=matta.mario&quot;,&quot;uid=Matta_ZSR&quot;,&quot;uid=Matyushev_SGtrans&quot;,&quot;uid=Meder_PKP&quot;,&quot;uid=Mihalco_Betamont&quot;,&quot;uid=mihaylova.Svetlana&quot;,&quot;uid=Mikalauskiene_LG&quot;,&quot;uid=Minenko_RZD&quot;,&quot;uid=mir92.2016&quot;,&quot;uid=Mitkov_nric&quot;,&quot;uid=Mlodawski_PKP&quot;,&quot;uid=moe2&quot;,&quot;uid=mo-yu_osjd&quot;,&quot;uid=MuratovA_KTZ&quot;,&quot;uid=mzilenas_lg&quot;,&quot;uid=n.svecova&quot;,&quot;uid=Natali_CTM&quot;,&quot;uid=Navora_UZ&quot;,&quot;uid=Nazha_UZ&quot;,&quot;uid=Nekrashevich_e&quot;,&quot;uid=Nemeth_MAV&quot;,&quot;uid=Neumar_ZSSKCargo&quot;,&quot;uid=Nguyen_OSJD1&quot;,&quot;uid=Niinepuu_OSJD&quot;,&quot;uid=Nisula_BC&quot;,&quot;uid=Nosenko_OSJD&quot;,&quot;uid=Novakova_CDCARGO&quot;,&quot;uid=O.Smoliy_UZ&quot;,&quot;uid=oblomov_rzd&quot;,&quot;uid=oleg_n2&quot;,&quot;uid=olgash_uz&quot;,&quot;uid=Olzhabaeva_KTZ&quot;,&quot;uid=Ovsenev_rzd&quot;,&quot;uid=ozinkowska_PLK&quot;,&quot;uid=panov_nric&quot;,&quot;uid=Pascan_OSJD&quot;,&quot;uid=paza00&quot;,&quot;uid=<a href="http://petr.hron_mindop.cr">petr.hron_mindop.cr</a>&quot;,&quot;uid=pevzner_rzd&quot;,&quot;uid=PingruiZhao_KZD&quot;,&quot;uid=plaske_plaske&quot;,&quot;uid=Platnitski_BCH&quot;,&quot;uid=pll68&quot;,&quot;uid=Pogrzebski_PKP&quot;,&quot;uid=PogrzebskiPKP_Intercity&quot;,&quot;uid=Pohibielko_PKP&quot;,&quot;uid=Poleshchuk_UZ&quot;,&quot;uid=prenosil_OLTIS&quot;,&quot;uid=qbs_xxs&quot;,&quot;uid=RakhimjonovBR_UTY&quot;,&quot;uid=Rakhmilevich_rzd&quot;,&quot;uid=reginaben_LG&quot;,&quot;uid=Reivytis_LG&quot;,&quot;uid=Renne_rzd&quot;,&quot;uid=ressina_rzd&quot;,&quot;uid=Rogojkina_rzd&quot;,&quot;uid=Roizina_PLASKE&quot;,&quot;uid=Rusy_CD&quot;,&quot;uid=Rychlik_ZSR&quot;,&quot;uid=rzd_eremina&quot;,&quot;uid=rzd_grigoreva&quot;,&quot;uid=rzd_kostikova&quot;,&quot;uid=rzd_renne&quot;,&quot;uid=sabadash@<a href="http://uz.gov.ua">uz.gov.ua</a>&quot;,&quot;uid=safarov_osjd&quot;,&quot;uid=Samuchovas_LG&quot;,&quot;uid=sanjaasuren_osjd&quot;,&quot;uid=Saracuta_CFM&quot;,&quot;uid=Sargelis_LG&quot;,&quot;uid=Sawchuk_BC&quot;,&quot;uid=Sebastian Budek&quot;,&quot;uid=Sedlakova_ZSSKCargo&quot;,&quot;uid=seiman_evr&quot;,&quot;uid=SeitmagambetovaKTZ&quot;,&quot;uid=sergeeva_rzd&quot;,&quot;uid=sergeeva1&quot;,&quot;uid=Serik.Bolysbaev2&quot;,&quot;uid=Sevastjanova E_lg&quot;,&quot;uid=Shalabaiev_UZ&quot;,&quot;uid=ShalyaginD_RZD&quot;,&quot;uid=ShestakovPA_IEDT&quot;,&quot;uid=shikhiyev_osjd&quot;,&quot;uid=shkayumkhodjaev_osjd&quot;,&quot;uid=Shoja_RAI&quot;,&quot;uid=Shurganova_AZD&quot;,&quot;uid=Simakov_BC&quot;,&quot;uid=Simoiu&quot;,&quot;uid=SimonL_RCH&quot;,&quot;uid=SimonneZs_MAV&quot;,&quot;uid=Sitekova_ZSR&quot;,&quot;uid=Skobtsov_UZ&quot;,&quot;uid=Skuratov_SGtrans&quot;,&quot;uid=Smailov_KTZ&quot;,&quot;uid=Smoljanova_n&quot;,&quot;uid=SMSokolov&quot;,&quot;uid=SokaitisE_LG&quot;,&quot;uid=solomakha_uz&quot;,&quot;uid=Somova_UZ&quot;,&quot;uid=sseverina&quot;,&quot;uid=Stanimir_UZ&quot;,&quot;uid=Starynin_LG&quot;,&quot;uid=Stefanov_NKZI&quot;,&quot;uid=stelmakh_UZ&quot;,&quot;uid=stepanenko_rzd&quot;,&quot;uid=Stern_MAV&quot;,&quot;uid=Stovba_rzd&quot;,&quot;uid=Suindikov_k&quot;,&quot;uid=Sulzenko_ldz&quot;,&quot;uid=Sutka_ZSR&quot;,&quot;uid=svetlichny_ttk&quot;,&quot;uid=Sychrovsky_SZDC&quot;,&quot;uid=Syzdykov_B.2013&quot;,&quot;uid=Szabone_MAV&quot;,&quot;uid=Szadkowski_PKP&quot;,&quot;uid=Tabakov_rzd&quot;,&quot;uid=Talanov_rzd&quot;,&quot;uid=tangvandung_VZD&quot;,&quot;uid=Tarabrin_TVEMA&quot;,&quot;uid=Tarasevic_LG&quot;,&quot;uid=Telebayev_KTZ&quot;,&quot;uid=TitovaEF_RZD&quot;,&quot;uid=Toleugaliyev_KTZH&quot;,&quot;uid=Tomek_SZDC&quot;,&quot;uid=Tregubov_rzd&quot;,&quot;uid=tsevegsuren&quot;,&quot;uid=Tsvetkov_NRIC&quot;,&quot;uid=tsyganok_uz&quot;,&quot;uid=TTSIKHELASHVILI_GR&quot;,&quot;uid=TurzakovaL_ZSSKCargo&quot;,&quot;uid=Tusupov_KTZ&quot;,&quot;uid=ubjd&quot;,&quot;uid=Ugrin_BC&quot;,&quot;uid=UteshevD_KTZ&quot;,&quot;uid=vaganovaon&quot;,&quot;uid=Valba_LG&quot;,&quot;uid=valenfalk&quot;,&quot;uid=VancevicieneML_LG&quot;,&quot;uid=VasileCodreanu&quot;,&quot;uid=vitalijus.smirnovas&quot;,&quot;uid=vkacmarcik&quot;,&quot;uid=VnukovaS_UZ&quot;,&quot;uid=Vopalecky_OSJD&quot;,&quot;uid=Voronina_EVR&quot;,&quot;uid=v-ovsyannikov&quot;,&quot;uid=Vravec_ZSR1&quot;,&quot;uid=Vytautas LGDC&quot;,&quot;uid=Vytpak&quot;,&quot;uid=wang-lianbin_osjd&quot;,&quot;uid=Wiechowska_OSJD&quot;,&quot;uid=wu-yang_osjd&quot;,&quot;uid=xia-baohe_kzd&quot;,&quot;uid=XYL_ITCMOR&quot;,&quot;uid=yanchev_nric&quot;,&quot;uid=yurkinav2&quot;,&quot;uid=Zajcevova_Betamont&quot;,&quot;uid=zanzarah&quot;,&quot;uid=Zen1971&quot;,&quot;uid=Zhankabaev_KTZ&quot;,&quot;uid=Zolboo&quot;,&quot;uid=zolotnikov_ttk&quot;,&quot;uid=zubilewicz_plk&quot;,&quot;uid=Zuk_MI&quot;} ; do /opt/IBM/ldap/V6.3/bin/idsldapsearch -D cn=root -w kvp_root_pwd -p 2389 -b cn=users,o=rzd $i &gt; &quot;${i:4:${#i}}&quot;.ldif; done</p><p>перенесли к нам</p><p>поколдовали над льдифами<br />sed -i &quot;s/=/: /&quot; *.ldif<br />sed -i '1!b;s/uid: /dn: uid=/' *.ldif</p><p>вручную поменяли названия файлов, где были пробелы</p><p>залили юзеров к нам<br />for f in $(ls -1) ; do /opt/IBM/ldap/V6.3/bin/idsldapadd -p 2389 -D cn=root -w kvp_root_pwd -i /tmp/osjd-users/$f ; done</p><h5>ГРУППЫ</h5><p>формат льдифа для заливки</p><p>dn: cn=OSJD.Staff,cn=groups,o=rzd<br />changetype: modify<br />add: uniquemember<br />uniquemember:uid=Gil_PKP,cn=users,o=rzd<br />uniquemember:uid=Bernatonis_LG,cn=users,o=rzd</p><p>заливка<br />/opt/IBM/ldap/V6.3/bin/idsldapmodify -D cn=root -w kvp_root_pwd -p 2389 -f /tmp/group-osjdstaff.ldif</p><p>проверка заливки<br />/opt/IBM/ldap/V6.3/bin/idsldapsearch -D cn=root -w kvp_root_pwd -p 2389 -b cn=osjd.staff,cn=groups,o=rzd &quot;objectclass=*&quot; ibm-allmembers</p><p>группы osjd EditorsManagers у нас не было</p><p>заведено</p><p>формат льдифа<br />dn: cn=osjd EditorsManagers,cn=groups,o=rzd<br />objectclass: top<br />objectClass: groupofuniquenames<br />cn: osjd EditorsManagers<br />uniqueMember: uid=Budek_OSJD,cn=users,o=rzd<br />uniqueMember: uid=Sebastian Budek,cn=users,o=rzd</p><p>/opt/IBM/ldap/V6.3/bin/idsldapadd -D cn=root -w kvp_root_pwd -p 2389 -f /tmp/group-osjdeditors.ldif</p><p>группа&nbsp;osjd EditorsManagers добавлена подгруппой к&nbsp;EditorsManagers.portlet</p><p><span style="font-size: 16.0px;font-weight: bold;letter-spacing: 0.0px;">Со стороны WebSpherePortal</span></p><p>для прода взят бывший портал альфы, изменены адреса</p><p><a class="w-link" href="http://172.22.2.191/" title="Пройти по ссылке">172.22.2.191</a><span style="color: rgb(35,46,66);">&nbsp;- ps-dmgr</span><br /><a class="w-link" href="http://172.22.2.192/" title="Пройти по ссылке">172.22.2.192</a><span style="color: rgb(35,46,66);">&nbsp;- ps-app01</span><br /><a class="w-link" href="http://172.22.2.193/" title="Пройти по ссылке">172.22.2.193</a><span style="color: rgb(35,46,66);">&nbsp;- ps-app03</span></p><p>для ci как и для всего используется psi</p><h3>Со стороны БД</h3><h5>поднятие БД</h5><p><span style="color: rgb(35,46,66);">БД прода на 172,22,2,240</span></p><p><span style="color: rgb(35,46,66);">/usr/pgsql-12/bin/pg_ctl initdb -D //var/lib/pgsql/12/data-osjd</span><br /><span style="color: rgb(35,46,66);">cd /var/lib/pgsql/12/data-osjd</span><br /><span style="color: rgb(35,46,66);">в постгрес.конф исправить порт 5435</span><br /><span style="color: rgb(35,46,66);">и адрес прослушивания на '*'</span></p><p>в pg_hba.conf исправлены правила доступа</p><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="0a2d5f50-7c53-4be4-8acc-9a875de18b68"><ac:parameter ac:name="title">pg_hba.conf - кусок</ac:parameter><ac:plain-text-body><![CDATA[TYPE DATABASE USER ADDRESS METHOD
"local" is for Unix domain socket connections only
local all all trust
IPv4 local connections:
host all all samenet password
IPv6 local connections:
host all all ::1/128 md5
Allow replication connections from localhost, by a user with the
replication privilege.
local replication all trust
host replication all samenet password
host replication all ::1/128 md5]] ></ac:plain-text-body></ac:structured-macro><p><br />в /lib/systemd/system создан сервис<br />postgresql-12-osjd.service<br />обратить внимание на<br />Environment=PGDATA=/var/lib/pgsql/12/data-osjd/</p><p>добавлен скрипт снятия эталона по крону каждую ночь</p><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="880497b9-8763-4e84-875f-12697220b752"><ac:parameter ac:name="title">/opt/INEX/scripts/etalon-osjd.sh</ac:parameter><ac:plain-text-body><![CDATA[#!/bin/bash

sudo -u postgres pg_dump -p 5435 -f /home/postgres/main.backup-osjd-$(date +%F) main
sed -i "s/osjd.org/osjd.local.oooinex.ru/g" /home/postgres/main.backup-osjd-$(date +%F)
gzip -c /home/postgres/main.backup-osjd-$(date +%F) > /tmp/osjd.gzip
sshpass -p "ghjuhfvvf" scp /tmp/osjd.gzip inex@172.22.2.51:/mnt/ftp/gvc/.git-shared-storage/osjd/setup/etalon-maindb/dumps/main.backup.gz

]] ></ac:plain-text-body></ac:structured-macro><p><br /></p><h5>слияние 5-ти БД в одну<br /><br /></h5><ul style="list-style-type: square;"><li>acl<ul style="list-style-type: square;"><li>Произведён экспорт данных из БД acl продуктива - права для групп osjd и для InEx<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql</a></li></ul></li></ul></li><li>media<ul style="list-style-type: square;"><li>Написан небольшой скрипт для выкачивания картинок с прода.&nbsp;<a href="https://gitlab.oooinex.ru/osjd/setup/media-export">https://gitlab.oooinex.ru/osjd/setup/media-export</a><ul style="list-style-type: square;"><li>Развернут на 13ой в примонтированном цефе - /mnt/cephfs/osjd/media-export и настроен на прод osjd, запускать через ./run.sh</li><li>На вход нужно подать данные для подключения к БД (в .env файле), где есть таблица cwp_media.resource_metadata с метаданными картинок, которые нужно скачать</li><li>По метаданным строятся урлы до картинок и скачиваются в папку resources внутри контейнера</li><li>Можно смонтировать папку из контейнера сразу в нужную pvc директорию, чтобы картинки сразу появлялись на ПТК</li><li>При повторном запуске, есть возможность пропускать картинки, которые уже скачали (проверяет наличие файла на диске)</li></ul></li><li>Сами метаданные картинок собрали с прода и через поиск битых ссылок по сайту<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple</a></li></ul></li></ul></li><li>content<ul style="list-style-type: square;"><li>Взяли урезанный дамп с продуктива (приходящий эталон)</li><li>Перенесли данные с прода силами Виталия и Святослава (есть чсеты в репозитории osjd/db)<br /><br /></li></ul></li></ul><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="3d1834fc-0a32-4d70-a209-1c73f82cb11a"><ac:parameter ac:name="language">sql</ac:parameter><ac:parameter ac:name="title">Скрипты</ac:parameter><ac:parameter ac:name="collapse">true</ac:parameter><ac:plain-text-body><![CDATA[-- Составляем список таблиц, которые могут содержать файлы.
select 'select '''||t1.table_name||''' as table_name, '||t1.column_name||' as media_id from '||t1.table_schema||'.'||t1.table_name||' where '||t1.column_name||' is not null and (cvpm_id is null or cvpm_id in (68, 67, 51)) union all' 
from information_schema.columns t1, information_schema.columns t2
where t2.table_schema = t1.table_schema
and t2.table_name = t1.table_name
and replace(t2.column_name, '_size', '') = replace(t1.column_name, '_id', '')
and t1.column_name like '%_id'
and t2.column_name like '%_size'
and t1.table_name in (select table_name FROM information_schema.tables t WHERE table_schema = 'cwp' and table_type = 'BASE TABLE')
order by t1.table_name;

-- Получившийся список селектов придется прореживать, т.к. не во всех таблицах есть колонка cvpm_id, из-за чего появится ошибка, 
-- но в этом случае по имени таблицы становится понятно, к какому порталу она относится. Также в последней строке надо удалить union all. 
-- Затем список селектов надо вставить
select media_id||',' from (
-- сюда
) t order by 1;
-- и выполнить в content-db.

-- Результат выполнения надо вставить
select id
from cwp_media.resource_metadata
where id in (SELECT l.resource_id FROM cwp_media.resources_links l WHERE l.vp_id in (68, 67, 51))
or domain_id in (68, 67, 51)
or id in (
-- сюда
)
order by id;
-- и выполнить в media-db. Так получим список айдишников файлов, которые могут относиться к ОСЖД 
(скорее всего, будут лишние файлы, но это лучше, чем недостача).

-- Что касается прочих данных (не файлов), то был составлен список таблиц.
-- Наверно, пока наиболее надежный способ - пройтись по админке и вручную составить
-- список армов, а на его основе - список таблиц. После этого в Бивере генерировать
-- инсерты с обработкой ошибок (on conflict do nothing). Обновлять/удалять данные сложнее, т.к.
-- надо сравнивать с продом. В этот раз делал силами Бивера путем сравнения
-- результатов селекта, например,
SELECT * FROM cwp.app_structure_staticpages WHERE structure_id in (
  select s.id from cwp.cham_structure_main s where s.cvpm_id in (51, 67, 68)
) order by id;
-- на двух птк в WinMerge.
-- Но с таким сравнением текстов статики возникла проблема.
SELECT * FROM cwp.app_staticpages_locale WHERE cvpm_id in (51, 67, 68) order by id;
-- Бивер позволяет показывать результаты в виде таблицы или текста.
-- В первом варианте при копипасте текстов с тегами добавлялись лишние кавычки, что мешало сравнивать.
-- При показе результатов в виде текста кавычки не добавлялись, сравнивать было намного удобнее.
-- Такой способ сравнения - муторный, много механических действий.
-- Если сайт небольшой, то можно рассмотреть другой вариант актуализации данных - изменить скрипт
-- чистки дампа бд при создании эталона, который регулярно приезжает с прода, чтобы отменить удаление
-- данных переносимого портала. Возможный минус - эталон станет слишком большим, и механизм его
-- получения с прода сломается. Ну и временной лаг - надо ждать ночи.

Важно!!! При переносе данных имеет смысл отключать или дропать триггеры, чтобы они не меняли данные (даже для сравнения это удобнее), 
а потом восстанавливать. Т.е. удаляем триггеры, делаем DML, создаем триггеры.
Удаляем/создаем - потому что скрипты на это есть в Бивере на вкладке DDL таблицы.
Можно вообще подготовить скрипт, который будет записывать куда-то состояние всех триггеров таблицы, выключать их,
а потом включать их, чтобы не включить выключенный, если такие вообще есть (в оракле были).]] ></ac:plain-text-body></ac:structured-macro><h3>Со стороны фронта</h3><p>Помимо слоев, используемых в отрисовке страниц, собраны слои и шаблоны для индексации контента</p><p>К АРМам для заполнения таблиц ОСЖД добавлены служебные АРМы (дерево документов, присоединенные к документам файлы и т.д)</p><p>К специфическим скриптам ОСЖД (раскрываемое верхнее меню, слайдер) добавлены общие компоненты (inex-mixins, jqui-datepicker)&nbsp;</p><p>Метаданные АРМов перенесли целиком, дабы ничего не забыть</p><h3>Со стороны nginx и ДНС</h3><p>DNS ведёт на&nbsp;94.159.31.10 (внутри - 172.22.2.251).</p><p>С&nbsp;172.22.2.251 - на&nbsp;172.22.2.95.</p><p>На&nbsp;172.22.2.95 контексты&nbsp;/wps, /admin_css, /admin_js, /js, /fonts, /mccbuilder, /mccenabler, /portal_dojo, /PortalTheme, /searchfeed, /utils и / (строго, без продолжения) ведут на 172.22.2.192 и 172.22.2.193 (для разработческого - на 172.22.2.52), Прочие - в Кубер.</p><h3>Со стороны установщика</h3><p>Установщик был подготовлен к работе с проектом ОСДЖ (продуктивом osjd.org и ПТК CI osjd.odev.oooinex.ru) следующим образом:</p><ol><li>Добавлены переменные для проекта (там же прописывается состав приложений, доменное имя, ветки, токены и тд) playbooks/vars/<a class="w-link" href="http://osjd.org/" title="Пройти по ссылке">osjd.org</a></li><li>Добавлены настройки самого ансибля для проекта осжд playbooks/inventory/osjd.ini</li><li>Добавлены шаблоны (конфиги nginx и записи в ДНС) для проекта осжд playbooks/files/osjd</li><li>Поправлен скрипт ptk_<a class="w-link" href="http://controll.sh/" title="Пройти по ссылке">controll.sh</a>&nbsp;(чтобы запускался с проектом осжд тоже)</li></ol><h3>Со стороны мониторинга</h3><p>Добавлен график</p><p><a href="https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1">https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1</a></p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-51-39.png" /></ac:image></p><p>В Кибане логи в mwk:</p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-54-2.png" /></ac:image></p><h2>Какие проверки были сделаны:</h2><ol><li>Админка работает, армы нового ПТК открываются, история изменений сохраняется (где имеется)</li><li>Страницы сайта загружаются, есть все картинки, данные (новости, статьи итд)</li><li>Поиск на сайте работает (и индексация изменений)</li><li>Проверка прав в ACL работает (и права acl перенесены)</li><li>Проанализировали сайт на отсутствие битых ссылок (не 200)</li></ol><p><br /></p>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79435128</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545376</id>
<property name="name"><![CDATA[macro-count.contributors]]></property>
<property name="stringValue"><![CDATA[1-1]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545377</id>
<property name="name"><![CDATA[macro-create-events-published-for-version]]></property>
<property name="stringValue"/><property name="longValue">1</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545378</id>
<property name="name"><![CDATA[macroNames]]></property>
<property name="stringValue"><![CDATA[recently-updated,tip,contributors]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466115</id>
<property name="body"><![CDATA[<ol><li>продуктив и ci в кластере MWK<br /><br /><br /></li><li>продуктив БД на 172.22.2.240 порт 5435</li></ol>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434232</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545374</id>
<property name="name"><![CDATA[macro-count.recently-updated]]></property>
<property name="stringValue"><![CDATA[1-1]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545375</id>
<property name="name"><![CDATA[macro-count.tip]]></property>
<property name="stringValue"><![CDATA[1-1]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466105</id>
<property name="body"><![CDATA[<ac:layout><ac:layout-section ac:type="single"><ac:layout-cell>
<ac:structured-macro ac:name="tip" ac:schema-version="1" ac:macro-id="10ee33d0-bba0-4e75-b9d6-e0fb053f18bd"><ac:parameter ac:name="title">Welcome to your new space!</ac:parameter><ac:rich-text-body><p>Confluence spaces are great for sharing content and news with your team. This is your home page. Right now it shows recent space activity, but you can customize this page in any way you like.</p></ac:rich-text-body></ac:structured-macro><h2>Complete these tasks to get started</h2><ac:task-list>
<ac:task>
<ac:task-id>85</ac:task-id>
<ac:task-status>incomplete</ac:task-status>
<ac:task-body><strong>Edit this home page</strong> - Click <em>Edit</em> in the top right of this screen to customize your Space home page</ac:task-body>
</ac:task>
<ac:task>
<ac:task-id>86</ac:task-id>
<ac:task-status>incomplete</ac:task-status>
<ac:task-body><strong>Create your first page</strong> - Click the <em>Create</em> button in the header to get started</ac:task-body>
</ac:task>
<ac:task>
<ac:task-id>87</ac:task-id>
<ac:task-status>incomplete</ac:task-status>
<ac:task-body><strong>Brand your Space</strong> - Click <em>Configure Sidebar</em> in the left panel to update space details and logo</ac:task-body>
</ac:task>
<ac:task>
<ac:task-id>88</ac:task-id>
<ac:task-status>incomplete</ac:task-status>
<ac:task-body><strong>Set permissions</strong> - Click <em>Space Tools</em> in the left sidebar to update permissions and give others access</ac:task-body>
</ac:task>
</ac:task-list><p>&nbsp;</p></ac:layout-cell></ac:layout-section><ac:layout-section ac:type="two_equal"><ac:layout-cell>
<h2>Recent space activity</h2><p><ac:structured-macro ac:name="recently-updated" ac:schema-version="1" ac:macro-id="5ca60316-5fc8-4cc3-84c3-64d9c9eef976"><ac:parameter ac:name="types">page, comment, blogpost</ac:parameter><ac:parameter ac:name="max">5</ac:parameter><ac:parameter ac:name="hideHeading">true</ac:parameter><ac:parameter ac:name="theme">social</ac:parameter></ac:structured-macro></p></ac:layout-cell><ac:layout-cell>
<h2>Space contributors</h2><p><ac:structured-macro ac:name="contributors" ac:schema-version="1" ac:macro-id="b620d485-cecc-4e34-b777-beba7b9e56f0"><ac:parameter ac:name="mode">list</ac:parameter><ac:parameter ac:name="scope">descendants</ac:parameter><ac:parameter ac:name="limit">5</ac:parameter><ac:parameter ac:name="showLastTime">true</ac:parameter><ac:parameter ac:name="order">update</ac:parameter></ac:structured-macro></p></ac:layout-cell></ac:layout-section><ac:layout-section ac:type="single"><ac:layout-cell>
<p>&nbsp;</p></ac:layout-cell></ac:layout-section></ac:layout>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434221</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466106</id>
<property name="body"><![CDATA[<ac:layout><ac:layout-section ac:type="single"><ac:layout-cell><p>пространство, посвященное размещению проекта ОСЖД на ресурсах ИНЭКС-а</p><ac:structured-macro ac:name="tip" ac:schema-version="1" ac:macro-id="10ee33d0-bba0-4e75-b9d6-e0fb053f18bd"><ac:parameter ac:name="title">Welcome to your new space!</ac:parameter><ac:rich-text-body><p>Confluence spaces are great for sharing content and news with your team. This is your home page. Right now it shows recent space activity, but you can customize this page in any way you like.</p></ac:rich-text-body></ac:structured-macro><h2>Complete these tasks to get started</h2><ac:task-list>
<ac:task>
<ac:task-id>85</ac:task-id>
<ac:task-status>incomplete</ac:task-status>
<ac:task-body><strong>Edit this home page</strong> - Click <em>Edit</em> in the top right of this screen to customize your Space home page</ac:task-body>
</ac:task>
<ac:task>
<ac:task-id>86</ac:task-id>
<ac:task-status>incomplete</ac:task-status>
<ac:task-body><strong>Create your first page</strong> - Click the <em>Create</em> button in the header to get started</ac:task-body>
</ac:task>
<ac:task>
<ac:task-id>87</ac:task-id>
<ac:task-status>incomplete</ac:task-status>
<ac:task-body><strong>Brand your Space</strong> - Click <em>Configure Sidebar</em> in the left panel to update space details and logo</ac:task-body>
</ac:task>
<ac:task>
<ac:task-id>88</ac:task-id>
<ac:task-status>incomplete</ac:task-status>
<ac:task-body><strong>Set permissions</strong> - Click <em>Space Tools</em> in the left sidebar to update permissions and give others access</ac:task-body>
</ac:task>
</ac:task-list><p><br /></p></ac:layout-cell></ac:layout-section><ac:layout-section ac:type="two_equal"><ac:layout-cell><h2>Recent space activity</h2><p><ac:structured-macro ac:name="recently-updated" ac:schema-version="1" ac:macro-id="5ca60316-5fc8-4cc3-84c3-64d9c9eef976"><ac:parameter ac:name="types">page, comment, blogpost</ac:parameter><ac:parameter ac:name="max">5</ac:parameter><ac:parameter ac:name="hideHeading">true</ac:parameter><ac:parameter ac:name="theme">social</ac:parameter></ac:structured-macro></p></ac:layout-cell><ac:layout-cell><h2>Space contributors</h2><p><ac:structured-macro ac:name="contributors" ac:schema-version="1" ac:macro-id="b620d485-cecc-4e34-b777-beba7b9e56f0"><ac:parameter ac:name="mode">list</ac:parameter><ac:parameter ac:name="scope">descendants</ac:parameter><ac:parameter ac:name="limit">5</ac:parameter><ac:parameter ac:name="showLastTime">true</ac:parameter><ac:parameter ac:name="order">update</ac:parameter></ac:structured-macro></p></ac:layout-cell></ac:layout-section><ac:layout-section ac:type="single"><ac:layout-cell><p><br /></p></ac:layout-cell></ac:layout-section></ac:layout>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434222</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466107</id>
<property name="body"><![CDATA[<ac:layout><ac:layout-section ac:type="single"><ac:layout-cell><p>пространство, посвященное размещению проекта ОСЖД на ресурсах ИНЭКС-а</p><ac:structured-macro ac:name="tip" ac:schema-version="1" ac:macro-id="10ee33d0-bba0-4e75-b9d6-e0fb053f18bd"><ac:parameter ac:name="title">Welcome to your new space!</ac:parameter><ac:rich-text-body><p>Confluence spaces are great for sharing content and news with your team. This is your home page. Right now it shows recent space activity, but you can customize this page in any way you like.</p></ac:rich-text-body></ac:structured-macro><h2>Complete these tasks to get started</h2><ac:task-list>
<ac:task>
<ac:task-id>85</ac:task-id>
<ac:task-status>incomplete</ac:task-status>
<ac:task-body><strong>Edit this home page</strong> - Click <em>Edit</em> in the top right of this screen to customize your Space home page</ac:task-body>
</ac:task>
<ac:task>
<ac:task-id>86</ac:task-id>
<ac:task-status>incomplete</ac:task-status>
<ac:task-body><strong>Create your first page</strong> - Click the <em>Create</em> button in the header to get started</ac:task-body>
</ac:task>
<ac:task>
<ac:task-id>87</ac:task-id>
<ac:task-status>incomplete</ac:task-status>
<ac:task-body><strong>Brand your Space</strong> - Click <em>Configure Sidebar</em> in the left panel to update space details and logo</ac:task-body>
</ac:task>
<ac:task>
<ac:task-id>88</ac:task-id>
<ac:task-status>incomplete</ac:task-status>
<ac:task-body><strong>Set permissions</strong> - Click <em>Space Tools</em> in the left sidebar to update permissions and give others access</ac:task-body>
</ac:task>
</ac:task-list><p><br /></p></ac:layout-cell></ac:layout-section><ac:layout-section ac:type="two_equal"><ac:layout-cell><h2>Recent space activity</h2><p><ac:structured-macro ac:name="recently-updated" ac:schema-version="1" ac:macro-id="5ca60316-5fc8-4cc3-84c3-64d9c9eef976"><ac:parameter ac:name="types">page, comment, blogpost</ac:parameter><ac:parameter ac:name="max">5</ac:parameter><ac:parameter ac:name="hideHeading">true</ac:parameter><ac:parameter ac:name="theme">social</ac:parameter></ac:structured-macro></p></ac:layout-cell><ac:layout-cell><h2>Space contributors</h2><p><ac:structured-macro ac:name="contributors" ac:schema-version="1" ac:macro-id="b620d485-cecc-4e34-b777-beba7b9e56f0"><ac:parameter ac:name="mode">list</ac:parameter><ac:parameter ac:name="scope">descendants</ac:parameter><ac:parameter ac:name="limit">5</ac:parameter><ac:parameter ac:name="showLastTime">true</ac:parameter><ac:parameter ac:name="order">update</ac:parameter></ac:structured-macro></p></ac:layout-cell></ac:layout-section><ac:layout-section ac:type="single"><ac:layout-cell><p><br /></p></ac:layout-cell></ac:layout-section></ac:layout>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434224</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466108</id>
<property name="body"><![CDATA[<ac:layout><ac:layout-section ac:type="single"><ac:layout-cell><p>пространство, посвященное размещению проекта ОСЖД на ресурсах ИНЭКС-а</p><ac:structured-macro ac:name="tip" ac:schema-version="1" ac:macro-id="10ee33d0-bba0-4e75-b9d6-e0fb053f18bd"><ac:parameter ac:name="title">Welcome to your new space!</ac:parameter><ac:rich-text-body><p>Confluence spaces are great for sharing content and news with your team. This is your home page. Right now it shows recent space activity, but you can customize this page in any way you like.</p></ac:rich-text-body></ac:structured-macro><h2>Complete these tasks to get started</h2><ac:task-list>
<ac:task>
<ac:task-id>85</ac:task-id>
<ac:task-status>incomplete</ac:task-status>
<ac:task-body><strong>Edit this home page</strong> - Click <em>Edit</em> in the top right of this screen to customize your Space home page</ac:task-body>
</ac:task>
<ac:task>
<ac:task-id>86</ac:task-id>
<ac:task-status>incomplete</ac:task-status>
<ac:task-body><strong>Create your first page</strong> - Click the <em>Create</em> button in the header to get started</ac:task-body>
</ac:task>
<ac:task>
<ac:task-id>87</ac:task-id>
<ac:task-status>complete</ac:task-status>
<ac:task-body><strong>Brand your Space</strong> - Click <em>Configure Sidebar</em> in the left panel to update space details and logo</ac:task-body>
</ac:task>
<ac:task>
<ac:task-id>88</ac:task-id>
<ac:task-status>incomplete</ac:task-status>
<ac:task-body><strong>Set permissions</strong> - Click <em>Space Tools</em> in the left sidebar to update permissions and give others access</ac:task-body>
</ac:task>
</ac:task-list><p><br /></p></ac:layout-cell></ac:layout-section><ac:layout-section ac:type="two_equal"><ac:layout-cell><h2>Recent space activity</h2><p><ac:structured-macro ac:name="recently-updated" ac:schema-version="1" ac:macro-id="5ca60316-5fc8-4cc3-84c3-64d9c9eef976"><ac:parameter ac:name="types">page, comment, blogpost</ac:parameter><ac:parameter ac:name="max">5</ac:parameter><ac:parameter ac:name="hideHeading">true</ac:parameter><ac:parameter ac:name="theme">social</ac:parameter></ac:structured-macro></p></ac:layout-cell><ac:layout-cell><h2>Space contributors</h2><p><ac:structured-macro ac:name="contributors" ac:schema-version="1" ac:macro-id="b620d485-cecc-4e34-b777-beba7b9e56f0"><ac:parameter ac:name="mode">list</ac:parameter><ac:parameter ac:name="scope">descendants</ac:parameter><ac:parameter ac:name="limit">5</ac:parameter><ac:parameter ac:name="showLastTime">true</ac:parameter><ac:parameter ac:name="order">update</ac:parameter></ac:structured-macro></p></ac:layout-cell></ac:layout-section><ac:layout-section ac:type="single"><ac:layout-cell><p><br /></p></ac:layout-cell></ac:layout-section></ac:layout>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434225</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466622</id>
<property name="body"><![CDATA[<p>С 26 апреля 2021 года по 30 апреля 2021 года был произведен переезд сайта ОСЖД из ГВЦ в ИнЭкс (а именно в кластер kubernetes группы проектов mwk)</p><h2>Что было сделано:</h2><h3>Со стороны k8s</h3><p>Для повышения стабильности работы кластера был добавлен второй ингресс<br /><span style="color: rgb(35,46,66);">Обновление (скейл) клестера был произведен с помощью kubespray (лежит на боссе в /root/kubespray)</span><br /><span style="color: rgb(35,46,66);">В inventory/prod/inventory.ini добавлен&nbsp;</span>ingress-2 по аналогии с&nbsp;ingress-1<br /><span style="color: rgb(35,46,66);">После чего была запущена команда скейла кластера: ansible-playbook -u root -i inventory/prod/inventory.ini scale.yml -b --diff</span></p><h3>Со стороны БД</h3><ul style="list-style-type: square;"><li>acl</li><li>media</li><li>content</li></ul><h3>Со стороны фронта</h3><p>--------------------</p><p>Помимо слоев, используемых в отрисовке страниц, собраны слои и шаблоны для индексации контента</p><p>К АРМам для заполнения таблиц ОСЖД добавлены служебные АРМы (дерево документов, присоединенные к документам файлы и т.д)</p><p>К специфическим скриптам ОСЖД (раскрываемое верхнее меню, слайдер) добавлены общие компоненты (inex-mixins, jqui-datepicker)&nbsp;</p><p>--------------------</p><p><br /></p><h3>Со стороны nginx и ДНС</h3><p>DNS ведёт на&nbsp;94.159.31.10 (внутри - 172.22.2.251).</p><p>С&nbsp;172.22.2.251 - на&nbsp;172.22.2.95.</p><p>На&nbsp;172.22.2.95 контексты&nbsp;/wps, /admin_css, /admin_js, /js, /fonts, /mccbuilder, /mccenabler, /portal_dojo, /PortalTheme, /searchfeed, /utils и / (строго, без продолжения) ведут на 172.22.2.192 и 172.22.2.193 (для разработческого - на 172.22.2.52), Прочие - в Кубер.</p><h3>Со стороны установщика</h3><p>Установщик был подготовлен к работе с проектом ОСДЖ (продуктивом osjd.org и ПТК CI osjd.odev.oooinex.ru) следующим образом:</p><ol><li>Добавлены переменные для проекта (там же прописывается состав приложений, доменное имя, ветки, токены и тд) playbooks/vars/<a class="w-link" href="http://osjd.org/" title="Пройти по ссылке">osjd.org</a></li><li>Добавлены настройки самого ансибля для проекта осжд playbooks/inventory/osjd.ini</li><li>Добавлены шаблоны (конфиги nginx и записи в ДНС) для проекта осжд playbooks/files/osjd</li><li>Поправлен скрипт ptk_<a class="w-link" href="http://controll.sh/" title="Пройти по ссылке">controll.sh</a>&nbsp;(чтобы запускался с проектом осжд тоже)</li></ol><h3>Со стороны мониторинга</h3><p>Добавлен график</p><p><a href="https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1">https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1</a></p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-51-39.png" /></ac:image></p><p>В Кибане логи в mwk:</p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-54-2.png" /></ac:image></p><h2>Какие проверки были сделаны:</h2><ol><li>Админка работает, армы нового ПТК открываются, история изменений сохраняется (где имеется)</li><li>Страницы сайта загружаются, есть все картинки, данные (новости, статьи итд)</li><li>Поиск на сайте работает (и индексация изменений)</li><li>Проверка прав в ACL работает (и права acl перенесены)</li></ol><p><br /></p>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434824</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466614</id>
<property name="body"><![CDATA[<p>С 26 апреля 2021 года по 30 апреля 2021 года был произведен переезд сайта ОСЖД из ГВЦ в ИнЭкс (а именно в кластер kubernetes группы проектов mwk)</p><h2>Что было сделано:</h2><h3>Со стороны k8s</h3><p>Для повышения стабильности работы кластера был добавлен второй ингресс<br /><span style="color: rgb(35,46,66);">Обновление (скейл) клестера был произведен с помощью kubespray (лежит на боссе в /root/kubespray)</span><br /><span style="color: rgb(35,46,66);">В inventory/prod/inventory.ini добавлен&nbsp;</span>ingress-2 по аналогии с&nbsp;ingress-1<br /><span style="color: rgb(35,46,66);">После чего была запущена команда скейла кластера: ansible-playbook -u root -i inventory/prod/inventory.ini scale.yml -b --diff</span></p><h3>Со стороны БД</h3><ul style="list-style-type: square;"><li>acl</li><li>media</li><li>content</li></ul><h3>Со стороны фронта</h3><p>--------------------</p><p>Помимо слоев, используемых в отрисовке страниц, собраны слои и шаблоны для индексации контента</p><p>К АРМам для заполнения таблиц ОСЖД добавлены служебные АРМы (дерево документов, присоединенные к документам файлы и т.д)</p><p>К специфическим скриптам ОСЖД (раскрываемое верхнее меню, слайдер) добавлены общие компоненты (inex-mixins, jqui-datepicker)&nbsp;</p><p>--------------------</p><p><br /></p><h3>Со стороны nginx и ДНС</h3><p>--------------------</p><h3>Со стороны установщика</h3><p>Установщик был подготовлен к работе с проектом ОСДЖ (продуктивом osjd.org и ПТК CI osjd.odev.oooinex.ru) следующим образом:</p><ol><li>Добавлены переменные для проекта (там же прописывается состав приложений, доменное имя, ветки, токены и тд) playbooks/vars/<a class="w-link" href="http://osjd.org/" title="Пройти по ссылке">osjd.org</a></li><li>Добавлены настройки самого ансибля для проекта осжд playbooks/inventory/osjd.ini</li><li>Добавлены шаблоны (конфиги nginx и записи в ДНС) для проекта осжд playbooks/files/osjd</li><li>Поправлен скрипт ptk_<a class="w-link" href="http://controll.sh/" title="Пройти по ссылке">controll.sh</a>&nbsp;(чтобы запускался с проектом осжд тоже)</li></ol><h3>Со стороны мониторинга</h3><p>Добавлен график</p><p><a href="https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1">https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1</a></p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-51-39.png" /></ac:image></p><p>В Кибане логи в mwk:</p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-54-2.png" /></ac:image></p><h2>Какие проверки были сделаны:</h2><ol><li>Админка работает, армы нового ПТК открываются, история изменений сохраняется (где имеется)</li><li>Страницы сайта загружаются, есть все картинки, данные (новости, статьи итд)</li><li>Поиск на сайте работает (и индексация изменений)</li><li>Проверка прав в ACL работает (и права acl перенесены)</li></ol><p><br /></p>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434816</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466102</id>
<property name="body"><![CDATA[]]></property>
<property name="content" class="SpaceDescription" package="com.atlassian.confluence.spaces"><id name="id">79434218</id>
</property>
<property name="bodyType">0</property>
</object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466615</id>
<property name="body"><![CDATA[<p>С 26 апреля 2021 года по 30 апреля 2021 года был произведен переезд сайта ОСЖД из ГВЦ в ИнЭкс (а именно в кластер kubernetes группы проектов mwk)</p><h2>Что было сделано:</h2><h3>Со стороны k8s</h3><p>Для повышения стабильности работы кластера был добавлен второй ингресс<br /><span style="color: rgb(35,46,66);">Обновление (скейл) клестера был произведен с помощью kubespray (лежит на боссе в /root/kubespray)</span><br /><span style="color: rgb(35,46,66);">В inventory/prod/inventory.ini добавлен&nbsp;</span>ingress-2 по аналогии с&nbsp;ingress-1<br /><span style="color: rgb(35,46,66);">После чего была запущена команда скейла кластера: ansible-playbook -u root -i inventory/prod/inventory.ini scale.yml -b --diff</span></p><h3>Со стороны БД</h3><ul style="list-style-type: square;"><li>acl</li><li>media</li><li>content</li></ul><h3>Со стороны фронта</h3><p>--------------------</p><p>Помимо слоев, используемых в отрисовке страниц, собраны слои и шаблоны для индексации контента</p><p>К АРМам для заполнения таблиц ОСЖД добавлены служебные АРМы (дерево документов, присоединенные к документам файлы и т.д)</p><p>К специфическим скриптам ОСЖД (раскрываемое верхнее меню, слайдер) добавлены общие компоненты (inex-mixins, jqui-datepicker)&nbsp;</p><p>--------------------</p><p><br /></p><h3>Со стороны nginx и ДНС</h3><p>DNS ведёт на&nbsp;94.159.31.10 (внутри - 172.22.2.251).</p><p>С&nbsp;172.22.2.251 - на&nbsp;172.22.2.95.</p><p>На&nbsp;172.22.2.95 контексты&nbsp;/wps, /admin_css, /admin_js, /js, /fonts, /mccbuilder, /mccenabler, /portal_dojo, /PortalTheme, /searchfeed, /utils и / (строго, без продолжения) ведут на 172.22.2.192 и 172.22.2.193, Прочие - в Кубер.</p><h3>Со стороны установщика</h3><p>Установщик был подготовлен к работе с проектом ОСДЖ (продуктивом osjd.org и ПТК CI osjd.odev.oooinex.ru) следующим образом:</p><ol><li>Добавлены переменные для проекта (там же прописывается состав приложений, доменное имя, ветки, токены и тд) playbooks/vars/<a class="w-link" href="http://osjd.org/" title="Пройти по ссылке">osjd.org</a></li><li>Добавлены настройки самого ансибля для проекта осжд playbooks/inventory/osjd.ini</li><li>Добавлены шаблоны (конфиги nginx и записи в ДНС) для проекта осжд playbooks/files/osjd</li><li>Поправлен скрипт ptk_<a class="w-link" href="http://controll.sh/" title="Пройти по ссылке">controll.sh</a>&nbsp;(чтобы запускался с проектом осжд тоже)</li></ol><h3>Со стороны мониторинга</h3><p>Добавлен график</p><p><a href="https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1">https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1</a></p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-51-39.png" /></ac:image></p><p>В Кибане логи в mwk:</p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-54-2.png" /></ac:image></p><h2>Какие проверки были сделаны:</h2><ol><li>Админка работает, армы нового ПТК открываются, история изменений сохраняется (где имеется)</li><li>Страницы сайта загружаются, есть все картинки, данные (новости, статьи итд)</li><li>Поиск на сайте работает (и индексация изменений)</li><li>Проверка прав в ACL работает (и права acl перенесены)</li></ol><p><br /></p>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434817</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466598</id>
<property name="body"><![CDATA[<p>С 26 августа 2021 года по 30 августа 2021 года был произведен переезд сайта ОСЖД из ГВЦ в ИнЭкс (а именно в кластер kubernetes группы проектов mwk)</p><h2>Что было сделано:</h2><h3>Со стороны k8s</h3><p>Для повышения стабильности работы кластера был добавлен второй ингресс<br /><span style="color: rgb(35,46,66);">Обновление (скейл) клестера был произведен с помощью kubespray (лежит на боссе в /root/kubespray)</span><br /><span style="color: rgb(35,46,66);">В inventory/prod/inventory.ini добавлен&nbsp;</span>ingress-2 по аналогии с&nbsp;ingress-1<br /><span style="color: rgb(35,46,66);">После чего была запущена команда скейла кластера: ansible-playbook -u root -i inventory/prod/inventory.ini scale.yml -b --diff</span></p><h3>Со стороны БД</h3><ul style="list-style-type: square;"><li>acl</li><li>media</li><li>content</li></ul><h3>Со стороны фронта</h3><p>--------------------</p><p>Помимо слоев, используемых в отрисовке страниц, собраны слои и шаблоны для индексации контента</p><p>К АРМам для заполнения таблиц ОСЖД добавлены служебные АРМы (дерево документов, присоединенные к документам файлы и т.д)</p><p>К специфическим скриптам ОСЖД (раскрываемое верхнее меню, слайдер) добавлены общие компоненты (inex-mixins, jqui-datepicker)&nbsp;</p><p>--------------------</p><p><br /></p><h3>Со стороны nginx и ДНС</h3><p>--------------------</p><h3>Со стороны установщика</h3><p>Установщик был подготовлен к работе с проектом ОСДЖ (продуктивом osjd.org и ПТК CI osjd.odev.oooinex.ru) следующим образом:</p><ol><li>Добавлены переменные для проекта (там же прописывается состав приложений, доменное имя, ветки, токены и тд) playbooks/vars/<a class="w-link" href="http://osjd.org/" title="Пройти по ссылке">osjd.org</a></li><li>Добавлены настройки самого ансибля для проекта осжд playbooks/inventory/osjd.ini</li><li>Добавлены шаблоны (конфиги nginx и записи в ДНС) для проекта осжд playbooks/files/osjd</li><li>Поправлен скрипт ptk_<a class="w-link" href="http://controll.sh/" title="Пройти по ссылке">controll.sh</a>&nbsp;(чтобы запускался с проектом осжд тоже)</li></ol><h3>Со стороны мониторинга</h3><p>Добавлен график</p><p><a href="https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1">https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1</a></p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-51-39.png" /></ac:image></p><p>В Кибане логи в mwk:</p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-54-2.png" /></ac:image></p><h2>Какие проверки были сделаны:</h2><ol><li>Админка работает, армы нового ПТК открываются, история изменений сохраняется (где имеется)</li><li>Страницы сайта загружаются, есть все картинки, данные (новости, статьи итд)</li><li>Поиск на сайте работает (и индексация изменений)</li><li>Проверка прав в ACL работает (и права acl перенесены)</li></ol><p><br /></p>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434800</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466576</id>
<property name="body"><![CDATA[<p>С 26 августа 2021 года по 30 августа 2021 года был произведен переезд сайта ОСЖД из ГВЦ в ИнЭкс (а именно в кластер kubernetes группы проектов mwk)</p><h2>Что было сделано:</h2><h3>Со стороны k8s</h3><p>Для повышения стабильности работы кластера был добавлен второй ингресс<br /><span style="color: rgb(35,46,66);">Обновление (скейл) клестера был произведен с помощью kubespray (лежит на боссе в /root/kubespray)</span><br /><span style="color: rgb(35,46,66);">В inventory/prod/inventory.ini добавлен&nbsp;</span>ingress-2 по аналогии с&nbsp;ingress-1<br /><span style="color: rgb(35,46,66);">После чего была запущена команда скейла кластера: ansible-playbook -u root -i inventory/prod/inventory.ini scale.yml -b --diff</span></p><h3>Со стороны БД</h3><ul style="list-style-type: square;"><li>acl</li><li>media</li><li>content</li></ul><h3>Со стороны фронта</h3><p>--------------------</p><p>Помимо слоев, используемых в отрисовке страниц, собраны слои и шаблоны для индексации контента</p><p>К АРМам для заполнения таблиц ОСЖД добавлены служебные АРМы (дерево документов, присоединенные к документам файлы и т.д)</p><p>К специфическим скриптам ОСЖД (раскрываемое верхнее меню, слайдер) добавлены общие компоненты (inex-mixins, jqui-datepicker)&nbsp;</p><p>--------------------</p><p><br /></p><h3>Со стороны nginx и ДНС</h3><p>--------------------</p><h3>Со стороны установщика</h3><p>Установщик был подготовлен к работе с проектом ОСДЖ (продуктивом osjd.org и ПТК CI osjd.odev.oooinex.ru) следующим образом:</p><ol><li>Добавлены переменные для проекта (там же прописывается состав приложений, доменное имя, ветки, токены и тд) playbooks/vars/<a class="w-link" href="http://osjd.org/" title="Пройти по ссылке">osjd.org</a></li><li>Добавлены настройки самого ансибля для проекта осжд playbooks/inventory/osjd.ini</li><li>Добавлены шаблоны (конфиги nginx и записи в ДНС) для проекта осжд playbooks/files/osjd</li><li>Поправлен скрипт ptk_<a class="w-link" href="http://controll.sh/" title="Пройти по ссылке">controll.sh</a>&nbsp;(чтобы запускался с проектом осжд тоже)</li></ol><h3>Со стороны мониторинга</h3><p>Добавлен график</p><p><a href="https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1">https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1</a></p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-50-7.png" /></ac:image></p><h2>Какие проверки были сделаны:</h2><ol><li>Админка работает, армы нового ПТК открываются, история изменений сохраняется (где имеется)</li><li>Страницы сайта загружаются, есть все картинки, данные (новости, статьи итд)</li><li>Поиск на сайте работает (и индексация изменений)</li><li>Проверка прав в ACL работает (и права acl перенесены)</li></ol><p><br /></p>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434774</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466577</id>
<property name="body"><![CDATA[<p>С 26 августа 2021 года по 30 августа 2021 года был произведен переезд сайта ОСЖД из ГВЦ в ИнЭкс (а именно в кластер kubernetes группы проектов mwk)</p><h2>Что было сделано:</h2><h3>Со стороны k8s</h3><p>Для повышения стабильности работы кластера был добавлен второй ингресс<br /><span style="color: rgb(35,46,66);">Обновление (скейл) клестера был произведен с помощью kubespray (лежит на боссе в /root/kubespray)</span><br /><span style="color: rgb(35,46,66);">В inventory/prod/inventory.ini добавлен&nbsp;</span>ingress-2 по аналогии с&nbsp;ingress-1<br /><span style="color: rgb(35,46,66);">После чего была запущена команда скейла кластера: ansible-playbook -u root -i inventory/prod/inventory.ini scale.yml -b --diff</span></p><h3>Со стороны БД</h3><ul style="list-style-type: square;"><li>acl</li><li>media</li><li>content</li></ul><h3>Со стороны фронта</h3><p>--------------------</p><p>Помимо слоев, используемых в отрисовке страниц, собраны слои и шаблоны для индексации контента</p><p>К АРМам для заполнения таблиц ОСЖД добавлены служебные АРМы (дерево документов, присоединенные к документам файлы и т.д)</p><p>К специфическим скриптам ОСЖД (раскрываемое верхнее меню, слайдер) добавлены общие компоненты (inex-mixins, jqui-datepicker)&nbsp;</p><p>--------------------</p><p><br /></p><h3>Со стороны nginx и ДНС</h3><p>--------------------</p><h3>Со стороны установщика</h3><p>Установщик был подготовлен к работе с проектом ОСДЖ (продуктивом osjd.org и ПТК CI osjd.odev.oooinex.ru) следующим образом:</p><ol><li>Добавлены переменные для проекта (там же прописывается состав приложений, доменное имя, ветки, токены и тд) playbooks/vars/<a class="w-link" href="http://osjd.org/" title="Пройти по ссылке">osjd.org</a></li><li>Добавлены настройки самого ансибля для проекта осжд playbooks/inventory/osjd.ini</li><li>Добавлены шаблоны (конфиги nginx и записи в ДНС) для проекта осжд playbooks/files/osjd</li><li>Поправлен скрипт ptk_<a class="w-link" href="http://controll.sh/" title="Пройти по ссылке">controll.sh</a>&nbsp;(чтобы запускался с проектом осжд тоже)</li></ol><h3>Со стороны мониторинга</h3><p>Добавлен график</p><p><a href="https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1">https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1</a></p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-51-39.png" /></ac:image></p><h2>Какие проверки были сделаны:</h2><ol><li>Админка работает, армы нового ПТК открываются, история изменений сохраняется (где имеется)</li><li>Страницы сайта загружаются, есть все картинки, данные (новости, статьи итд)</li><li>Поиск на сайте работает (и индексация изменений)</li><li>Проверка прав в ACL работает (и права acl перенесены)</li></ol><p><br /></p>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434776</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466568</id>
<property name="body"><![CDATA[<p>С 26 августа 2021 года по 30 августа 2021 года был произведен переезд сайта ОСЖД из ГВЦ в ИнЭкс (а именно в кластер kubernetes группы проектов mwk)</p><h2>Что было сделано:</h2><p><br /></p><h3>Со стороны k8s</h3><p><br /></p><p>Для повышения стабильности работы кластера был добавлен второй ингресс<br /><span style="color: rgb(35,46,66);">Обновление (скейл) клестера был произведен с помощью kubespray (лежит на боссе в /root/kubespray)</span><br /><span style="color: rgb(35,46,66);">В inventory/prod/inventory.ini добавлен&nbsp;</span>ingress-2 по аналогии с&nbsp;ingress-1<br /><span style="color: rgb(35,46,66);">После чего была запущена команда скейла кластера: ansible-playbook -u root -i inventory/prod/inventory.ini scale.yml -b --diff</span></p><h3>Со стороны БД</h3><ul style="list-style-type: square;"><li>acl</li><li>media</li><li>content</li></ul><h3>Со стороны фронта</h3><p>--------------------</p><h3>Со стороны nginx и ДНС</h3><p>--------------------</p><h3>Со стороны установщика</h3><p>Установщик был подготовлен к работе с проектом ОСДЖ (продуктивом osjd.org и ПТК CI osjd.odev.oooinex.ru) следующим образом:</p><ol><li>Добавлены переменные для проекта (там же прописывается состав приложений, доменное имя, ветки, токены и тд) playbooks/vars/<a class="w-link" href="http://osjd.org/" title="Пройти по ссылке">osjd.org</a></li><li>Добавлены настройки самого ансибля для проекта осжд playbooks/inventory/osjd.ini</li><li>Добавлены шаблоны (конфиги nginx и записи в ДНС) для проекта осжд playbooks/files/osjd</li><li>Поправлен скрипт ptk_<a class="w-link" href="http://controll.sh/" title="Пройти по ссылке">controll.sh</a>&nbsp;(чтобы запускался с проектом осжд тоже)</li></ol><h3>Со стороны мониторинга</h3><p>--------------------</p><p><br /></p><p><br /></p><h2>Какие проверки были сделаны:</h2><ol><li>Админка работает, армы нового ПТК открываются, история изменений сохраняется (где имеется)</li><li>Страницы сайта загружаются, есть все картинки, данные (новости, статьи итд)</li><li>Поиск на сайте работает (и индексация изменений)</li><li>Проверка прав в ACL работает (и права acl перенесены)</li></ol><p><br /></p>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434764</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466569</id>
<property name="body"><![CDATA[<p>С 26 августа 2021 года по 30 августа 2021 года был произведен переезд сайта ОСЖД из ГВЦ в ИнЭкс (а именно в кластер kubernetes группы проектов mwk)</p><h2>Что было сделано:</h2><p><br /></p><h3>Со стороны k8s</h3><p>Для повышения стабильности работы кластера был добавлен второй ингресс<br /><span style="color: rgb(35,46,66);">Обновление (скейл) клестера был произведен с помощью kubespray (лежит на боссе в /root/kubespray)</span><br /><span style="color: rgb(35,46,66);">В inventory/prod/inventory.ini добавлен&nbsp;</span>ingress-2 по аналогии с&nbsp;ingress-1<br /><span style="color: rgb(35,46,66);">После чего была запущена команда скейла кластера: ansible-playbook -u root -i inventory/prod/inventory.ini scale.yml -b --diff</span></p><h3>Со стороны БД</h3><ul style="list-style-type: square;"><li>acl</li><li>media</li><li>content</li></ul><h3>Со стороны фронта</h3><p>--------------------</p><h3>Со стороны nginx и ДНС</h3><p>--------------------</p><h3>Со стороны установщика</h3><p>Установщик был подготовлен к работе с проектом ОСДЖ (продуктивом osjd.org и ПТК CI osjd.odev.oooinex.ru) следующим образом:</p><ol><li>Добавлены переменные для проекта (там же прописывается состав приложений, доменное имя, ветки, токены и тд) playbooks/vars/<a class="w-link" href="http://osjd.org/" title="Пройти по ссылке">osjd.org</a></li><li>Добавлены настройки самого ансибля для проекта осжд playbooks/inventory/osjd.ini</li><li>Добавлены шаблоны (конфиги nginx и записи в ДНС) для проекта осжд playbooks/files/osjd</li><li>Поправлен скрипт ptk_<a class="w-link" href="http://controll.sh/" title="Пройти по ссылке">controll.sh</a>&nbsp;(чтобы запускался с проектом осжд тоже)</li></ol><h3>Со стороны мониторинга</h3><p>--------------------</p><p><br /></p><p><br /></p><h2>Какие проверки были сделаны:</h2><ol><li>Админка работает, армы нового ПТК открываются, история изменений сохраняется (где имеется)</li><li>Страницы сайта загружаются, есть все картинки, данные (новости, статьи итд)</li><li>Поиск на сайте работает (и индексация изменений)</li><li>Проверка прав в ACL работает (и права acl перенесены)</li></ol><p><br /></p>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434765</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466574</id>
<property name="body"><![CDATA[<p>С 26 августа 2021 года по 30 августа 2021 года был произведен переезд сайта ОСЖД из ГВЦ в ИнЭкс (а именно в кластер kubernetes группы проектов mwk)</p><h2>Что было сделано:</h2><h3>Со стороны k8s</h3><p>Для повышения стабильности работы кластера был добавлен второй ингресс<br /><span style="color: rgb(35,46,66);">Обновление (скейл) клестера был произведен с помощью kubespray (лежит на боссе в /root/kubespray)</span><br /><span style="color: rgb(35,46,66);">В inventory/prod/inventory.ini добавлен&nbsp;</span>ingress-2 по аналогии с&nbsp;ingress-1<br /><span style="color: rgb(35,46,66);">После чего была запущена команда скейла кластера: ansible-playbook -u root -i inventory/prod/inventory.ini scale.yml -b --diff</span></p><h3>Со стороны БД</h3><ul style="list-style-type: square;"><li>acl</li><li>media</li><li>content</li></ul><h3>Со стороны фронта</h3><p>--------------------</p><h3>Со стороны nginx и ДНС</h3><p>--------------------</p><h3>Со стороны установщика</h3><p>Установщик был подготовлен к работе с проектом ОСДЖ (продуктивом osjd.org и ПТК CI osjd.odev.oooinex.ru) следующим образом:</p><ol><li>Добавлены переменные для проекта (там же прописывается состав приложений, доменное имя, ветки, токены и тд) playbooks/vars/<a class="w-link" href="http://osjd.org/" title="Пройти по ссылке">osjd.org</a></li><li>Добавлены настройки самого ансибля для проекта осжд playbooks/inventory/osjd.ini</li><li>Добавлены шаблоны (конфиги nginx и записи в ДНС) для проекта осжд playbooks/files/osjd</li><li>Поправлен скрипт ptk_<a class="w-link" href="http://controll.sh/" title="Пройти по ссылке">controll.sh</a>&nbsp;(чтобы запускался с проектом осжд тоже)</li></ol><h3>Со стороны мониторинга</h3><p>--------------------</p><p><br /></p><p><br /></p><h2>Какие проверки были сделаны:</h2><ol><li>Админка работает, армы нового ПТК открываются, история изменений сохраняется (где имеется)</li><li>Страницы сайта загружаются, есть все картинки, данные (новости, статьи итд)</li><li>Поиск на сайте работает (и индексация изменений)</li><li>Проверка прав в ACL работает (и права acl перенесены)</li></ol><p><br /></p>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434771</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79466575</id>
<property name="body"><![CDATA[<p>С 26 августа 2021 года по 30 августа 2021 года был произведен переезд сайта ОСЖД из ГВЦ в ИнЭкс (а именно в кластер kubernetes группы проектов mwk)</p><h2>Что было сделано:</h2><h3>Со стороны k8s</h3><p>Для повышения стабильности работы кластера был добавлен второй ингресс<br /><span style="color: rgb(35,46,66);">Обновление (скейл) клестера был произведен с помощью kubespray (лежит на боссе в /root/kubespray)</span><br /><span style="color: rgb(35,46,66);">В inventory/prod/inventory.ini добавлен&nbsp;</span>ingress-2 по аналогии с&nbsp;ingress-1<br /><span style="color: rgb(35,46,66);">После чего была запущена команда скейла кластера: ansible-playbook -u root -i inventory/prod/inventory.ini scale.yml -b --diff</span></p><h3>Со стороны БД</h3><ul style="list-style-type: square;"><li>acl</li><li>media</li><li>content</li></ul><h3>Со стороны фронта</h3><p>--------------------</p><h3>Со стороны nginx и ДНС</h3><p>--------------------</p><h3>Со стороны установщика</h3><p>Установщик был подготовлен к работе с проектом ОСДЖ (продуктивом osjd.org и ПТК CI osjd.odev.oooinex.ru) следующим образом:</p><ol><li>Добавлены переменные для проекта (там же прописывается состав приложений, доменное имя, ветки, токены и тд) playbooks/vars/<a class="w-link" href="http://osjd.org/" title="Пройти по ссылке">osjd.org</a></li><li>Добавлены настройки самого ансибля для проекта осжд playbooks/inventory/osjd.ini</li><li>Добавлены шаблоны (конфиги nginx и записи в ДНС) для проекта осжд playbooks/files/osjd</li><li>Поправлен скрипт ptk_<a class="w-link" href="http://controll.sh/" title="Пройти по ссылке">controll.sh</a>&nbsp;(чтобы запускался с проектом осжд тоже)</li></ol><h3>Со стороны мониторинга</h3><p>Добавлен график</p><p><a href="https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1">https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1</a></p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-50-7.png" /></ac:image></p><h2>Какие проверки были сделаны:</h2><ol><li>Админка работает, армы нового ПТК открываются, история изменений сохраняется (где имеется)</li><li>Страницы сайта загружаются, есть все картинки, данные (новости, статьи итд)</li><li>Поиск на сайте работает (и индексация изменений)</li><li>Проверка прав в ACL работает (и права acl перенесены)</li></ol><p><br /></p>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79434772</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="BodyContent" package="com.atlassian.confluence.core">
<id name="id">79467333</id>
<property name="body"><![CDATA[<p>С 26 апреля 2021 года по 30 апреля 2021 года был произведен переезд сайта ОСЖД из ГВЦ в ИнЭкс (а именно в кластер kubernetes группы проектов mwk) в рамках экспедита&nbsp;<a href="https://pirs.wflow.oooinex.ru/issues/DEVOPS-1294">https://pirs.wflow.oooinex.ru/issues/DEVOPS-1294</a></p><h2>Что было сделано:</h2><h3>Со стороны k8s</h3><p>Для повышения стабильности работы кластера был добавлен второй ингресс<br /><span style="color: rgb(35,46,66);">Обновление (скейл) клестера был произведен с помощью kubespray (лежит на боссе в /root/kubespray)</span><br /><span style="color: rgb(35,46,66);">В inventory/prod/inventory.ini добавлен&nbsp;</span>ingress-2 по аналогии с&nbsp;ingress-1<br /><span style="color: rgb(35,46,66);">После чего была запущена команда скейла кластера: ansible-playbook -u root -i inventory/prod/inventory.ini scale.yml -b --diff</span></p><p><span style="color: rgb(35,46,66);"><br /></span></p><p><span style="font-size: 16.0px;font-weight: bold;letter-spacing: 0.0px;">Со стороны LDAP&nbsp;</span></p><p>группы согласно РАД<br /><a href="http://osjd.info">osjd.info</a> Б Доступ к административному интерфейсу сайта &laquo;ОСЖД&raquo;, &laquo;ОСЖД-1&raquo;, а также к управлению составом группы OSJD.Staff<br />OSJD.Staff А Доступ к пользовательскому интерфейсу работы с общими документами для сотрудников ОСЖД<br />osjd EditorsManagers Б Доступ к управлению составом групп <a href="http://osjd.info">osjd.info</a> и OSJD.Staff</p><h5>ЮЗЕРА</h5><p>на продуктиве<br />получили список мемберов осжд-шных групп</p><p>bash-4.3# /opt/IBM/ldap/V6.3/bin/idsldapsearch -D cn=root -w kvp_root_pwd -p 2389 -b cn=ГРУППА,cn=groups,o=rzd &quot;objectclass=*&quot; ibm-allmembers</p><p>составили список уникальных юзеров<br />выгрузили отдельным льдифом каждого</p><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="354608ad-430f-4770-b0c8-0e0b7c401774"><ac:parameter ac:name="title">выгрузка юзеров</ac:parameter><ac:parameter ac:name="collapse">true</ac:parameter><ac:plain-text-body><![CDATA[for i in {"uid=5221","uid=(zorro)","uid=a.kuzmenko","uid=AAGaldin@gmail.com","uid=Abenov_e","uid=AdomaitieneD_LG","uid=ADY2018","uid=AfRA.2014","uid=Agamalova_est","uid=Agamalova_osjd","uid=aizstrauts_osjd","uid=AleksandrB_EVR","uid=Alekseeva_RZD","uid=Alexandrovskaya_rzd","uid=Alexejchuk_UZ","uid=Algimante","uid=Aliev_ktz","uid=Alimzhanova_a","uid=AndreevOgnian","uid=anseongmin","uid=antonevic_osjd","uid=Apostu_CFM","uid=ARFA.09.11.1964","uid=artemjeva_osjd","uid=ArtemjevaO_SAM","uid=artur.stanilko","uid=Aspayeva","uid=Atanasov_NKZI1","uid=austris","uid=Bakhshi_osjd","uid=Balan_CFM","uid=Balniazova_KTZ","uid=Baneviciene_LG","uid=barbascumpa_osjd","uid=Belak_ZSSKCargo","uid=belinskaya_uz","uid=belyaev_rzd","uid=bergfelu","uid=Bernatonis_LG","uid=bezmenskiy_ttk","uid=bite3","uid=bi-weiwei_kzd","uid=Bolotov_RZD","uid=bolsakova_ldz","uid=Bondarev_RZD","uid=Brundziene_LG","uid=Buc_ZSSKCARGO","uid=Budek_OSJD","uid=bugaenkoviktor_TVEMA","uid=Bukauskiene_LTG","uid=Burkov_RZD","uid=Car1","uid=CAUS_CFRMARFA","uid=Cervinka_CDCARGO","uid=Chemerynskyi_UZ","uid=Cherkasau_BC","uid=Chmielewski_axtone","uid=Cholewska_PKP","uid=civilswjtu","uid=Constantinov_OSJD","uid=cruglii_cfm","uid=CsillagN_RCH","uid=d.pranka","uid=D.Tamir","uid=dalius","uid=datacenter_xxs","uid=dekany_zsr","uid=Devenas_LG","uid=DimitarAndreev","uid=Donets_RZD","uid=Dorcakova_ZSSKCargo","uid=Dorochkevich_RZD","uid=Dorofieieva_UZ","uid=Doroshkevich_rzd","uid=DR_GITTA_MAV-START","uid=Dragancnd","uid=DSvash","uid=dumane_LG","uid=dummy","uid=Dveilys_LG","uid=Dybowski_PKP","uid=dziamo","uid=Efremova_rzd","uid=ejoo","uid=ekaterinash1","uid=Elohegyi_MAV","uid=Emelina_rzd","uid=Esimbekova_KZH","uid=Esimova_KTZ","uid=EVR-Liidia","uid=Farkas_RCH","uid=fedorchuk_ua","uid=fillova_ZSSK","uid=Fitin_UZ","uid=fominova","uid=Gajewska_PKP","uid=Galushkin_rzd","uid=Geibovic_LG","uid=Gil_PKP","uid=gjudycki","uid=GolovkoA_EVR","uid=GolovkoAA_ERS","uid=Gorchak_UZ","uid=grazinach_lt","uid=Grecova_ZSSKCargo","uid=GregorL_RCH","uid=Grigorieva_rzd","uid=grimj","uid=grygiel_mib","uid=Gulnara_cteh","uid=Guryanov_rzd","uid=harammin","uid=Hartelova_ZSR","uid=Haynes_HITRAIL","uid=Hlavaty_ZSR","uid=hong-dailing_osjd","uid=Hubieva_KTZ","uid=HUNT_EVR","uid=I.Rusanov_UZ","uid=ignas_lt","uid=Ihnat_ZSSKCargo","uid=Imanzhanova_KTZ","uid=Ineva_NRIC","uid=Iovan_CFR","uid=Israilova_k","uid=Ivanenko_UZ","uid=IVANOVA_NKZI","uid=Ivanova_NKZI1","uid=IvanovaL_LG","uid=Ivashchenko_rzd","uid=Jakubowski_PKP","uid=Janina LG DK TRS","uid=Janyga_pkp","uid=Jasansky_SZDC","uid=jauris_szdc","uid=jbeli","uid=Juhas_MDSR","uid=JUOZASD LG","uid=Juraska_LG","uid=jurczak_PLK","uid=Kabenkov","uid=kadam_PKP","uid=Kaitline","uid=Kaliutchik_BCH","uid=KALLO_MAV-START","uid=Kamshat_kz","uid=kamzolov_yuri","uid=Karzhassov_KZH","uid=Kasa_MAV","uid=kashanau_osjd","uid=Kazak_RZD","uid=Kemeziene_LG","uid=KhalabaRoman","uid=Khrapach.Andrii","uid=KhristolubovTOG","uid=Khudoyrov_OSJD","uid=Khvostik_M_rzd","uid=khvostik_rzd","uid=kiknadzetatiana","uid=Kilibaeva_KTZ","uid=kinderis","uid=kindevy","uid=kirkova_OSJD","uid=KirovaE_RZD","uid=Kiseliene_LG","uid=Kiss_OSJD","uid=Konstantinov_OSJD","uid=Konta_ZSR","uid=Korab_PKP","uid=Kornev_rzd","uid=korniluk","uid=kostikova_rzd","uid=Kostuch_axtone","uid=KotovaZ_BCH","uid=kovalenko_uz","uid=Kovarik_SZDC","uid=Kovyrnov_rzd","uid=kozmava_OSJD","uid=Kraskouski_IV_BLR","uid=krizan.martin@zsr.sk","uid=Krylova_rzd","uid=KTZ_Kovdrya_Valentina","uid=Kussainov_n","uid=Kuszewski_PKP","uid=Kutejnicyn_UZ","uid=Labeckis_LDZ","uid=Lagoda_PKPIC","uid=LaimaK","uid=laivas","uid=lazarenko_rzd","uid=Lee_KORAIL","uid=LepetenokN_RZD","uid=lg_rpss","uid=LG_RPSS_999","uid=Lisitsyn_RZD","uid=lobzik-vova","uid=Lopata_ZSSKCargo","uid=Lotfi_OSJD1","uid=Lubimova_rzd","uid=Lustov_BC","uid=Luzak_ZSSKCargo","uid=Lynnyk_UZ","uid=Majchrzak_PKP","uid=Makinen_VR","uid=Maltseva_rzd","uid=Mamytov_OSJD","uid=Mantell_UIC","uid=MarciulionisT_LG","uid=maslenka","uid=matta.mario","uid=Matta_ZSR","uid=Matyushev_SGtrans","uid=Meder_PKP","uid=Mihalco_Betamont","uid=mihaylova.Svetlana","uid=Mikalauskiene_LG","uid=Minenko_RZD","uid=mir92.2016","uid=Mitkov_nric","uid=Mlodawski_PKP","uid=moe2","uid=mo-yu_osjd","uid=MuratovA_KTZ","uid=mzilenas_lg","uid=n.svecova","uid=Natali_CTM","uid=Navora_UZ","uid=Nazha_UZ","uid=Nekrashevich_e","uid=Nemeth_MAV","uid=Neumar_ZSSKCargo","uid=Nguyen_OSJD1","uid=Niinepuu_OSJD","uid=Nisula_BC","uid=Nosenko_OSJD","uid=Novakova_CDCARGO","uid=O.Smoliy_UZ","uid=oblomov_rzd","uid=oleg_n2","uid=olgash_uz","uid=Olzhabaeva_KTZ","uid=Ovsenev_rzd","uid=ozinkowska_PLK","uid=panov_nric","uid=Pascan_OSJD","uid=paza00","uid=petr.hron_mindop.cr","uid=pevzner_rzd","uid=PingruiZhao_KZD","uid=plaske_plaske","uid=Platnitski_BCH","uid=pll68","uid=Pogrzebski_PKP","uid=PogrzebskiPKP_Intercity","uid=Pohibielko_PKP","uid=Poleshchuk_UZ","uid=prenosil_OLTIS","uid=qbs_xxs","uid=RakhimjonovBR_UTY","uid=Rakhmilevich_rzd","uid=reginaben_LG","uid=Reivytis_LG","uid=Renne_rzd","uid=ressina_rzd","uid=Rogojkina_rzd","uid=Roizina_PLASKE","uid=Rusy_CD","uid=Rychlik_ZSR","uid=rzd_eremina","uid=rzd_grigoreva","uid=rzd_kostikova","uid=rzd_renne","uid=sabadash@uz.gov.ua","uid=safarov_osjd","uid=Samuchovas_LG","uid=sanjaasuren_osjd","uid=Saracuta_CFM","uid=Sargelis_LG","uid=Sawchuk_BC","uid=Sebastian Budek","uid=Sedlakova_ZSSKCargo","uid=seiman_evr","uid=SeitmagambetovaKTZ","uid=sergeeva_rzd","uid=sergeeva1","uid=Serik.Bolysbaev2","uid=Sevastjanova E_lg","uid=Shalabaiev_UZ","uid=ShalyaginD_RZD","uid=ShestakovPA_IEDT","uid=shikhiyev_osjd","uid=shkayumkhodjaev_osjd","uid=Shoja_RAI","uid=Shurganova_AZD","uid=Simakov_BC","uid=Simoiu","uid=SimonL_RCH","uid=SimonneZs_MAV","uid=Sitekova_ZSR","uid=Skobtsov_UZ","uid=Skuratov_SGtrans","uid=Smailov_KTZ","uid=Smoljanova_n","uid=SMSokolov","uid=SokaitisE_LG","uid=solomakha_uz","uid=Somova_UZ","uid=sseverina","uid=Stanimir_UZ","uid=Starynin_LG","uid=Stefanov_NKZI","uid=stelmakh_UZ","uid=stepanenko_rzd","uid=Stern_MAV","uid=Stovba_rzd","uid=Suindikov_k","uid=Sulzenko_ldz","uid=Sutka_ZSR","uid=svetlichny_ttk","uid=Sychrovsky_SZDC","uid=Syzdykov_B.2013","uid=Szabone_MAV","uid=Szadkowski_PKP","uid=Tabakov_rzd","uid=Talanov_rzd","uid=tangvandung_VZD","uid=Tarabrin_TVEMA","uid=Tarasevic_LG","uid=Telebayev_KTZ","uid=TitovaEF_RZD","uid=Toleugaliyev_KTZH","uid=Tomek_SZDC","uid=Tregubov_rzd","uid=tsevegsuren","uid=Tsvetkov_NRIC","uid=tsyganok_uz","uid=TTSIKHELASHVILI_GR","uid=TurzakovaL_ZSSKCargo","uid=Tusupov_KTZ","uid=ubjd","uid=Ugrin_BC","uid=UteshevD_KTZ","uid=vaganovaon","uid=Valba_LG","uid=valenfalk","uid=VancevicieneML_LG","uid=VasileCodreanu","uid=vitalijus.smirnovas","uid=vkacmarcik","uid=VnukovaS_UZ","uid=Vopalecky_OSJD","uid=Voronina_EVR","uid=v-ovsyannikov","uid=Vravec_ZSR1","uid=Vytautas LGDC","uid=Vytpak","uid=wang-lianbin_osjd","uid=Wiechowska_OSJD","uid=wu-yang_osjd","uid=xia-baohe_kzd","uid=XYL_ITCMOR","uid=yanchev_nric","uid=yurkinav2","uid=Zajcevova_Betamont","uid=zanzarah","uid=Zen1971","uid=Zhankabaev_KTZ","uid=Zolboo","uid=zolotnikov_ttk","uid=zubilewicz_plk","uid=Zuk_MI"} ; do /opt/IBM/ldap/V6.3/bin/idsldapsearch -D cn=root -w kvp_root_pwd -p 2389 -b cn=users,o=rzd $i > "${i:4:${#i}}".ldif; done]] ></ac:plain-text-body></ac:structured-macro><p>перенесли к нам</p><p>поколдовали над льдифами<br />sed -i &quot;s/=/: /&quot; *.ldif<br />sed -i '1!b;s/uid: /dn: uid=/' *.ldif</p><p>вручную поменяли названия файлов, где были пробелы</p><p>залили юзеров к нам<br />for f in $(ls -1) ; do /opt/IBM/ldap/V6.3/bin/idsldapadd -p 2389 -D cn=root -w kvp_root_pwd -i /tmp/osjd-users/$f ; done</p><h5>ГРУППЫ</h5><p>формат льдифа для заливки</p><p>dn: cn=OSJD.Staff,cn=groups,o=rzd<br />changetype: modify<br />add: uniquemember<br />uniquemember:uid=Gil_PKP,cn=users,o=rzd<br />uniquemember:uid=Bernatonis_LG,cn=users,o=rzd</p><p>заливка<br />/opt/IBM/ldap/V6.3/bin/idsldapmodify -D cn=root -w kvp_root_pwd -p 2389 -f /tmp/group-osjdstaff.ldif</p><p>проверка заливки<br />/opt/IBM/ldap/V6.3/bin/idsldapsearch -D cn=root -w kvp_root_pwd -p 2389 -b cn=osjd.staff,cn=groups,o=rzd &quot;objectclass=*&quot; ibm-allmembers</p><p>группы osjd EditorsManagers у нас не было</p><p>заведено</p><p>формат льдифа<br />dn: cn=osjd EditorsManagers,cn=groups,o=rzd<br />objectclass: top<br />objectClass: groupofuniquenames<br />cn: osjd EditorsManagers<br />uniqueMember: uid=Budek_OSJD,cn=users,o=rzd<br />uniqueMember: uid=Sebastian Budek,cn=users,o=rzd</p><p>/opt/IBM/ldap/V6.3/bin/idsldapadd -D cn=root -w kvp_root_pwd -p 2389 -f /tmp/group-osjdeditors.ldif</p><p>группа&nbsp;osjd EditorsManagers добавлена подгруппой к&nbsp;EditorsManagers.portlet</p><p><span style="font-size: 16.0px;font-weight: bold;letter-spacing: 0.0px;"><br /></span></p><p><span style="font-size: 16.0px;font-weight: bold;letter-spacing: 0.0px;">Со стороны WebSpherePortal</span></p><p>для прода взят бывший портал альфы, изменены адреса</p><p><a class="w-link" href="http://172.22.2.191/" title="Пройти по ссылке">172.22.2.191</a><span style="color: rgb(35,46,66);">&nbsp;- ps-dmgr</span><br /><a class="w-link" href="http://172.22.2.192/" title="Пройти по ссылке">172.22.2.192</a><span style="color: rgb(35,46,66);">&nbsp;- ps-app01</span><br /><a class="w-link" href="http://172.22.2.193/" title="Пройти по ссылке">172.22.2.193</a><span style="color: rgb(35,46,66);">&nbsp;- ps-app02</span></p><p>для ci как и для всего используется psi</p><p>на ps-dmgr<br />/opt/IBM/WebSphere/AppServer/systemApps/isclite.ear/isclite.war/images<br />iscbanner-mosaic.gif<br /><br />/opt/IBM/WebSphere/ps-dmgr/config/cells/ps-cell/applications/isclite.ear/deployments/isclite/isclite.war/WEB-INF<br />consoleProperties.xml</p><h3>Со стороны БД</h3><h5>поднятие БД</h5><p><span style="color: rgb(35,46,66);">БД прода на 172,22,2,240</span></p><p><span style="color: rgb(35,46,66);">/usr/pgsql-12/bin/pg_ctl initdb -D //var/lib/pgsql/12/data-osjd</span><br /><span style="color: rgb(35,46,66);">cd /var/lib/pgsql/12/data-osjd</span><br /><span style="color: rgb(35,46,66);">в постгрес.конф исправить порт 5435</span><br /><span style="color: rgb(35,46,66);">и адрес прослушивания на '*'</span></p><p>в pg_hba.conf исправлены правила доступа</p><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="0a2d5f50-7c53-4be4-8acc-9a875de18b68"><ac:parameter ac:name="title">pg_hba.conf - кусок</ac:parameter><ac:plain-text-body><![CDATA[TYPE DATABASE USER ADDRESS METHOD
"local" is for Unix domain socket connections only
local all all trust
IPv4 local connections:
host all all samenet password
IPv6 local connections:
host all all ::1/128 md5
Allow replication connections from localhost, by a user with the
replication privilege.
local replication all trust
host replication all samenet password
host replication all ::1/128 md5]] ></ac:plain-text-body></ac:structured-macro><p><br />в /lib/systemd/system создан сервис<br />postgresql-12-osjd.service<br />обратить внимание на<br />Environment=PGDATA=/var/lib/pgsql/12/data-osjd/</p><p>добавлен скрипт снятия эталона по крону каждую ночь</p><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="880497b9-8763-4e84-875f-12697220b752"><ac:parameter ac:name="title">/opt/INEX/scripts/etalon-osjd.sh</ac:parameter><ac:plain-text-body><![CDATA[#!/bin/bash

sudo -u postgres pg_dump -p 5435 -f /home/postgres/main.backup-osjd-$(date +%F) main
sed -i "s/osjd.org/osjd.local.oooinex.ru/g" /home/postgres/main.backup-osjd-$(date +%F)
gzip -c /home/postgres/main.backup-osjd-$(date +%F) > /tmp/osjd.gzip
sshpass -p "ghjuhfvvf" scp /tmp/osjd.gzip inex@172.22.2.51:/mnt/ftp/gvc/.git-shared-storage/osjd/setup/etalon-maindb/dumps/main.backup.gz

]] ></ac:plain-text-body></ac:structured-macro><p><span style="color: rgb(94,108,132);">слияние 5-ти БД в одну</span></p><ul style="list-style-type: square;"><li>acl<ul style="list-style-type: square;"><li>Произведён экспорт данных из БД acl продуктива - права для групп osjd и для InEx<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/acl_export.sql</a></li></ul></li></ul></li><li>media<ul style="list-style-type: square;"><li>Написан небольшой скрипт для выкачивания картинок с прода.&nbsp;<a href="https://gitlab.oooinex.ru/osjd/setup/media-export">https://gitlab.oooinex.ru/osjd/setup/media-export</a><ul style="list-style-type: square;"><li>Развернут на 13ой в примонтированном цефе - /mnt/cephfs/osjd/media-export и настроен на прод osjd, запускать через ./run.sh</li><li>На вход нужно подать данные для подключения к БД (в .env файле), где есть таблица cwp_media.resource_metadata с метаданными картинок, которые нужно скачать</li><li>По метаданным строятся урлы до картинок и скачиваются в папку resources внутри контейнера</li><li>Можно смонтировать папку из контейнера сразу в нужную pvc директорию, чтобы картинки сразу появлялись на ПТК</li><li>При повторном запуске, есть возможность пропускать картинки, которые уже скачали (проверяет наличие файла на диске)</li></ul></li><li>Сами метаданные картинок собрали с прода и через поиск битых ссылок по сайту<ul style="list-style-type: square;"><li><a href="https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple">https://gitlab.oooinex.ru/osjd/db/blob/dev-osjd/migrations/DEVOPS-1269/core/sql/media_metadata.sql?expanded=true&amp;viewer=simple</a></li></ul></li></ul></li><li>content<ul style="list-style-type: square;"><li>Взяли урезанный дамп с продуктива (приходящий эталон)</li><li>Перенесли данные с прода силами Виталия и Святослава (есть чсеты в репозитории osjd/db)<br /><br /></li></ul></li></ul><ac:structured-macro ac:name="code" ac:schema-version="1" ac:macro-id="3d1834fc-0a32-4d70-a209-1c73f82cb11a"><ac:parameter ac:name="language">sql</ac:parameter><ac:parameter ac:name="title">Скрипты</ac:parameter><ac:parameter ac:name="collapse">true</ac:parameter><ac:plain-text-body><![CDATA[-- Составляем список таблиц, которые могут содержать файлы.
select 'select '''||t1.table_name||''' as table_name, '||t1.column_name||' as media_id from '||t1.table_schema||'.'||t1.table_name||' where '||t1.column_name||' is not null and (cvpm_id is null or cvpm_id in (68, 67, 51)) union all' 
from information_schema.columns t1, information_schema.columns t2
where t2.table_schema = t1.table_schema
and t2.table_name = t1.table_name
and replace(t2.column_name, '_size', '') = replace(t1.column_name, '_id', '')
and t1.column_name like '%_id'
and t2.column_name like '%_size'
and t1.table_name in (select table_name FROM information_schema.tables t WHERE table_schema = 'cwp' and table_type = 'BASE TABLE')
order by t1.table_name;

-- Получившийся список селектов придется прореживать, т.к. не во всех таблицах есть колонка cvpm_id, из-за чего появится ошибка, 
-- но в этом случае по имени таблицы становится понятно, к какому порталу она относится. Также в последней строке надо удалить union all. 
-- Затем список селектов надо вставить
select media_id||',' from (
-- сюда
) t order by 1;
-- и выполнить в content-db.

-- Результат выполнения надо вставить
select id
from cwp_media.resource_metadata
where id in (SELECT l.resource_id FROM cwp_media.resources_links l WHERE l.vp_id in (68, 67, 51))
or domain_id in (68, 67, 51)
or id in (
-- сюда
)
order by id;
-- и выполнить в media-db. Так получим список айдишников файлов, которые могут относиться к ОСЖД 
(скорее всего, будут лишние файлы, но это лучше, чем недостача).

-- Что касается прочих данных (не файлов), то был составлен список таблиц.
-- Наверно, пока наиболее надежный способ - пройтись по админке и вручную составить
-- список армов, а на его основе - список таблиц. После этого в Бивере генерировать
-- инсерты с обработкой ошибок (on conflict do nothing). Обновлять/удалять данные сложнее, т.к.
-- надо сравнивать с продом. В этот раз делал силами Бивера путем сравнения
-- результатов селекта, например,
SELECT * FROM cwp.app_structure_staticpages WHERE structure_id in (
  select s.id from cwp.cham_structure_main s where s.cvpm_id in (51, 67, 68)
) order by id;
-- на двух птк в WinMerge.
-- Но с таким сравнением текстов статики возникла проблема.
SELECT * FROM cwp.app_staticpages_locale WHERE cvpm_id in (51, 67, 68) order by id;
-- Бивер позволяет показывать результаты в виде таблицы или текста.
-- В первом варианте при копипасте текстов с тегами добавлялись лишние кавычки, что мешало сравнивать.
-- При показе результатов в виде текста кавычки не добавлялись, сравнивать было намного удобнее.
-- Такой способ сравнения - муторный, много механических действий.
-- Если сайт небольшой, то можно рассмотреть другой вариант актуализации данных - изменить скрипт
-- чистки дампа бд при создании эталона, который регулярно приезжает с прода, чтобы отменить удаление
-- данных переносимого портала. Возможный минус - эталон станет слишком большим, и механизм его
-- получения с прода сломается. Ну и временной лаг - надо ждать ночи.

Важно!!! При переносе данных имеет смысл отключать или дропать триггеры, чтобы они не меняли данные (даже для сравнения это удобнее), 
а потом восстанавливать. Т.е. удаляем триггеры, делаем DML, создаем триггеры.
Удаляем/создаем - потому что скрипты на это есть в Бивере на вкладке DDL таблицы.
Можно вообще подготовить скрипт, который будет записывать куда-то состояние всех триггеров таблицы, выключать их,
а потом включать их, чтобы не включить выключенный, если такие вообще есть (в оракле были).]] ></ac:plain-text-body></ac:structured-macro><h3>Со стороны фронта</h3><p>Помимо слоев, используемых в отрисовке страниц, собраны слои и шаблоны для индексации контента</p><p>К АРМам для заполнения таблиц ОСЖД добавлены служебные АРМы (дерево документов, присоединенные к документам файлы и т.д)</p><p>К специфическим скриптам ОСЖД (раскрываемое верхнее меню, слайдер) добавлены общие компоненты (inex-mixins, jqui-datepicker)&nbsp;</p><p>Метаданные АРМов перенесли целиком, дабы ничего не забыть</p><h3>Со стороны nginx и ДНС</h3><p>DNS ведёт на&nbsp;94.159.31.10 (внутри - 172.22.2.251).</p><p>С&nbsp;172.22.2.251 - на&nbsp;172.22.2.95.</p><p>На&nbsp;172.22.2.95 контексты&nbsp;/wps, /admin_css, /admin_js, /js, /fonts, /mccbuilder, /mccenabler, /portal_dojo, /PortalTheme, /searchfeed, /utils и / (строго, без продолжения) ведут на 172.22.2.192 и 172.22.2.193 (для разработческого - на 172.22.2.52), Прочие - в Кубер.</p><h3>Со стороны поиска и индексера</h3><p>-----------------------------------------------------</p><h3>Со стороны установщика</h3><p>Установщик был подготовлен к работе с проектом ОСДЖ (продуктивом osjd.org и ПТК CI osjd.odev.oooinex.ru) следующим образом:</p><ol><li>Добавлены переменные для проекта (там же прописывается состав приложений, доменное имя, ветки, токены и тд) playbooks/vars/<a class="w-link" href="http://osjd.org/" title="Пройти по ссылке">osjd.org</a></li><li>Добавлены настройки самого ансибля для проекта осжд playbooks/inventory/osjd.ini</li><li>Добавлены шаблоны (конфиги nginx и записи в ДНС) для проекта осжд playbooks/files/osjd</li><li>Поправлен скрипт ptk_<a class="w-link" href="http://controll.sh/" title="Пройти по ссылке">controll.sh</a>&nbsp;(чтобы запускался с проектом осжд тоже)</li></ol><h3>Со стороны мониторинга</h3><p>Добавлен график</p><p><a href="https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1">https://grafana.oooinex.ru/d/UxvD49hMz/dostupnost-servisov-po-http?viewPanel=13&amp;orgId=1</a></p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-51-39.png" /></ac:image></p><p>В Кибане логи в mwk:</p><p><ac:image ac:height="250"><ri:attachment ri:filename="image2021-5-6_14-54-2.png" /></ac:image></p><h2>Какие проверки были сделаны:</h2><ol><li>Админка работает, армы нового ПТК открываются, история изменений сохраняется (где имеется)</li><li>Страницы сайта загружаются, есть все картинки, данные (новости, статьи итд)</li><li>Поиск на сайте работает (и индексация изменений)</li><li>Проверка прав в ACL работает (и права acl перенесены)</li><li>Проанализировали сайт на отсутствие битых ссылок (не 200)</li></ol><p><br /></p>]]></property>
<property name="content" class="Page" package="com.atlassian.confluence.pages"><id name="id">79435628</id>
</property>
<property name="bodyType">2</property>
</object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545380</id>
<property name="name"><![CDATA[MEDIA_TYPE]]></property>
<property name="stringValue"><![CDATA[image/png]]></property>
<property name="longValue"/><property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545381</id>
<property name="name"><![CDATA[FILESIZE]]></property>
<property name="stringValue"/><property name="longValue">76423</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545382</id>
<property name="name"><![CDATA[MINOR_EDIT]]></property>
<property name="stringValue"/><property name="longValue">0</property>
<property name="dateValue"/></object>
<object class="ContentProperty" package="com.atlassian.confluence.content">
<id name="id">79545383</id>
<property name="name"><![CDATA[HIDDEN]]></property>
<property name="stringValue"/><property name="longValue">0</property>
<property name="dateValue"/></object>
</hibernate-generic>